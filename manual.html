<!DOCTYPE html>  
<html lang="en"> 
<head><title>Aleph Manual</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)"> 
<meta name="originator" content="TeX4ht (https://tug.org/tex4ht/)"> 
<!-- html --> 
<meta name="src" content="manual.tex"> 
<link rel="stylesheet" type="text/css" href="manual.css"> 
</head><body >
   <div class="maketitle">
<h2 class="titleHead">Aleph Manual</h2>
<div class="author" ><span 
class="cmr-12">Laszlo Csirmaz</span></div><br>
<div class="date" ><span 
class="cmr-12">April 29, 2025</span></div>
   </div>
   <h3 class="likesectionHead"><a 
 id="x1-1000"></a>Preface</h3>
<!--l. 175--><p class="noindent" ><span 
class="cmss-10">ALEPH </span>&#8211; an acronym for &#8220;<span 
class="cmss-10">A L</span>anguage <span 
class="cmss-10">E</span>ncouraging <span 
class="cmss-10">P</span>rogram <span 
class="cmss-10">H</span>ierarchy&#8221; &#8211; is a
high-level programming language designed to provide a tool that effectively helps
programmers to structure their programs in a hierarchical fashion. <span 
class="cmss-10">ALEPH </span>is suitable
for problems that suggest top-down analysis, like parsers, search algorithms,
combinatorial problems, artificial intelligence problems, etc. Probably the
most interesting feature of the <span 
class="cmss-10">ALEPH </span>language is its unique &#8220;copy, execute,
copy&#8221; parameter passing method. This method prevents modifying parameter
values when the called routine fails as well as it postpones side effects caused
by global parameters until a successful call is completed. Another <span 
class="cmss-10">ALEPH</span>
feature is modeling the complete computer memory as a single (virtual)
list of computer words indexed by integers. Continuous segments of this
virtual memory are populated by stacks and tables so that an index (pointer)
determines the stack or table it points to. Stacks can grow and shrink within
their virtual limits which are assigned during compilation. This memory
model allows transferring pointers seamlessly from one <span 
class="cmss-10">ALEPH </span>program to
another.
<!--l. 193--><p class="indent" >   <a 
href="#x1-30001">Chapter 1</a> of this Manual gives a tutorial introduction into the basics of <span 
class="cmss-10">ALEPH</span>.
It is written in a style which can be followed easily by novice programmes. Chapters
2 to 7 contain a semi-formal definition of the language. 
<a href="#x1-140003">Chapter 3</a>
treats <span 
class="cmti-10">rules</span>, and the control flow in them. 
<a href="#x1-330004" >Chapter 4</a>
is about data types, while <span 
class="cmti-10">externals </span>are treated in <a href="#x1-480005">Chapter
5</a>. <a href="#x1-490006">Chapter 6</a>
describes <span 
class="cmti-10">pragmats</span>. The global structure of an <span 
class="cmss-10">ALEPH </span>program, including how the
source can be split into files and modules are discussed in 
<a href="#x1-540007">Chapter 7</a>.
Elements of the Standard Library in 
<a href="#x1-600008">Chapter 8</a>,
program representation in 
<a href="#x1-740009">Chapter 9</a>,
and sample programs in <a href="#x1-7800010">Chapter 10</a>
close the Manual.
<!--l. 207--><p class="indent" >   This version describes the language as it has been implemented in <span class="cite">[<a 
href="#Xalephcomp">1</a>]</span>. The
                                                                  

                                                                  
Manual is based on, and repeats large parts of the fourth printing from 1982 <span class="cite">[<a 
href="#Xmanual">2</a>]</span>.
Many paragraphs have been kept identical, while many others were rewritten to
reflect the implemented language.
<!--l. 213--><p class="indent" >
                                                                  

                                                                  
   <h3 class="likesectionHead"><a 
 id="x1-2000"></a>Contents</h3>
   <div class="tableofcontents">
   &#x00A0;<span class="sectionToc" >1 <a 
href="#x1-30001" id="QQ2-1-3">Informal introduction to Aleph</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >1.1 <a 
href="#x1-40001.1" id="QQ2-1-4">The problem and its grammar</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >1.2 <a 
href="#x1-50001.2" id="QQ2-1-5">Rules</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >1.3 <a 
href="#x1-60001.3" id="QQ2-1-6">Further rules</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >1.4 <a 
href="#x1-70001.4" id="QQ2-1-7">Input</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >1.5 <a 
href="#x1-80001.5" id="QQ2-1-8">Output</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >1.6 <a 
href="#x1-90001.6" id="QQ2-1-9">Starting the program</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >1.7 <a 
href="#x1-100001.7" id="QQ2-1-10">Creating a module</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >1.8 <a 
href="#x1-110001.8" id="QQ2-1-11">The anatomy of a rule</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >1.9 <a 
href="#x1-120001.9" id="QQ2-1-12">Variable number of affixes</a></span>
<br>   &#x00A0;<span class="sectionToc" >2 <a 
href="#x1-130002" id="QQ2-1-13">Syntactical description of Aleph</a></span>
<br>   &#x00A0;<span class="sectionToc" >3 <a 
href="#x1-140003" id="QQ2-1-14">Program logic</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >3.1 <a 
href="#x1-150003.1" id="QQ2-1-15">Rules</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >3.2 <a 
href="#x1-190003.2" id="QQ2-1-19">Affixes</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >3.3 <a 
href="#x1-230003.3" id="QQ2-1-23">Operations</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >3.4 <a 
href="#x1-270003.4" id="QQ2-1-27">Affix form</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >3.5 <a 
href="#x1-280003.5" id="QQ2-1-28">Terminators</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >3.6 <a 
href="#x1-310003.6" id="QQ2-1-31">Compound members</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >3.7 <a 
href="#x1-320003.7" id="QQ2-1-32">Classification</a></span>
<br>   &#x00A0;<span class="sectionToc" >4 <a 
href="#x1-330004" id="QQ2-1-33">Data</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >4.1 <a 
href="#x1-340004.1" id="QQ2-1-34">Constants and variables</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >4.2 <a 
href="#x1-380004.2" id="QQ2-1-38">Tables and stacks</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >4.3 <a 
href="#x1-450004.3" id="QQ2-1-45">Files</a></span>
<br>   &#x00A0;<span class="sectionToc" >5 <a 
href="#x1-480005" id="QQ2-1-48">Externals</a></span>
<br>   &#x00A0;<span class="sectionToc" >6 <a 
href="#x1-490006" id="QQ2-1-49">Pragmats</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >6.1 <a 
href="#x1-500006.1" id="QQ2-1-50">Compiler output</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >6.2 <a 
href="#x1-510006.2" id="QQ2-1-51">Compilation pragmats</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >6.3 <a 
href="#x1-520006.3" id="QQ2-1-52">Conditional pragmats</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >6.4 <a 
href="#x1-530006.4" id="QQ2-1-53">Module pragmats</a></span>
<br>   &#x00A0;<span class="sectionToc" >7 <a 
href="#x1-540007" id="QQ2-1-54">Units</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >7.1 <a 
href="#x1-550007.1" id="QQ2-1-55">Source files</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >7.2 <a 
href="#x1-560007.2" id="QQ2-1-56">Modules</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >7.3 <a 
href="#x1-570007.3" id="QQ2-1-57">The module hierarchy</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >7.4 <a 
href="#x1-580007.4" id="QQ2-1-58">Tag definitions</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >7.5 <a 
href="#x1-590007.5" id="QQ2-1-59">Macro rules</a></span>
<br>   &#x00A0;<span class="sectionToc" >8 <a 
href="#x1-600008" id="QQ2-1-60">Standard Library</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >8.1 <a 
href="#x1-610008.1" id="QQ2-1-61">Integers</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >8.2 <a 
href="#x1-660008.2" id="QQ2-1-66">Tables and stacks</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >8.3 <a 
href="#x1-670008.3" id="QQ2-1-67">Strings</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >8.4 <a 
href="#x1-680008.4" id="QQ2-1-68">Files</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >8.5 <a 
href="#x1-730008.5" id="QQ2-1-73">Miscellaneous</a></span>
<br>   &#x00A0;<span class="sectionToc" >9 <a 
href="#x1-740009" id="QQ2-1-74">Program representation</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >9.1 <a 
href="#x1-750009.1" id="QQ2-1-75">Symbols</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >9.2 <a 
href="#x1-760009.2" id="QQ2-1-76">Tags</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >9.3 <a 
href="#x1-770009.3" id="QQ2-1-77">Denotations</a></span>
<br>   &#x00A0;<span class="sectionToc" >10 <a 
href="#x1-7800010" id="QQ2-1-78">Examples</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >10.1 <a 
href="#x1-7900010.1" id="QQ2-1-79">Towers of Hanoi</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >10.2 <a 
href="#x1-8000010.2" id="QQ2-1-80">Printing Towers of Hanoi</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >10.3 <a 
href="#x1-8100010.3" id="QQ2-1-81">Symbolic differentiation</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >10.4 <a 
href="#x1-8200010.4" id="QQ2-1-82">Quicksort</a></span>
<br>   &#x00A0;&#x00A0;<span class="subsectionToc" >10.5 <a 
href="#x1-8300010.5" id="QQ2-1-83">Permutations</a></span>
<br>   &#x00A0;<span class="sectionToc" >11 <a 
href="#x1-8400011" id="QQ2-1-84">References in the manual</a></span>
   </div>
<!--l. 217--><p class="indent" >
                                                                  

                                                                  
   <h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-30001"></a>Informal introduction to Aleph</h3>
<!--l. 220--><p class="noindent" >This chapter gradually develops a small <span 
class="cmss-10">ALEPH </span>program, interspersing it liberally
with annotations and arguments. This introduction is intended to give some insight
into the use of the language <span 
class="cmss-10">ALEPH </span>and to display its main features in a very
informal way.
<!--l. 225--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">1.1   </span> <a 
 id="x1-40001.1"></a>The problem and its grammar</h4>
<!--l. 227--><p class="noindent" >We want to write a program that reads a series of arithmetic expressions separated
by commas, calculate the value of each expression while reading it, and subsequently
print the value. The expression will contain only unsigned integers, plus symbols,
multiplication symbols and parentheses; and example might be <span 
class="ec-lmtt-9x-x-102">15 * (12 + 3 *</span>
<span 
class="ec-lmtt-9x-x-102">9)</span>.
<!--l. 233--><p class="indent" >   First we put the requirements for the input to our program in a more formal form
of a context-free grammar. This grammar shows exactly which symbol we will accept
in which position.
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 237--><p class="indent" >      <span 
class="cmss-10">input: expression, input-tail.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 238--><p class="indent" >      <span 
class="cmss-10">input-tail: comma symbol, input; empty.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 239--><p class="indent" >      <span 
class="cmss-10">expression: term, plus symbol, expression; term.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 240--><p class="indent" >      <span 
class="cmss-10">term: primary, times symbol, term; primary.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 241--><p class="indent" >      <span 
class="cmss-10">primary: left-parenthesis, expression, right-parenthesis; integer.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 242--><p class="indent" >      <span 
class="cmss-10">integer: digit, integer; digit.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 243--><p class="indent" >      <span 
class="cmss-10">empty: .</span></dd></dl>
<!--l. 245--><p class="noindent" >The rule for <span 
class="cmss-10">input</span> can be read as
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 247--><p class="noindent" ><span 
class="cmss-10">input</span> <span 
class="cmsl-10">is an </span><span 
class="cmss-10">expression</span> <span 
class="cmsl-10">followed by and </span><span 
class="cmss-10">input-tail</span><span 
class="cmsl-10">;</span></li></ul>
<!--l. 250--><p class="noindent" >whereas the rule for <span 
class="cmss-10">primary</span> can be read as
                                                                  

                                                                  
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 253--><p class="noindent" ><span 
class="cmsl-10">a </span><span 
class="cmss-10">primary</span> <span 
class="cmsl-10">is either a </span><span 
class="cmss-10">left-parenthesis</span> <span 
class="cmsl-10">followed by an </span><span 
class="cmss-10">expression</span> <span 
class="cmsl-10">followed by a</span>
   <span 
class="cmss-10">right-parenthesis</span><span 
class="cmsl-10">, or an </span><span 
class="cmss-10">integer</span><span 
class="cmsl-10">.</span></li></ul>
<!--l. 256--><p class="noindent" >This grammar shows clearly that, for instance, <span 
class="ec-lmtt-9x-x-102">15*+3</span> will not be accepted as an
<span 
class="cmss-10">expression</span>. The <span 
class="ec-lmtt-9x-x-102">*</span> can only be followed by a <span 
class="cmss-10">term</span>, which always starts with a <span 
class="cmss-10">primary</span>,
which in turn either starts with an <span 
class="cmss-10">integer</span> or a <span 
class="cmss-10">left-parenthesis</span>, but never with a
<span 
class="ec-lmtt-9x-x-102">+</span>.
<!--l. 262--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">1.2   </span> <a 
 id="x1-50001.2"></a>Rules</h4>
<!--l. 264--><p class="noindent" >We now write a series of <span 
class="cmss-10">ALEPH </span>rules, one for each rule in the grammar. For the
grammar rule <span 
class="cmss-10">expression</span> we write an <span 
class="cmss-10">ALEPH </span>rule that, when executed, reads
and processes an expression and yields its result. This <span 
class="cmss-10">ALEPH </span>rule looks as
follows:
  <!--l. 268--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;expression+res&#x003E;-r:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;term+res,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol+/+/,expression+r,add+res+r+res;+).</span>
</div>
<!--l. 273--><p class="noindent" >This can be read as
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 275--><p class="noindent" ><span 
class="cmsl-10">an </span><span 
class="cmss-10">expression</span><span 
class="cmsl-10">, which must yield a result in </span><span 
class="ec-lmtt-9x-x-102">res</span> <span 
class="cmsl-10">and uses a (local) variable </span><span 
class="ec-lmtt-9x-x-102">r</span><span 
class="cmsl-10">,</span>
   <span 
class="cmsl-10">is </span>(we are now at the colon) <span 
class="cmsl-10">a </span><span 
class="cmss-10">term</span> <span 
class="cmsl-10">which will yield a result in </span><span 
class="ec-lmtt-9x-x-102">res</span><span 
class="cmsl-10">, followed</span>
   <span 
class="cmsl-10">by either </span>(we are now at the left parenthesis) <span 
class="cmsl-10">by a </span><span 
class="cmss-10">plus-symbol</span> <span 
class="cmsl-10">followed by</span>
   <span 
class="cmsl-10">an </span><span 
class="cmss-10">expression</span> <span 
class="cmsl-10">which will yield its result in </span><span 
class="ec-lmtt-9x-x-102">r</span> <span 
class="cmsl-10">after which the result in </span><span 
class="ec-lmtt-9x-x-102">res</span> <span 
class="cmsl-10">and</span>
   <span 
class="cmsl-10">the result in </span><span 
class="ec-lmtt-9x-x-102">r</span> <span 
class="cmsl-10">will be added to form a new result in </span><span 
class="ec-lmtt-9x-x-102">res</span><span 
class="cmsl-10">, or </span>(we are at the
   semicolon now) <span 
class="cmsl-10">by nothing.</span></li></ul>
<!--l. 285--><p class="noindent" >We see that this is the old meaning of the grammar rule for <span 
class="cmss-10">expression</span>, sprinkled with
some data-handling. This data-handling tells what is to be done to get the correct
result: we could call it the <span 
class="cmti-10">semantics </span>of an <span 
class="cmss-10">expression</span>. If we remove these
paraphernalia from the <span 
class="cmss-10">ALEPH </span>rule we obtain something very similar to the original
grammar rule:
  <!--l. 290--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;expression1:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;term,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol+/+/,expression1;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+).</span>
</div>
<!--l. 294--><p class="noindent" >This rule, while it is still correct <span 
class="cmss-10">ALEPH</span>, does no data handling, and, consequently,
will not yield a result. It could, for example, be used to skip an <span 
class="cmss-10">expression</span> in the
input.
<!--l. 299--><p class="indent" >   We now direct our attention back to the <span 
class="cmss-10">ALEPH </span>rule <span 
class="ec-lmtt-9x-x-102">expression</span> and consider
what happens when it is &#8220;executed&#8221;. First, <span 
class="ec-lmtt-9x-x-102">term</span> is executed and will yield a result in
<span 
class="ec-lmtt-9x-x-102">res</span>. It does so because we will define <span 
class="ec-lmtt-9x-x-102">term</span> so that it will. Then we meet
a series of two alternatives separated by a semicolon (<span 
class="cmti-10">either </span>a this <span 
class="cmti-10">or </span>a
                                                                  

                                                                  
that). First, an attempt is made to execute the first alternative by asking
<span 
class="ec-lmtt-9x-x-102">is symbol+/+/</span>. This is a <span 
class="cmti-10">question </span>(because we will define it so) which is
answered positively if indeed the next symbol is a <span 
class="ec-lmtt-9x-x-102">+</span> (in which case the <span 
class="ec-lmtt-9x-x-102">+</span> will
be discarded after reading), or negatively, if the next symbol is something
else.
<!--l. 310--><p class="indent" >   If <span 
class="ec-lmtt-9x-x-102">is symbol+/+/</span> &#8220;succeeds&#8221; the remainder of the first alternative is executed,
meaning <span 
class="ec-lmtt-9x-x-102">expression+r</span> is called (recursively), yielding its result in <span 
class="ec-lmtt-9x-x-102">r</span>, and
subsequently <span 
class="ec-lmtt-9x-x-102">add+res+r+res</span> is called, putting the sum of <span 
class="ec-lmtt-9x-x-102">res</span> and <span 
class="ec-lmtt-9x-x-102">r</span> in <span 
class="ec-lmtt-9x-x-102">res</span>. The call of
<span 
class="ec-lmtt-9x-x-102">expression+r</span> works because we just defined what it should do. <span 
class="ec-lmtt-9x-x-102">add</span> is the name
known to the compiler and has a predefined meaning. However, if we are dissatisfied
with its workings we could define our own rule for it. Now this alternative is finished,
so the parenthesized part is finished, which brings us to the end of the execution of
the rule <span 
class="ec-lmtt-9x-x-102">expression</span>.
<!--l. 320--><p class="indent" >   If <span 
class="ec-lmtt-9x-x-102">is symbol+/+/</span> &#8220;fails&#8221;, the next alternative after the semicolon is tried. This
alternative consists of a single <span 
class="ec-lmtt-9x-x-102">+</span> which is a dummy statement that always succeeds.
Without further action we reach the end of the rule <span 
class="ec-lmtt-9x-x-102">expression</span>.
<!--l. 325--><p class="indent" >   The above indicates the division of responsibility between the language and the
programmer. The language provides a framework that controls which rules are called
depending on the answers obtained from other rules. The programmer must fill in
this framework by defining what action must be performed by a specific rule, and
what question must be asked. These definitions again will have the form of
rules that do something (as defined by the programmer) embedded in a
framework that controls their order (which is supplied by the language). It
is clear that this process must end somewhere. It can end in one of two
ways.
<!--l. 335--><p class="indent" >   It may appear that the action needed is supplied by <span 
class="cmss-10">ALEPH</span>. There are some basic
primitives in the language, such as copying of a value, comparing two values, and
extending a stack by a fixed number of given values. Often, however, these primitives
are not sufficient. In such cases the rule is declared to be <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">external</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>, and its actions
are specified in a different way. A number of such external rules are predefined,
including the rule <span 
class="ec-lmtt-9x-x-102">add</span> used above. This predefined set of rules probably suffice for
most applications.
<!--l. 344--><p class="indent" >   We now pay some attention to the exact notation (syntax) of the rule
<span 
class="ec-lmtt-9x-x-102">expression</span>. All rules have the property that when they are called they are
either guaranteed to succeed or they may fail. The word <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> indicates
that a call of this rule is guaranteed to succeed. The name of the rule is
<span 
class="ec-lmtt-9x-x-102">expression</span>, and <span 
class="ec-lmtt-9x-x-102">res</span> is its only formal &#8220;affix&#8221; (parameter). The <span 
class="ec-lmtt-9x-x-102">+</span> serves
as a separator as it <span 
class="cmti-10">affixes </span>the affix to the rule. The right arrowhead (<span 
class="ec-lmtt-9x-x-102">&#x003E;</span>)
indicates that the resulting value of <span 
class="ec-lmtt-9x-x-102">res</span> will be passed back to the calling
rule. This means that <span 
class="ec-lmtt-9x-x-102">expression</span> has the obligation to assign a value to
<span 
class="ec-lmtt-9x-x-102">res</span> under all circumstances since <span 
class="ec-lmtt-9x-x-102">res</span> is an output parameter, guaranteed
to receive a value. If the text of the rule does not support this claim, the
compiler will discover it and issue an error message. The <span 
class="ec-lmtt-9x-x-102">+</span> sign and the term
<span 
class="cmti-10">affix </span>stem from the theory of affix grammars of which <span 
class="cmss-10">ALEPH </span>is based on
<span class="cite">[<a 
href="#Xkoster71b">3</a>,&#x00A0;<a 
href="#Xwatt77">4</a>]</span>.
<!--l. 359--><p class="indent" >   The <span 
class="ec-lmtt-9x-x-102">-r</span> specifies <span 
class="ec-lmtt-9x-x-102">r</span> as a local affix (local variable) of the rule, and the colon closes
                                                                  

                                                                  
the left hand side. The <span 
class="ec-lmtt-9x-x-102">+</span> in <span 
class="ec-lmtt-9x-x-102">term+res</span> appends the actual affix <span 
class="ec-lmtt-9x-x-102">res</span> to the
rule <span 
class="ec-lmtt-9x-x-102">term</span>, the comma separates calls of rules. The parentheses group both
alternatives into one action. The <span 
class="ec-lmtt-9x-x-102">+</span> between slashes (indicating &#8220;absolute value&#8221;)
represents the integer value of the plus symbol. The semicolon separates
alternatives, which are checked in textual order. As said before, the stand-alone <span 
class="ec-lmtt-9x-x-102">+</span>
denotes the dummy action that always succeeds. Finally, the period ends the
rule.
<!--l. 369--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">1.3   </span> <a 
 id="x1-60001.3"></a>Further rules</h4>
<!--l. 370--><p class="noindent" >In view of the above, the rule for <span 
class="cmss-10">term</span> should not be a surprise:
  <!--l. 371--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;term+res&#x003E;-r:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;primary+res,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol+/*/,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;term+r,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;mult+res+r+res;+).</span>
</div>
<!--l. 376--><p class="noindent" >Now, we are tempted to render the rule for <span 
class="cmss-10">primary</span> as:
  <!--l. 378--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;primary+res&#x003E;:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol+/(/,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expression+res,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol+/)/;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;integer+res.</span>
</div>
<!--l. 383--><p class="noindent" >but here the compiler would discover that we did not specify what should be done if
the second call of <span 
class="ec-lmtt-9x-x-102">is symbol</span> fails. If that happens, we would have recognized,
processed and skipped a <span 
class="cmss-10">left-parenthesis</span> and a complete <span 
class="cmss-10">expression</span>, to find that the
corresponding <span 
class="cmss-10">right-parenthesis</span> is missing. This means that the input is incorrect;
we now decide that we do not do any error recovery, instead give an error
message and stop the program. The modified version of the <span 
class="ec-lmtt-9x-x-102">primary</span> rule is
then:
  <!--l. 391--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;primary+res&#x003E;:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol+/(/,expression+res,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol+/)/;error+no</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;paren);</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;integer+res.</span>
</div>
<!--l. 397--><p class="noindent" >Here the two alternatives between parentheses behave like one action that will
always succeed: either the right parenthesis is present in the input, or an
error will be signaled. <span 
class="ec-lmtt-9x-x-102">no paren</span> is a constant that will be specified later
on.
<!--l. 403--><p class="indent" >   Writing a rule for reading an integer is trickier than it seems to be. Our version
consists of two rules and is about as complicated as necessary.
  <!--l. 408--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;integer+res&#x003E;:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;digit+res,integer1+res;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;error+no</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;int.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;integer1+&#x003E;res&#x003E;-d:</span>
                                                                  

                                                                  
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;digit+d,mult+res+10+res,add+res+d+res,integer1+res;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+.</span>
</div>
<!--l. 417--><p class="noindent" >The rule <span 
class="ec-lmtt-9x-x-102">integer</span> asks for a digit. If present, its value will serve as the initial value of
<span 
class="ec-lmtt-9x-x-102">res</span>. The value of <span 
class="ec-lmtt-9x-x-102">res</span> is then passed to <span 
class="ec-lmtt-9x-x-102">integer1</span>. If no digit is present an error
message is issued. The rule <span 
class="ec-lmtt-9x-x-102">integer</span> must assign a value to <span 
class="ec-lmtt-9x-x-102">res</span> under all
circumstances. This requirement is not violated here as <span 
class="ec-lmtt-9x-x-102">error</span> will be specified as a
non-returning, <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">exit</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> rule.
<!--l. 425--><p class="indent" >   The rule <span 
class="ec-lmtt-9x-x-102">integer1</span> processes the tail of the integer. If there is such a tail, it
starts with a digit, so the first alternative asks <span 
class="ec-lmtt-9x-x-102">digit+d</span>. If so, a new result is
calculated from the previous one and the digit <span 
class="ec-lmtt-9x-x-102">d</span> by making <span 
class="ec-lmtt-9x-x-102">res</span> equal to <span 
class="ec-lmtt-9x-x-102">res*10+d</span>
and <span 
class="ec-lmtt-9x-x-102">integer1</span> is called again (to see if there are more digits to come). If
there was no digit, we have processed the whole integer and <span 
class="ec-lmtt-9x-x-102">res</span> contains its
value.
<!--l. 432--><p class="indent" >   The right arrow-head in front of <span 
class="ec-lmtt-9x-x-102">res</span> means that the calling rule will have assigned
a value to this affix just before calling <span 
class="ec-lmtt-9x-x-102">integer1</span>, i.e., <span 
class="ec-lmtt-9x-x-102">res</span> is &#8220;initialized&#8221;. The right
arrow-head after <span 
class="ec-lmtt-9x-x-102">res</span> again indicates that the resulting value will be passed back to
the calling rule.
<!--l. 437--><p class="indent" >   A more convenient way of reading an integer is provided by the rule <span 
class="ec-lmtt-9x-x-102">get int</span> from
the Standard Library.
<!--l. 441--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">1.4   </span> <a 
 id="x1-70001.4"></a>Input</h4>
<!--l. 443--><p class="noindent" >The above forms the heart of our program. We now supply some input and output
definitions. For input we will use the predefined <span 
class="cmss-10">ALEPH </span>character file <span 
class="ec-lmtt-9x-x-102">STDIN</span>, which
provides the characters entered at the console. Additionally, the global variable <span 
class="ec-lmtt-9x-x-102">buff</span>
will contain the first character not yet processed. Comments in <span 
class="cmss-10">ALEPH </span>start
with a <span 
class="ec-lmtt-9x-x-102">$</span> and end with another <span 
class="ec-lmtt-9x-x-102">$</span> or at the end of the line, whichever comes
first.
  <!--l. 450--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;Input</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">variable</span><span 
class="ec-lmtt-9x-x-102">&#8217;buff=/</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;/.</span>
</div>
<!--l. 454--><p class="noindent" >The variable <span 
class="ec-lmtt-9x-x-102">buff</span> is initialized with the code for the space character (there being no
uninitialized variables in <span 
class="cmss-10">ALEPH</span>). We are now in a position to give two rule
definitions that were still missing.
  <!--l. 458--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol+&#x003E;n:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;buff=n,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;get</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;digit+d&#x003E;:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;=buff=</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[/0/:/9/],</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;subtr+buff+/0/+d,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;get</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;],</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;-.</span>
</div>
<!--l. 466--><p class="noindent" >These require some more explanation, mainly concerning the notation. The word
<span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> indicates that <span 
class="ec-lmtt-9x-x-102">is symbol</span> is not an action but a question, or more
precisely a <span 
class="cmti-10">committing </span>question as opposed to a <span 
class="cmti-10">non-committal </span>question. A
non-committal question is a question that, regardless of the answer it yields, makes
no global changes, does not do anything irreversible. A committing question
is a question that, when answered positively, does make global (and often
irreversible) changes. To give an example, &#8220;<span 
class="cmsl-10">Are there plane tickets to New York for</span>
<span 
class="cmsl-10">less than </span><span 
class="tcsl-1000">$</span><span 
class="cmsl-10">1000? </span>&#8221; is a non-committal question, whereas &#8220;<span 
class="cmsl-10">Are there plane</span>
<span 
class="cmsl-10">tickets for New York for less than </span><span 
class="tcsl-1000">$</span><span 
class="cmsl-10">1000? If so, I want one.</span>&#8221; is a committing
question.
<!--l. 479--><p class="indent" >   In the case of <span 
class="ec-lmtt-9x-x-102">is symbol</span> the (committing) question is: <span 
class="cmsl-10">Is the symbol in</span>
<span 
class="ec-lmtt-9x-x-102">buff</span> <span 
class="cmsl-10">equal to the one I want? If so, advance the input and put the next</span>
<span 
class="cmsl-10">character into </span><span 
class="ec-lmtt-9x-x-102">buff</span><span 
class="cmsl-10">. </span>The form <span 
class="ec-lmtt-9x-x-102">buff=n</span> is a test for equality, it is one of the
primitive operations in <span 
class="cmss-10">ALEPH</span>. The rule <span 
class="ec-lmtt-9x-x-102">get next symbol</span> will be defined
below.
<!--l. 485--><p class="indent" >   Again, the right arrow-head in front of the formal affix <span 
class="ec-lmtt-9x-x-102">n</span> indicates that the calling
rule will have assigned a value to it. The absence of a right arrow-head to the right of
the <span 
class="ec-lmtt-9x-x-102">n</span> indicates that the value of <span 
class="ec-lmtt-9x-x-102">n</span> (which may have been changed) will not be passed
back to the calling rule.
<!--l. 491--><p class="indent" >   The rule for <span 
class="ec-lmtt-9x-x-102">digit</span> (again a <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>) shows another feature of <span 
class="cmss-10">ALEPH</span>, the
<span 
class="cmss-10">classification</span>. Classes are specified by the values presented in square brackets, for each
possible value of <span 
class="ec-lmtt-9x-x-102">buff</span> they specify which of the alternatives will be chosen. Thus for
values of <span 
class="ec-lmtt-9x-x-102">buff</span> that lie between the code for <span 
class="ec-lmtt-9x-x-102">0</span> and the code for <span 
class="ec-lmtt-9x-x-102">9</span> the first alternative
is chosen. For all other values the next alternative&#8212;consisting of the dummy question
that always fails, denoted by the dash&#8212;will be chosen. The rule <span 
class="ec-lmtt-9x-x-102">digit</span> is equivalent
to
  <!--l. 499--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;digit+d&#x003E;:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;between+/0/+buff+/9/,subtr+buff+/0/+d,get</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol.</span>
</div>
<!--l. 503--><p class="noindent" >assuming that <span 
class="ec-lmtt-9x-x-102">between+/0/+buff+/9/</span> succeeds if and only if the value of <span 
class="ec-lmtt-9x-x-102">buff</span> is
between <span 
class="ec-lmtt-9x-x-102">/0/</span> and <span 
class="ec-lmtt-9x-x-102">/9/</span>. Classification is analogous to the case statement in other
programming languages.
<!--l. 514--><p class="indent" >   One more input rule must be supplied:
  <!--l. 515--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;get</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;get</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+STDIN+buff,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;((buff=/</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;/;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;buff=newline),</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;get</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;);</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;stop-&#x003E;buff.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">constant</span><span 
class="ec-lmtt-9x-x-102">&#8217;stop=-1.</span>
</div>
<!--l. 524--><p class="noindent" ><span 
class="ec-lmtt-9x-x-102">get char</span> is an (external) rule known to the compiler. It tries to read the next
character from the <span 
class="cmss-10">ALEPH </span>file indicated by its first affix, which is <span 
class="ec-lmtt-9x-x-102">STDIN</span>. If there is a
character, it puts it in its second affix (here <span 
class="ec-lmtt-9x-x-102">buff</span>); if there are no more characters,
the rule fails. In the latter case <span 
class="ec-lmtt-9x-x-102">buff</span> is given the value <span 
class="ec-lmtt-9x-x-102">stop</span>, which is defined in a
<span 
class="cmss-10">constant-declaration</span> to be <span 
class="ec-lmtt-9x-x-102">-1</span>.
<!--l. 532--><p class="indent" >   If <span 
class="ec-lmtt-9x-x-102">get char</span> returns a character and if this is a space or a newline, <span 
class="ec-lmtt-9x-x-102">get char</span> is
called again. We&#8217;ve used nested parenthesizing. This definition of <span 
class="ec-lmtt-9x-x-102">get next</span>
<span 
class="ec-lmtt-9x-x-102">symbol</span> implies that we have decided that spaces and newlines are allowed
in the input in all positions (a decision that was not present in the initial
grammar).
<!--l. 538--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">1.5   </span> <a 
 id="x1-80001.5"></a>Output</h4>
<!--l. 539--><p class="noindent" >The output is as follows:
  <!--l. 540--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;output</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;integer+&#x003E;int:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;out</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;integer+int,put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+STDOUT+newline.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;out</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;integer+&#x003E;int-rem:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;divrem+int+10+int+rem,add+rem+/0/+rem,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(int=0;out</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;integer+int),put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+STDOUT+rem.</span>
</div>
<!--l. 548--><p class="noindent" >The rule <span 
class="ec-lmtt-9x-x-102">put char</span> is known to the compiler, as are <span 
class="ec-lmtt-9x-x-102">STDOUT</span> and <span 
class="ec-lmtt-9x-x-102">divrem</span>. The call of the
latter has the effect that <span 
class="ec-lmtt-9x-x-102">int</span> is divided by 10, the quotient is placed back to <span 
class="ec-lmtt-9x-x-102">int</span> and
the remainder to <span 
class="ec-lmtt-9x-x-102">rem</span>. This splits the number into its last digit and its head; if this
head (now in <span 
class="ec-lmtt-9x-x-102">int</span>) is not zero it must be printed first, which is done by the recursive
call of <span 
class="ec-lmtt-9x-x-102">out integer</span>. Subsequently, the last digit is printed through a call of
<span 
class="ec-lmtt-9x-x-102">put char</span>. This is a simple way of printing a number. A more convenient
way of printing an integer is provided by the Standard Library rule <span 
class="ec-lmtt-9x-x-102">print</span>
<span 
class="ec-lmtt-9x-x-102">int</span>.
<!--l. 559--><p class="indent" >   The predefined character file <span 
class="ec-lmtt-9x-x-102">STDOUT</span> sends characters to the console directly.
<!--l. 561--><p class="indent" >   For the printing of error messages we will need some string handling. Strings
do not constitute a special data type in <span 
class="cmss-10">ALEPH</span>; they are handled, like all
other complicated data types, by putting them into <span 
class="cmss-10">stack</span>s and <span 
class="cmss-10">table</span>s and
are operated upon by suitably defined rules (in this case supplied by the
system).
<!--l. 567--><p class="indent" >   The error handler takes the following form:
  <!--l. 568--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;Error-message</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;printing</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">exit</span><span 
class="ec-lmtt-9x-x-102">&#8217;error+&#x003E;er:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string+STDOUT+strings+er,put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+STDOUT+newline,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;exit+1.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">table</span><span 
class="ec-lmtt-9x-x-102">&#8217;strings[]=</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;("Right</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;parenthesis</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;missing":no</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;paren,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"Integer</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;missing":no</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;int</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;).</span>
</div>
<!--l. 579--><p class="noindent" >The table <span 
class="ec-lmtt-9x-x-102">strings</span> contains two strings stored in compressed form; they can be
reached under the names <span 
class="ec-lmtt-9x-x-102">no paren</span> and <span 
class="ec-lmtt-9x-x-102">no int</span>. The call of <span 
class="ec-lmtt-9x-x-102">put string</span> takes the affix
<span 
class="ec-lmtt-9x-x-102">er</span>, looks in the table <span 
class="ec-lmtt-9x-x-102">strings</span> under the entry corresponding to <span 
class="ec-lmtt-9x-x-102">er</span> and transfers the
string thus found to <span 
class="ec-lmtt-9x-x-102">STDOUT</span> for printing.
<!--l. 586--><p class="indent" >   The rule call <span 
class="ec-lmtt-9x-x-102">exit+1</span> never returns, it terminates the program while <span 
class="ec-lmtt-9x-x-102">1</span> will be
passed to the operating system as an indication what went wrong. This is by
no means the normal program termination: normal program termination
ensues when all work is done. The rule <span 
class="ec-lmtt-9x-x-102">error</span> is defined to be of type <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">exit</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>
indicating that this rule never returns, in particular it neither succeeds nor
fails.
<!--l. 593--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">1.6   </span> <a 
 id="x1-90001.6"></a>Starting the program</h4>
<!--l. 595--><p class="noindent" >The rule for reading an <span 
class="cmss-10">expression</span> (<span 
class="ec-lmtt-9x-x-102">expression</span>) and the one for printing an <span 
class="cmss-10">integer</span>
(<span 
class="ec-lmtt-9x-x-102">print integer</span>) can now be combined into the rule <span 
class="ec-lmtt-9x-x-102">input</span> (see the grammar at the
beginning of this chapter).
  <!--l. 598--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;input-int:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expression+int,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;integer+int,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol+/,/,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;input;+).</span>
</div>
<!--l. 603--><p class="noindent" >This rule combines the grammar rule for <span 
class="cmss-10">input</span> and <span 
class="cmss-10">input tail</span>. Instead of translating
<span 
class="cmss-10">empty</span> by <span 
class="ec-lmtt-9x-x-102">+</span>, we could make a test to see whether we have indeed reached the end of
the file:
  <!--l. 607--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(buff=stop;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;error+no</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;end)</span>
</div>
<!--l. 610--><p class="noindent" >We now remember our convention that <span 
class="ec-lmtt-9x-x-102">buff</span> contains the first symbol not yet
recognized, and realize that <span 
class="ec-lmtt-9x-x-102">buff</span> must be initialized with the first non-space symbol
of the input:
  <!--l. 614--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;initialize:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;get</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;read</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expressions</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;and</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;results:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;initialize,input.</span>
</div>
<!--l. 620--><p class="indent" >   At this point the reader will have noticed that until know we have only defined
rules that will do something if they are executed (called), and which will then call
other rules. Does <span 
class="cmss-10">ALEPH </span>contain any directly executable statements at all? The
answer is yes, but only one (per program). In our example it has the following
form:
  <!--l. 625--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;read</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expressions</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;and</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;results.</span>
</div>
<!--l. 628--><p class="noindent" >We now indicate the end of our program:
  <!--l. 630--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>
</div>
<!--l. 634--><p class="noindent" >When the program is run the root rule <span 
class="ec-lmtt-9x-x-102">read expressions and print results</span> is
executed. This rule calls <span 
class="ec-lmtt-9x-x-102">initialize</span>, which through a call of <span 
class="ec-lmtt-9x-x-102">get next symbol</span> puts
the first non-space symbol in <span 
class="ec-lmtt-9x-x-102">buff</span>; when <span 
class="ec-lmtt-9x-x-102">initialize</span> is done, <span 
class="ec-lmtt-9x-x-102">input</span> is called which
calls <span 
class="ec-lmtt-9x-x-102">expression</span> which in turn executes <span 
class="ec-lmtt-9x-x-102">term</span>, etc. After a while <span 
class="ec-lmtt-9x-x-102">input</span>, which
is called repeatedly, will find <span 
class="ec-lmtt-9x-x-102">is symbol+/,/</span> to fail. At that moment it is
done, and so is <span 
class="ec-lmtt-9x-x-102">read expressions and print results</span>. The call specified
in the <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> instruction is finished: this constitutes the normal program
termination.
<!--l. 645--><p class="indent" >   We could give the <span 
class="cmss-10">rule-declarations</span> and <span 
class="cmss-10">data-declarations</span> in any other order and
the effect would still be the same. The <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>, however, must be the last item of the
program.
<!--l. 649--><p class="indent" >   This brings us to the end of our sample program.
<!--l. 651--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">1.7   </span> <a 
 id="x1-100001.7"></a>Creating a module</h4>
<!--l. 653--><p class="noindent" >Looking back to the context-free grammar in 
<a href="#x1-40001.1">Section 1.1</a>  
specifying the problem
which was to be solved, we observe that the auxiliary input and output
rules developed in 
<a href="#x1-70001.4">Section 1.4</a>
and 
<a href="#x1-80001.5">Section 1.5</a>
can be used more generally. These rules
would remain unchanged if the problem, and, consequently, the grammar
describing the problem, changes. Thus we decided to create an <span 
class="cmss-10">ALEPH </span>library
module which provides these auxiliary rules &#8220;out of the box,&#8221; so that they
can be used without copying them verbatim into the main program. The
module will contain three of the rules: <span 
class="ec-lmtt-9x-x-102">is symbol</span>, <span 
class="ec-lmtt-9x-x-102">digit</span>, and <span 
class="ec-lmtt-9x-x-102">error</span>. The
rule <span 
class="ec-lmtt-9x-x-102">get next symbol</span> and the variable <span 
class="ec-lmtt-9x-x-102">buff</span> are used by these rules only,
thus they can be local to our module. We choose <span 
class="ec-lmtt-9x-x-102">base</span> as the module name.
According to the best practice, the name of the file containing the source
code of the module should resemble the module name. It is particularly
important as <span 
class="cmss-10">ALEPH </span>modules are invoked by specifying file names and not
module names. Thus the source text of the module will be put into a file
named <span 
class="ec-lmtt-9x-x-102">base.ale</span>, where the extension <span 
class="ec-lmtt-9x-x-102">.ale</span> indicates that it is an <span 
class="cmss-10">ALEPH</span>
file.
<!--l. 670--><p class="indent" >   In general, an <span 
class="cmss-10">ALEPH </span>module has two parts: the <span 
class="cmti-10">head </span>which specifies which rules
(and other constructs) this module provides, and the <span 
class="cmti-10">body </span>which contains
the realization of these resources. When the module is used, only the head
part is consulted, so this part must provide complete information on the
provided items. When the module is compiled, both parts are processed,
letting the compiler check that all promised resources are indeed defined.
Modules use the <span 
class="cmss-10">ALEPH </span><span 
class="cmss-10">pragmat</span> facility extensively to control these aspects of
compilation.
<!--l. 679--><p class="indent" >   The overall structure of an <span 
class="cmss-10">ALEPH </span>module typically starts with a <span 
class="cmss-10">pragmat</span>
specifying the module name. It is followed by the module head, followed by the body.
The latter one is enclosed between the conditional <span 
class="cmss-10">pragmat</span>s <span 
class="ec-lmtt-9x-x-102">if=compile</span> and
<span 
class="ec-lmtt-9x-x-102">endif=compile</span>. Accordingly, we start our module with the title and head
as
  <!--l. 684--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;module=base.</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;module</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;name</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;module</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;head</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol+&#x003E;n,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;digit+d&#x003E;.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#8217;</span><span 
class="ec-lmtk-10x-x-92">exit</span><span 
class="ec-lmtt-9x-x-102">&#8217;error+&#x003E;er.</span>
</div>
<!--l. 690--><p class="noindent" >The first line specifies the module name, informing the compiler at the same time
that it is reading a module source. The subsequent <span 
class="cmss-10">prototypes</span> (rule heads
without rule body) specify the three rules exported by this module. These rule
heads convey all information needed when they are used. The affix of <span 
class="ec-lmtt-9x-x-102">is</span>
<span 
class="ec-lmtt-9x-x-102">symbol</span> will be a character specified by the caller, and <span 
class="ec-lmtt-9x-x-102">digit</span> will return the
value of the next digit in the affix <span 
class="ec-lmtt-9x-x-102">d</span>. The affix of the <span 
class="ec-lmtt-9x-x-102">error</span> rule specifies the
error message to be printed; it has been chosen to be a pointer to one of the
predefined strings in the table <span 
class="ec-lmtt-9x-x-102">strings</span>. Our module needs access to this
table (when it wants to retrieve the error string), and the main program
also needs access to this table (when defining those strings). So the table
<span 
class="ec-lmtt-9x-x-102">strings</span> will be <span 
class="cmti-10">declared </span>in our module; and will be made available to the
main program through a <span 
class="cmss-10">table-prototype</span> in the module head, so that the
main program can use <span 
class="cmss-10">filling</span>s to populate this table. Thus we also add the
line
  <!--l. 707--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#8217;</span><span 
class="ec-lmtk-10x-x-92">table</span><span 
class="ec-lmtt-9x-x-102">&#8217;strings.</span>
</div>
<!--l. 710--><p class="noindent" >to the head. The lack of the square brackets after the tag indicates that this is a
<span 
class="cmss-10">prototype</span> and not a <span 
class="cmss-10">declaration</span>.
<!--l. 714--><p class="indent" >   The module body is enclosed between conditional <span 
class="cmss-10">pragmat</span>s to ensure that it is
executed only when the module is compiled. The module body must also contain a
<span 
class="cmss-10">root</span>. This root is executed before the main root, so it can perform all necessary
initializations. If no initializations are necessary, this root can consist of a sole
dummy action, written as <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;+.</span> In our case the initialization performed by the
<span 
class="ec-lmtt-9x-x-102">initialize</span> rule can be transferred here; with this move the main root simplifies
to
  <!--l. 721--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;input.</span>
</div>
<!--l. 724--><p class="noindent" >Without repeating the rules developed in
<a href="#x1-70001.4">Section 1.4</a>
and 
<a href="#x1-80001.5">Section 1.5</a>, the overall structure of the
body of our module will be similar to the one below.
  <!--l. 728--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;if=compile.</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;start</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;of</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;module</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;body</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#8217;</span><span 
class="ec-lmtk-10x-x-92">table</span><span 
class="ec-lmtt-9x-x-102">&#8217;strings[].</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;table</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;declaration</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#8217;</span><span 
class="ec-lmtk-10x-x-92">variable</span><span 
class="ec-lmtt-9x-x-102">&#8217;buff=/</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;/.</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;only</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;in</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;this</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;module</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#8217;</span><span 
class="ec-lmtk-10x-x-92">constant</span><span 
class="ec-lmtt-9x-x-102">&#8217;stop=-1.</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;only</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;in</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;this</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;module</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol+&#x003E;n:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;...</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;rule</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;body</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;digit+d&#x003E;:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;...</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;rule</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;body</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#8217;</span><span 
class="ec-lmtk-10x-x-92">exit</span><span 
class="ec-lmtt-9x-x-102">&#8217;error+&#x003E;er:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;...</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;rule</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;body</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;get</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;...</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;rule</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;body</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;get</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol.</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;initialization</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;endif=compile.$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;end</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;of</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;module</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;body</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>
</div>
<!--l. 742--><p class="noindent" >The rule <span 
class="ec-lmtt-9x-x-102">get next symbol</span>, the variable <span 
class="ec-lmtt-9x-x-102">buff</span> and the constant <span 
class="ec-lmtt-9x-x-102">stop</span> are declared in
the module body, and they are available only in this module. If the main program
wants to check whether the input is exhausted (as was done in
<a href="#x1-90001.6">Section 1.6</a>), a possible
solution is to add another <span 
class="cmss-10">rule</span>, without affixes, to the module head, and define it in
the body to return success when there are no more input characters, and failure
otherwise.
<!--l. 751--><p class="indent" >   To use items exported by a module, the main program should <span 
class="cmti-10">require </span>the module
using the &#8220;require&#8221; pragmat as follows:
  <!--l. 753--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;require="base".</span>
</div>
<!--l. 756--><p class="noindent" >This pragmat specifies the source file name (possibly with path information and
without extension) enclosed in quote marks, and not the module name. The main
program could use rules, variables, constants, tables, etc., exported by the module
exactly the same way as if they were declared there. Error strings can be added to
the <span 
class="ec-lmtt-9x-x-102">strings</span> table exported by our module using <span 
class="cmss-10">filling</span>s, which can spread across the
main program, such as
  <!--l. 763--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">table</span><span 
class="ec-lmtt-9x-x-102">&#8217;strings=("Right</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;parent</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;missing":no</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;paren).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">table</span><span 
class="ec-lmtt-9x-x-102">&#8217;strings=("Integer</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;missing":no</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;int,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"Extra</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;characters":no</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;end).</span>
</div>
<!--l. 770--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">1.8   </span> <a 
 id="x1-110001.8"></a>The anatomy of a rule</h4>
<!--l. 772--><p class="noindent" >Although the rule <span 
class="ec-lmtt-9x-x-102">put string</span> used in error messages is known to the compiler, it is
useful to see, as an additional example, how it looks when expressed in <span 
class="cmss-10">ALEPH</span>. We
first propose the preliminary version <span 
class="ec-lmtt-9x-x-102">put string 1</span>.
  <!--l. 775--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;1+""file+table[]+&#x003E;string-count:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;0-&#x003E;count,next1+file+table+string+count.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;next1+""out+tbl[]+&#x003E;str+&#x003E;cnt-symb:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;elem+tbl+str+cnt+symb,put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+out+symb,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;inc+cnt,next1+out+tbl+str+cnt;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+.</span>
</div>
<!--l. 784--><p class="noindent" >The double set of quote marks (<span 
class="ec-lmtt-9x-x-102">""</span>) indicates that the corresponding actual affix will
be a file. The square brackets indicate that the corresponding actual affix will be a
table. We see that the only thing <span 
class="ec-lmtt-9x-x-102">put string 1</span> does is to create an environment for
<span 
class="ec-lmtt-9x-x-102">next1</span> to run in. The right arrow in <span 
class="ec-lmtt-9x-x-102">0-&#x003E;count</span> indicates the assignment of the value on
the left to the variable on the right, one of the primitive actions in <span 
class="cmss-10">ALEPH</span>. <span 
class="ec-lmtt-9x-x-102">next1</span>
starts by calling <span 
class="ec-lmtt-9x-x-102">string elem</span>. This (standard) rule considers the string in <span 
class="ec-lmtt-9x-x-102">tbl</span>
designated by <span 
class="ec-lmtt-9x-x-102">str</span> and determines whether this string has a <span 
class="ec-lmtt-9x-x-102">cnt</span>-th symbol. If so, it
puts it in <span 
class="ec-lmtt-9x-x-102">symb</span>; if not, it fails. If the call fails, we know we reached the end of
the string and we are done. Otherwise the symbol is transferred to the file
indicated by <span 
class="ec-lmtt-9x-x-102">out</span>, the counter <span 
class="ec-lmtt-9x-x-102">cnt</span> is increased by <span 
class="ec-lmtt-9x-x-102">1</span> (through the external rule
<span 
class="ec-lmtt-9x-x-102">incr</span>) and <span 
class="ec-lmtt-9x-x-102">next1</span> is called again with the same affixes. Like at the first call
of <span 
class="ec-lmtt-9x-x-102">next1</span>, the value of <span 
class="ec-lmtt-9x-x-102">cnt</span> is the position in the string of the symbol to be
processed.
<!--l. 801--><p class="indent" >   The recursive call of <span 
class="ec-lmtt-9x-x-102">next1</span> is a case of trivial right-recursion; moreover all actual
affixes are the same as the formal affixes (which are left of the colon). In this case the
recursive call is equivalent to a straightforward jump: it does not even necessitate
parameter transfers. For this case there is a shorthand notation: a name of a rule
preceded by a colon denotes the re-execution of that rule with the affixes it had upon
its initial call (of course this is only allowed inside the same rule and only
if the recursion is trivial right-recursion). Now we can write a simplified
version
  <!--l. 810--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;2+""file+table[]+&#x003E;string-count:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;0-&#x003E;count,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;next2+file+table+string+count.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;next2+""out+tbl[]+&#x003E;str+&#x003E;cnt-symb:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;elem+tbl+str+cnt+symb,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+out+symb,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;incr+cnt,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;:next2;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+.</span>
</div>
<!--l. 819--><p class="noindent" >The gain is twofold. We no longer have to write that tail of affixes which only convey
the information &#8220;same as before&#8221;, and, more importantly, the rule <span 
class="ec-lmtt-9x-x-102">next2</span> is now
called only in one place (in <span 
class="ec-lmtt-9x-x-102">put string 2</span>). This means that we could as well
explicitly have written it there. We now replace the call of <span 
class="ec-lmtt-9x-x-102">next2</span> in <span 
class="ec-lmtt-9x-x-102">put</span>
<span 
class="ec-lmtt-9x-x-102">string 2</span> by the definition of <span 
class="ec-lmtt-9x-x-102">next2</span>: we parenthesize the rule, substitute
for each formal affix its corresponding actual affix and remove the formal
affixes:
  <!--l. 827--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string+""file+table[]+&#x003E;string-count:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;0-&#x003E;count,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(next-symb:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;elem+table+string+count+symb,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+file+symb,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;incr+count,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;:next;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+).</span>
</div>
<!--l. 835--><p class="noindent" >Note that this mechanism of replacing a call of a rule by its (slightly modified)
definition is not applied here for the first time. We have been using it tacitly from the
very first sample rule in 
<a href="#x1-50001.2">Section 1.2</a>. There the rule <span 
class="ec-lmtt-9x-x-102">expression</span> is a contraction
of
  <!--l. 840--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;expression1+res&#x003E;:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;term+res,expression</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tail</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;1+res.</span>
</div>
<!--l. 844--><p class="noindent" >and
  <!--l. 846--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;expression</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tail</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;1+&#x003E;res&#x003E;-r:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol+/+/,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expression1+r,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;add+res+r+res;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+.</span>
</div>
<!--l. 850--><p class="noindent" >which, according to the above recipe, would yield:
  <!--l. 852--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;expression</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;2+res&#x003E;:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;term+res,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(expression</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tail</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;2-r:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;symbol+/+/,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expression</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;2+r,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;add+res+r+res;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+).</span>
</div>
<!--l. 859--><p class="noindent" >In a sense this is a more appropriate form than the one given in 
<a href="#x1-50001.2">Section 1.2</a>: now the
affix <span 
class="ec-lmtt-9x-x-102">r</span> occurs where it belongs, that is, in the position of a local affix of the
parenthesized part only. To obtain the version in 
<a href="#x1-50001.2">Section 1.2</a>
exactly one must start from
  <!--l. 864--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;expression</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;3+res&#x003E;-r:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;term+res,expression</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tail</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;3+res+r.</span>
</div>
<!--l. 868--><p class="noindent" >and
  <!--l. 870--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;expression</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tail</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;3+&#x003E;res&#x003E;+r&#x003E;:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;is+symbol+/+/,expression</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;3+r,add+res+r+res;+.</span>
</div>
<!--l. 875--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">1.9   </span> <a 
 id="x1-120001.9"></a>Variable number of affixes</h4>
<!--l. 877--><p class="noindent" >An <span 
class="cmss-10">ALEPH </span>rule can be designated to handle an unspecified number of affixes. We
present a version of the rule <span 
class="ec-lmtt-9x-x-102">put string</span> which can send an unspecified number of
strings to an <span 
class="cmss-10">ALEPH </span>file. The new rule could be called as
  <!--l. 881--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;many</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;strings+file+table1+str1,</span>
  <br><span 
class="ec-lmtt-9x-x-102">put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;many</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;strings+file+table1+str1+table2+str2+table3+str3,</span>
</div>
<!--l. 885--><p class="noindent" >and so on, where <span 
class="ec-lmtt-9x-x-102">file</span> is an <span 
class="cmss-10">ALEPH </span>file, while (<span 
class="ec-lmtt-9x-x-102">table1</span>, <span 
class="ec-lmtt-9x-x-102">str1</span>), (<span 
class="ec-lmtt-9x-x-102">table2</span>, <span 
class="ec-lmtt-9x-x-102">str2</span>), etc.,
specify the strings to be printed. Our rule simply calls <span 
class="ec-lmtt-9x-x-102">put string</span> with the given
<span 
class="ec-lmtt-9x-x-102">file</span> and each string in the affixes in turn.
  <!--l. 890--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;many</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;strings+""file+@+table[]+&#x003E;string:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string+file+table+string,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(shift</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;affix</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;block+@,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;many</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;strings+file+@;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+).</span>
</div>
<!--l. 895--><p class="noindent" >The <span 
class="cmti-10">anchor </span><span 
class="ec-lmtt-9x-x-102">+@</span> in the rule head does not correspond to any actual affix, it only marks
the position from which affixes can repeat an unspecified number of times in a call to
the rule. Affixes following that anchor form the <span 
class="cmti-10">repeat affix block</span>. This block behaves
like a window which is aligned, in all the times, with one of the actual affix blocks in
the rule call. Formal affixes of the repeat block are matched against the actual
affixes appearing in that window. Operations on these formal affixes are
performed on the actual affixes seen in the window. As an example, the rule
call
  <!--l. 905--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string+file+table+string,</span>
</div>
<!--l. 908--><p class="noindent" >in the first line of the body of our rule sends that string to <span 
class="ec-lmtt-9x-x-102">file</span> whose specification
(table and pointer) is actually visible in this window.
<!--l. 913--><p class="indent" >   When the execution of our rule starts, the window is aligned with the first
variable block of affixes in the rule call. Thus the very first call to <span 
class="ec-lmtt-9x-x-102">put string</span> will
send the first string to <span 
class="ec-lmtt-9x-x-102">file</span>. The call to the built-in rule <span 
class="ec-lmtt-9x-x-102">shift affix block</span>, as
the name suggests, shifts the window to the right by one block, failing if
there are no more blocks. Affixes in the shifted out block are lost for this
rule as the window cannot be moved backward. If there is no next affix
block, then the dummy action <span 
class="ec-lmtt-9x-x-102">+</span> finishes our rule. Otherwise it calls itself
recursively with the same <span 
class="ec-lmtt-9x-x-102">file</span> and the anchor <span 
class="ec-lmtt-9x-x-102">+@</span> representing the current (in this
case the second, as the first block has already been shifted out) and the
still unvisited (if any) affix blocks. As in rule in the previous Section, this
trivial right recursion can be written equivalently as the jump <span 
class="ec-lmtt-9x-x-102">:put many</span>
<span 
class="ec-lmtt-9x-x-102">strings</span>.
<!--l. 927--><p class="indent" >   Using that an anchor, as the last actual affix, represents the current and all
subsequent univisited affix blocks, we could easily write a rule which sends an
unspecified number of strings to a particular <span 
class="cmss-10">ALEPH </span>file, say to <span 
class="ec-lmtt-9x-x-102">STDOUT</span>, as
follows.
  <!--l. 931--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;strings+@+table[]+&#x003E;string:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;many</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string+STDOUT+@.</span>
</div>
<!--l. 938--><p class="indent" >
   <h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-130002"></a>Syntactical description of Aleph</h3>
<!--l. 941--><p class="noindent" >The syntax of the <span 
class="cmss-10">ALEPH </span>language is given in the form of a context-free grammar.
This type of grammar follows the well-known scheme: a grammatical notion on the
left hand side of the syntax rule is defined by the alternatives on the right hand side.
Alternatives are separated by semicolons; successive notions in an alternative are
separated by commas. Each grammatical notion is written as one or more words
connected with dash characters. To make the grammar more succinct, enclosing one
or more notions in square brackets indicates that the group may or may not be
present, i.e., it is optional. Similarly, either a notion, or a group ot notions
enclosed in parentheses, can be followed by a star <span 
class="ec-lmtt-9x-x-102">*</span> or by a plus <span 
class="ec-lmtt-9x-x-102">+</span>. The star
indicates that the notion, or the group of notions, can be repeated zero or more
times; while the plus requires at least one, but otherwise arbitrary number
of instances. Thus both <span 
class="cmss-10">[notion</span><span 
class="ec-lmtt-9x-x-102">+</span><span 
class="cmss-10">]</span> and <span 
class="cmss-10">notion</span><span 
class="ec-lmtt-9x-x-102">*</span> require zero, one, two, etc.,
occurrences of <span 
class="cmss-10">notion</span>. To illustrate these conventions, the following part of
the <span 
class="cmss-10">ALEPH </span>grammar, which describes the global structure of an <span 
class="cmss-10">ALEPH</span>
<span 
class="cmti-10">unit</span>
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 958--><p class="indent" >      <span 
class="cmss-10">unit: information</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, root, information</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, end-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 959--><p class="indent" >      <span 
class="cmss-10">information: declaration; prototype; pragmat.</span></dd></dl>
<!--l. 961--><p class="noindent" >can be verbalized as follows:
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 964--><p class="noindent" ><span 
class="cmsl-10">A </span><span 
class="cmss-10">unit</span> <span 
class="cmsl-10">is a sequence of </span><span 
class="cmss-10">declaration</span><span 
class="cmsl-10">s, </span><span 
class="cmss-10">prototype</span><span 
class="cmsl-10">s and </span><span 
class="cmss-10">pragmat</span><span 
class="cmsl-10">s, ending with</span>
   <span 
class="cmsl-10">an </span><span 
class="cmss-10">end-symbol</span><span 
class="cmsl-10">, which contains exactly one </span><span 
class="cmss-10">root</span><span 
class="cmsl-10">, and only the </span><span 
class="cmss-10">root</span> <span 
class="cmsl-10">and the</span>
   <span 
class="cmsl-10">closing </span><span 
class="cmss-10">end-symbol</span> <span 
class="cmsl-10">are required.</span></li></ul>
<!--l. 973--><p class="indent" >   A syntactically correct <span 
class="cmss-10">ALEPH </span>unit is the character representation of a
sequence of terminal notions produced by this grammar; <span 
class="cmss-10">unit</span>s are composed
from one or more <span 
class="cmti-10">source files</span>. These terminal notions fall into the following
categories:
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 979--><p class="noindent" ><span 
class="cmti-10">symbols</span>, notions ending with <span 
class="cmss-10">-symbol</span>,
   </li>
   <li class="itemize">
   <!--l. 980--><p class="noindent" ><span 
class="cmti-10">tags </span>(identifiers), notions ending with <span 
class="cmss-10">-tag</span>, and
   </li>
   <li class="itemize">
   <!--l. 981--><p class="noindent" >character, integer, and string <span 
class="cmti-10">denotations</span>, ending with <span 
class="cmss-10">-denotation</span>.</li></ul>
<!--l. 984--><p class="noindent" >Representations of terminals and the description of formatting rules, including where can
comments be inserted and how the program text is composed from the source files,
are covered in 
<a href="#x1-740009">Chapter 9</a>.
<!--l. 988--><p class="indent" >   There are two kinds of <span 
class="cmss-10">ALEPH </span><span 
class="cmss-10">unit</span>s. A <span 
class="cmss-10">unit</span> is either a <span 
class="cmti-10">module </span>or it is a <span 
class="cmti-10">main</span>
<span 
class="cmti-10">program</span>; module units include library modules. The <span 
class="cmss-10">ALEPH </span>compiler <span 
class="cmti-10">compiles </span>a
single <span 
class="cmss-10">unit</span> and produces an intermediate <span 
class="cmtt-10">ALICE </span>code. Complete <span 
class="cmss-10">ALEPH</span>
programs are <span 
class="cmti-10">linked </span>from the <span 
class="cmtt-10">ALICE </span>codes of a main program and several
modules.
<!--l. 999--><p class="indent" >   Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1001--><p class="indent" >      <span 
class="cmss-10">unit: information</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, root, information</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, end-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1002--><p class="indent" >      <span 
class="cmss-10">information: declaration; prototype; pragmat.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1003--><p class="indent" >      <span 
class="cmss-10">root: root-symbol, actual-rule, point-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1004--><p class="indent" >      <span 
class="cmss-10">declaration: rule-declaration; data-declaration; external-declaration.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1005--><p class="indent" >      <span 
class="cmss-10">prototype: rule-prototye; data-prototype.</span></dd></dl>
<!--l. 1007--><p class="noindent" >This grammar says that a <span 
class="cmss-10">unit</span> must contain exactly one <span 
class="cmss-10">root</span>, and must end with an
<span 
class="cmss-10">end-symbol</span>. The order in which <span 
class="cmss-10">declaration</span>s, <span 
class="cmss-10">prototype</span>s and the <span 
class="cmss-10">root</span> appear is
immaterial. The position of <span 
class="cmss-10">pragmat</span>s, however, can be significant, see 
<a href="#x1-490006">Chapter 6</a>. Example
of a <span 
class="cmss-10">unit</span>:
  <!--l. 1012--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">charfile</span><span 
class="ec-lmtt-9x-x-102">&#8217;output=&#x003E;"result.txt".</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+output+/3/.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>
</div>
<!--l. 1017--><p class="noindent" >The first line is a <span 
class="cmss-10">data-declaration</span>, the second line is the <span 
class="cmss-10">root</span>, and the third line
contains the <span 
class="cmss-10">end-symbol</span>. For complete examples see 
<a href="#x1-7800010">Chapter 10</a>.
<!--l. 1022--><p class="indent" >   The <span 
class="cmss-10">unit</span> is a <span 
class="cmti-10">module </span>if it contains a <span 
class="ec-lmtt-9x-x-102">module=...</span> <span 
class="cmss-10">pragmat</span>; this pragmat defines both
the module name and its name-space. The <span 
class="cmss-10">unit</span> is a <span 
class="cmti-10">main program </span>if it contains no
such a pragmat; the above example is a main program.
<!--l. 1027--><p class="indent" >   A complete <span 
class="cmss-10">ALEPH </span>program is <span 
class="cmti-10">linked </span>from a main program and from zero
or more modules. Execution of the linked program starts with processing
all <span 
class="cmss-10">data-declaration</span>s in the main program and in the modules, in such an
order that no data item is used before its value has been established. If no
such an order exists the linker would have given an error message. After all
constants, variables, stacks, tables and files have thus been established, the
<span 
class="cmss-10">actual-rule</span>s in the <span 
class="cmss-10">root</span>s of the linked modules are executed (
<a href="#x1-170003.1.2">Section 3.1.2</a>) in some
undefined order, allowing the modules to perform some initialization. If
any module <span 
class="cmss-10">root</span> stops prematurely for whatever reason, the program run is
terminated. The order in which module roots are executed is undefined,
but can be synchronized using the Standard Library rule <span 
class="ec-lmtt-9x-x-102">wait&#x2423;for</span>, see
<a href="#x1-730008.5">Section 8.5</a>.
<!--l. 1040--><p class="indent" >   After all module roots finish with normal completion, the <span 
class="cmss-10">actual-rule</span> of the main
program is executed. If it reaches its normal completion, the program finishes
with a termination state of <span 
class="ec-lmtt-9x-x-102">0</span>. If program termination is due to calling the
Standard Library rule <span 
class="ec-lmtt-9x-x-102">exit</span>, then the termination state is specified by the
value of the affix to this rule. In other cases the termination state is not
defined.
<!--l. 1049--><p class="indent" >
   <h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-140003"></a>Program logic</h3>
<!--l. 1052--><p class="noindent" >Rule definitions and applications constitute the basic mechanism which determines
the logical flow in an <span 
class="cmss-10">ALEPH </span>program. This section describes <span 
class="cmss-10">ALEPH </span>primitives and
the way how these primitives can be combined to form an <span 
class="cmss-10">actual-rule</span>.
<!--l. 1057--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.1   </span> <a 
 id="x1-150003.1"></a>Rules</h4>
<!--l. 1059--><p class="noindent" >A <span 
class="cmss-10">rule-declaration</span> defines what is to be done when the rule is called, whereas applying
the rule in an <span 
class="cmss-10">affix-form</span> specifies that the rule is to be called. A rule, when called
and returns, will either succeed or fail; while there are rules which never
return.
<!--l. 1064--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.1.1   </span> <a 
 id="x1-160003.1.1"></a>Rule declaration</h5>
<!--l. 1066--><p class="noindent" >Each rule in a <span 
class="cmss-10">unit</span> must be defined either in a <span 
class="cmss-10">rule-declaration</span> or in a defining
<span 
class="cmss-10">rule-prototype</span>. Syntax:
<!--l. 1069--><p class="indent" >
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1070--><p class="indent" >      <span 
class="cmss-10">rule-declaration:</span>
   <!--l. 1072--><p class="indent" >      <span 
class="cmss-10">typer, rule-head, actual-rule, point-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1073--><p class="indent" >      <span 
class="cmss-10">typer:</span>
   <!--l. 1075--><p class="indent" >      <span 
class="cmss-10">action-symbol; function-symbol; predicate-symbol;</span>
   <!--l. 1077--><p class="indent" >      <span 
class="cmss-10">question-symbol; exit-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1078--><p class="indent" >      <span 
class="cmss-10">rule-head: rule-tag, formal-affix-sequence.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1079--><p class="indent" >      <span 
class="cmss-10">rule-prototype:</span>
   <!--l. 1081--><p class="indent" >      <span 
class="cmss-10">typer, rule-head, (comma-symbol, rule-head)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point-symbol.</span></dd></dl>
<!--l. 1083--><p class="noindent" >Example of a <span 
class="cmss-10">rule declaration</span>:
  <!--l. 1084--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string+""file+table[]+&#x003E;string-count:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;0-&#x003E;count,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(next-symb:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;elem+table+string+count+symb,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+file+symb,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;incr+count,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;:next;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+).</span>
</div>
<!--l. 1092--><p class="noindent" >Here the <span 
class="cmss-10">typer</span> is <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>, the <span 
class="cmss-10">rule-tag</span> is <span 
class="ec-lmtt-9x-x-102">put string</span>, the <span 
class="cmss-10">formal-affix-sequence</span> is
<span 
class="ec-lmtt-9x-x-102">+""file+table[]+&#x003E;string</span> and the <span 
class="cmss-10">actual-rule</span> is the rest, excluding the point but
including <span 
class="ec-lmtt-9x-x-102">-count:</span>. Example of a <span 
class="cmss-10">rule-prototype</span>:
  <!--l. 1097--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;square+&#x003E;x+xx&#x003E;,list</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;size+T[]+n&#x003E;.</span>
</div>
<!--l. 1101--><p class="indent" >   Both the <span 
class="cmss-10">rule-declaration</span> and the <span 
class="cmss-10">rule-prototype</span> define the <span 
class="cmss-10">rule-tag</span> to be a
rule of type designated by <span 
class="cmss-10">typer</span>, to be identified by the <span 
class="cmss-10">rule-tag</span>, and to
have the formal affixes given by its <span 
class="cmss-10">formal-affix-sequence</span>. A <span 
class="cmss-10">rule-declaration</span>,
in addition, specifies in the <span 
class="cmss-10">actual-rule</span> how to execute the rule when it is
called.
<!--l. 1107--><p class="indent" >   There are five rule types: <span 
class="cmti-10">predicate</span>, <span 
class="cmti-10">question</span>, <span 
class="cmti-10">action</span>, <span 
class="cmti-10">function</span>, and <span 
class="cmti-10">exit</span>, each
designated by the corresponding <span 
class="cmss-10">typer</span> symbol. These types arise from three criteria,
each expressing a fundamental property of the logical structure of the <span 
class="cmss-10">actual-rule</span>. A
rule
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 1112--><p class="noindent" >either always succeeds or is capable of failing;
   </li>
   <li class="itemize">
   <!--l. 1113--><p class="noindent" >when it succeeds, it may or may not have side effects;
   </li>
   <li class="itemize">
   <!--l. 1114--><p class="noindent" >can never return.</li></ul>
<!--l. 1116--><p class="noindent" >Accordingly, a rule is of type
   <dl class="list2"><dt class="list">
<span 
class="cmti-10">predicate</span>, </dt><dd 
class="list">
   <!--l. 1123--><p class="noindent" >when  it  can  fail  <span 
class="cmti-10">and  </span>has  side  effects  (restrictions  on  the  rule  structure
   typically prevent these side effects from becoming effective when the rule
   fails);
   </dd><dt class="list">
<span 
class="cmti-10">question</span>, </dt><dd 
class="list">
   <!--l. 1127--><p class="noindent" >when it can fail <span 
class="cmti-10">and </span>has no side effect;
   </dd><dt class="list">
<span 
class="cmti-10">action</span>, </dt><dd 
class="list">
   <!--l. 1129--><p class="noindent" >when it always succeeds <span 
class="cmti-10">and </span>has side effects;
   </dd><dt class="list">
<span 
class="cmti-10">function</span>, </dt><dd 
class="list">
   <!--l. 1131--><p class="noindent" >when it always succeeds <span 
class="cmti-10">and </span>has no side effects;
   </dd><dt class="list">
<span 
class="cmti-10">exit</span>, </dt><dd 
class="list">
   <!--l. 1133--><p class="noindent" >when it never returns, consequently has side effects.</dd></dl>
<!--l. 1136--><p class="noindent" >The rule type is checked against the logical construction of the <span 
class="cmss-10">actual-rule</span>. If an action or
function is found to be able to fail, an exit rule to be able to return, or a non-exit
rule not able to return, an error message is given. In other cases, if a discrepancy is
found, a warning is given.
<!--l. 1144--><p class="indent" >   With each of the following <span 
class="cmss-10">rule-prototype</span> examples a summary of what the rule
does is provided. From this explanation it should be clear why the rule was specified
with the given type.
<!--l. 1148--><p class="noindent" ><!--tex4ht:inline--><div class="tabular"> <table id="TBL-2" class="tabular" 
><colgroup id="TBL-2-1g"><col 
id="TBL-2-1"><col 
id="TBL-2-2"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;digit+d&#x003E;.</span>    </td><td  style="white-space:normal; text-align:left;" id="TBL-2-1-2"  
class="td11"><!--l. 1152--><p class="noindent" >if the next symbol in the input file is a digit,
its  value  is  delivered  in  <span 
class="ec-lmtt-9x-x-102">d</span>,  the  input  file  is
advanced by one symbol (side effect) and <span 
class="ec-lmtt-9x-x-102">digit</span>
succeeds; otherwise it fails.                         </td>
</tr><tr 
class="vspace" style="font-size:3.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">question</span><span 
class="ec-lmtt-9x-x-102">&#8217;is hexdigit+&#x003E;d.</span></td><td  style="white-space:normal; text-align:left;" id="TBL-2-2-2"  
class="td11"><!--l. 1158--><p class="noindent" >if <span 
class="ec-lmtt-9x-x-102">d</span> is a hexadecimal digit character, the rule
succeeds, otherwise it fails.                         </td>
</tr><tr 
class="vspace" style="font-size:3.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;skip up to point.</span></td><td  style="white-space:normal; text-align:left;" id="TBL-2-3-2"  
class="td11"><!--l. 1162--><p class="noindent" >the input file is advanced until the next symbol
is a point.                                               </td>
</tr><tr 
class="vspace" style="font-size:3.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;add+&#x003E;x+&#x003E;y+sum&#x003E;.</span></td><td  style="white-space:normal; text-align:left;" id="TBL-2-4-2"  
class="td11"><!--l. 1166--><p class="noindent" >the sum of <span 
class="ec-lmtt-9x-x-102">x</span> and <span 
class="ec-lmtt-9x-x-102">y</span> is delivered in <span 
class="ec-lmtt-9x-x-102">sum</span>.          </td>
</tr><tr 
class="vspace" style="font-size:3.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-5-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">exit</span><span 
class="ec-lmtt-9x-x-102">&#8217;error+&#x003E;n.</span>          </td><td  style="white-space:normal; text-align:left;" id="TBL-2-5-2"  
class="td11"><!--l. 1170--><p class="noindent" >give an error message and terminate.           </td></tr></table>
</div>
<!--l. 1174--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.1.2   </span> <a 
 id="x1-170003.1.2"></a>Actual rule</h5>
<!--l. 1176--><p class="noindent" >The <span 
class="cmss-10">actual-rule</span> defines the local variables used exclusively by the <span 
class="cmss-10">rule-body</span>, and
specifies one or more alternatives which determine the control flow in the rule.
Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1180--><p class="indent" >      <span 
class="cmss-10">actual-rule: local-affix-sequence, colon-symbol, rule-body.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1181--><p class="indent" >      <span 
class="cmss-10">rule-body: alternative, (semicolon-symbol, alternative)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">; classification.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1183--><p class="indent" >      <span 
class="cmss-10">alternative: (member, comma-symbol)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, last-member.</span></dd></dl>
<!--l. 1186--><p class="noindent" >Example of an <span 
class="cmss-10">actual rule</span>:
  <!--l. 1187--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;-d:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;digit+d,mult+res+10+res,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;add+res+d+res,integer1+res;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+.</span>
</div>
<!--l. 1192--><p class="noindent" >Here <span 
class="ec-lmtt-9x-x-102">-d</span> is a <span 
class="cmss-10">local-affix</span>, one <span 
class="cmss-10">alternative</span> is
  <!--l. 1194--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;digit+d,mult+res+10+res,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;add+res+d+res,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;integer1+res</span>
</div>
<!--l. 1197--><p class="noindent" >and <span 
class="ec-lmtt-9x-x-102">+</span> is another; <span 
class="ec-lmtt-9x-x-102">add+res+d+res</span> is a <span 
class="cmss-10">member</span>, and <span 
class="ec-lmtt-9x-x-102">+</span> is a <span 
class="cmss-10">last-member</span>.
<!--l. 1201--><p class="indent" >   When an <span 
class="cmss-10">actual-rule</span> is executed (through a call of the <span 
class="cmss-10">rule</span> of which it is the
<span 
class="cmss-10">actual-rule</span>, see
<a href="#x1-270003.4">Section 3.4</a>), the following takes place.
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 1205--><p class="noindent" >First, space is allocated for every local affix.
   </li>
   <li class="itemize">
   <!--l. 1206--><p class="noindent" >Second, the <span 
class="cmss-10">rule-body</span> is executed, which means executing its alternatives or
   its classification.
   </li>
   <li class="itemize">
   <!--l. 1208--><p class="noindent" >After the result of the <span 
class="cmss-10">actual-rule</span> thus has been assessed, the space reserved
   for the local affixes is returned.</li></ul>
<!--l. 1212--><p class="noindent" >Execution of <span 
class="cmss-10">alternative</span>s is discussed here, for that of <span 
class="cmss-10">classification</span>s see 
<a href="#x1-320003.7">Section 3.7</a>.
<!--l. 1215--><p class="indent" >   The execution of the <span 
class="cmss-10">alternative</span>s starts with a search to determine which of them
applies in the present case. The applicable <span 
class="cmss-10">alternative</span> is the (textually) first one
whose <span 
class="cmti-10">guard </span>succeeds. The guard of an <span 
class="cmss-10">alternative</span> is its first <span 
class="cmss-10">member</span>, or if it has no
<span 
class="cmss-10">member</span>, its <span 
class="cmss-10">terminator</span>. Thus the guard of the first <span 
class="cmss-10">alternative</span> is executed: if it
succeeds, the first <span 
class="cmss-10">alternative</span> applies. Otherwise the guard of the second <span 
class="cmss-10">alternative</span> is
executed: if it succeeds, the second <span 
class="cmss-10">alternative</span> applies, etc. If none of the guards
succeeds, the <span 
class="cmss-10">rule-body</span> fails.
<!--l. 1225--><p class="indent" >   The <span 
class="cmss-10">alternative</span> found applicable is then elaborated further. Its guard has already
been executed. Now the rest of its <span 
class="cmss-10">member</span>s and its <span 
class="cmss-10">last-member</span> are executed in
textual order until one of following two situations is reached:
   <dl class="list2"><dt class="list">
<span 
class="cmti-10">either</span> </dt><dd 
class="list">
   <!--l. 1235--><p class="noindent" >all  its  <span 
class="cmss-10">member</span>s  and  its  <span 
class="cmss-10">last-member</span>  have  succeeded,  in  which  case  the
   <span 
class="cmss-10">alternative</span> succeeds as well,
   </dd><dt class="list">
<span 
class="cmti-10">or</span> </dt><dd 
class="list">
   <!--l. 1237--><p class="noindent" >a  <span 
class="cmss-10">member</span>  or  <span 
class="cmss-10">last-member</span>  fails:  any  (textually)  following  <span 
class="cmss-10">member</span>s  or
   <span 
class="cmss-10">last-member</span> in this <span 
class="cmss-10">alternative</span> will not be executed and the <span 
class="cmss-10">alternative</span> fails.</dd></dl>
<!--l. 1242--><p class="noindent" >If the chosen <span 
class="cmss-10">alternative</span> succeeded, the <span 
class="cmss-10">actual-rule</span> succeeds; if it failed, the <span 
class="cmss-10">actual-rule</span>
fails. This completes the execution of the <span 
class="cmss-10">actual-rule</span>.
<!--l. 1248--><p class="indent" >   The sequence of <span 
class="cmss-10">alternative</span>s must satisfy the following restrictions.
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 1250--><p class="noindent" >If the guard of an <span 
class="cmss-10">alternative</span> cannot fail, the <span 
class="cmss-10">alternative</span> must be the last
   one.</li></ul>
<!--l. 1254--><p class="noindent" >This restriction ensures that all <span 
class="cmss-10">alternative</span>s can, in principle, be reached. Violating this
restriction causes an error message.
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 1257--><p class="noindent" >If an <span 
class="cmss-10">alternative</span> contains a <span 
class="cmss-10">member</span> that cannot return, then this <span 
class="cmss-10">member</span>
   must be the last one.</li></ul>
<!--l. 1261--><p class="noindent" >This restriction ensures that in an <span 
class="cmss-10">alternative</span> all <span 
class="cmss-10">member</span>s can, in principle, be reached.
Violating this restriction causes an error message.
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 1265--><p class="noindent" >If an <span 
class="cmss-10">alternative</span> contains a <span 
class="cmss-10">member</span> that has side-effects, then this <span 
class="cmss-10">member</span>
   may not, in the same <span 
class="cmss-10">alternative</span>, be followed by a <span 
class="cmss-10">member</span> that can fail.</li></ul>
<!--l. 1270--><p class="noindent" >The third restriction ensures that side-effects of a <span 
class="cmss-10">member</span> cannot materialize if
the <span 
class="cmss-10">member</span> fails; this in turn ensures that the tests necessary to determine
the applicable <span 
class="cmss-10">alternative</span> do not interfere with each other. Violating this
restriction causes a warning. The programmer is urged to either reconsider the
formulation of the problem, or make sure that the side effects will not have ill
consequences.
<!--l. 1277--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.1.3   </span> <a 
 id="x1-180003.1.3"></a>Member</h5>
<!--l. 1279--><p class="noindent" ><span 
class="cmss-10">Member</span>s are units of action. Such an action is either a primitive operation, a rule
call, or it is composed from other actions. Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1283--><p class="indent" >      <span 
class="cmss-10">member: affix-form; operation; compound-member.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1284--><p class="indent" >      <span 
class="cmss-10">last-member: member; terminator.</span></dd></dl>
<!--l. 1286--><p class="noindent" >Example of a <span 
class="cmss-10">member</span>:
  <!--l. 1287--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">(declaration</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;sequence</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;option-type-idf:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;declaration+type+idf,enter+type+idf,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;:declaration</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;sequence</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;option;+)</span>
</div>
<!--l. 1292--><p class="noindent" >This <span 
class="cmss-10">member</span> is a <span 
class="cmss-10">compound-member</span>, the part
  <!--l. 1294--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;declaration+type+idf</span>
</div>
<!--l. 1297--><p class="noindent" >is an <span 
class="cmss-10">affix-form</span>, <span 
class="ec-lmtt-9x-x-102">:declaration sequence option</span> is a <span 
class="cmss-10">last-member</span>, as is <span 
class="ec-lmtt-9x-x-102">+</span>.
<!--l. 1301--><p class="indent" >   The notion <span 
class="cmss-10">last-member</span> has been introduced into the syntax to ensure that a
<span 
class="cmss-10">terminator</span> (<a href="#x1-280003.5">Section 3.5</a>) will occur last in an <span 
class="cmss-10">alternative</span>.
<!--l. 1304--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.2   </span> <a 
 id="x1-190003.2"></a>Affixes</h4>
<!--l. 1306--><p class="noindent" >Formal and actual affixes constitute the communication between the caller of a rule
and the rule called. Local affixes are a means for creating variables that are local to a
given <span 
class="cmss-10">rule-body</span>.
<!--l. 1310--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.2.1   </span> <a 
 id="x1-200003.2.1"></a>Formal affix</h5>
<!--l. 1312--><p class="noindent" >Formal affixes define the number and the types of the affixes of a rule. Syntax:
<!--l. 1315--><p class="indent" >
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1316--><p class="indent" >      <span 
class="cmss-10">formal-affix-sequence: formal-affix</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, [anchor, formal-affix</span><span 
class="ec-lmtt-9x-x-102">+</span><span 
class="cmss-10">].</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1318--><p class="indent" >      <span 
class="cmss-10">formal-affix: plus-symbol, formal.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1319--><p class="indent" >      <span 
class="cmss-10">formal: formal-variable; formal-stack; formal-table; formal-file.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1321--><p class="indent" >      <span 
class="cmss-10">anchor: plus-symbol, anchor-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1324--><p class="indent" >      <span 
class="cmss-10">formal-variable: in-variable; out-variable; inout-variable.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1325--><p class="indent" >      <span 
class="cmss-10">in-variable: right-symbol, variable-tag.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1326--><p class="indent" >      <span 
class="cmss-10">out-variable: variable-tag, right-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1327--><p class="indent" >      <span 
class="cmss-10">inout-variable: right-symbol, variable-tag, right-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1328--><p class="indent" >      <span 
class="cmss-10">formal-table: [field-definition], table-tag, sub-bus.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1329--><p class="indent" >      <span 
class="cmss-10">formal-stack: sub-bus, [field-definition], stack-tag, sub-bus.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1330--><p class="indent" >      <span 
class="cmss-10">sub-bus: sub-symbol, bus-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1331--><p class="indent" >      <span 
class="cmss-10">formal-file: quote-image-symbol, file-tag.</span></dd></dl>
<!--l. 1333--><p class="noindent" >Example of a <span 
class="cmss-10">formal-affix</span> sequence:
  <!--l. 1334--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;+""file+table[]+&#x003E;string</span>
</div>
<!--l. 1337--><p class="noindent" >Here <span 
class="ec-lmtt-9x-x-102">file</span> is the tag of a <span 
class="cmss-10">formal-file</span>, <span 
class="ec-lmtt-9x-x-102">table</span> is the tag of a <span 
class="cmss-10">formal-table</span>, finally <span 
class="ec-lmtt-9x-x-102">string</span> is
the tag of an <span 
class="cmss-10">in-variable</span>.
<!--l. 1341--><p class="indent" >   A <span 
class="cmss-10">formal-variable</span> defines a <span 
class="cmti-10">variable</span>. An <span 
class="cmss-10">in-variable</span> or an <span 
class="cmss-10">inout-variable</span> obtains an
initial value from the calling rule; it is <span 
class="cmti-10">initialized</span>. An <span 
class="cmss-10">out-variable</span> has the attribute
<span 
class="cmti-10">uninitialized </span>at the beginning of each alternative in the <span 
class="cmss-10">actual-rule</span>. The value of
an <span 
class="cmss-10">out-variable</span> or an <span 
class="cmss-10">inout-variable</span> will be passed back to calling rule, so it
must have attribute <span 
class="cmti-10">initialized </span>attribute at the end of each <span 
class="cmss-10">alternative</span> of the
<span 
class="cmss-10">actual-rule</span> where the control can return, namely which does not end in a <span 
class="cmss-10">jump</span>, a
<span 
class="cmss-10">failure-symbol</span>, or an exit rule. Changes to an <span 
class="cmss-10">in-variable</span> do not materialize
outside the <span 
class="cmss-10">actual-rule</span>. An <span 
class="cmss-10">in-variable</span> behaves as if it were an initialized
<span 
class="cmss-10">local-variable</span>.
<!--l. 1353--><p class="indent" >   A <span 
class="cmss-10">formal-stack</span> or a <span 
class="cmss-10">formal-table</span> defines a stack or a table, respectively. If the
<span 
class="cmss-10">field-definition</span> (<a href="#x1-400004.2.2">Section 4.2.2</a>) is absent, the formal list is supposed to have one <span 
class="cmss-10">selector</span>: the tag
of this <span 
class="cmss-10">selector</span> is the same as the tag of the formal list itself. For example, <span 
class="ec-lmtt-9x-x-102">[]list[]</span>
has the same meaning as <span 
class="ec-lmtt-9x-x-102">[](list)list[]</span>.
<!--l. 1362--><p class="indent" >   A <span 
class="cmss-10">formal-file</span> defines a file, which can be both character and data file.
<!--l. 1365--><p class="indent" >   The <span 
class="cmss-10">anchor</span>, if present, marks the affix position from where the remaining affixes
form the <span 
class="cmti-10">repeat affix block</span>. The <span 
class="cmss-10">anchor</span> is not matched against any <span 
class="cmss-10">actual-affix</span>. In the
example
  <!--l. 1368--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;+""file+@+table[]+&#x003E;ptr</span>
</div>
<!--l. 1371--><p class="noindent" >the repeat affix block has length two and is formed by the affixes <span 
class="ec-lmtt-9x-x-102">table</span> and
<span 
class="ec-lmtt-9x-x-102">ptr</span>.
<!--l. 1375--><p class="indent" >   All affix tags in the <span 
class="cmss-10">formal-affix-sequence</span> must be different. The cannot have
qualifiers, and also must be different from the <span 
class="cmss-10">rule-tag</span> that precedes this
sequence.
<!--l. 1380--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.2.2   </span> <a 
 id="x1-210003.2.2"></a>Actual affix</h5>
<!--l. 1382--><p class="noindent" ><span 
class="cmss-10">Actual-affix</span>es occur in rule calls specified in <span 
class="cmss-10">affix-form</span>s, see 
<a href="#x1-270003.4">Section 3.4</a>. Each <span 
class="cmss-10">actual-affix</span>
corresponds to some <span 
class="cmss-10">formal-affix</span> of the called rule. Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1386--><p class="indent" >      <span 
class="cmss-10">actual-affix-sequence: actual-affix</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, [anchor].</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1387--><p class="indent" >      <span 
class="cmss-10">actual-affix: plus-symbol, actual.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1388--><p class="indent" >      <span 
class="cmss-10">actual: source; list-tag; file-tag; string-denotation.</span></dd></dl>
<!--l. 1390--><p class="noindent" >Example of an <span 
class="cmss-10">actual-affix-sequence</span>:
  <!--l. 1391--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">+-511+/?/+alpha+beta*gamma[p]+&#x003C;&#x003E;list+#</span>
</div>
<!--l. 1394--><p class="noindent" >In this example <span 
class="ec-lmtt-9x-x-102">-511</span> is an <span 
class="cmss-10">integral-denotation</span>, <span 
class="ec-lmtt-9x-x-102">/?/</span> is a <span 
class="cmss-10">character-denotation</span>, <span 
class="ec-lmtt-9x-x-102">alpha</span> may
be a <span 
class="cmss-10">file-tag</span>, <span 
class="ec-lmtt-9x-x-102">beta*gamma[p]</span> may be a <span 
class="cmss-10">stack-element</span>, <span 
class="ec-lmtt-9x-x-102">&#x003C;&#x003E;list</span> is a <span 
class="cmss-10">calibre</span>, and <span 
class="ec-lmtt-9x-x-102">#</span> is a
<span 
class="cmss-10">dummy-symbol</span>.
<!--l. 1400--><p class="indent" >   <span 
class="cmss-10">Actual-affix</span>es derive their exact meaning from the corresponding <span 
class="cmss-10">formal-affix</span>es.
The interrelation is discussed in 
<a href="#x1-270003.4">Section 3.4</a>. 
<!--l. 1403--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.2.3   </span> <a 
 id="x1-220003.2.3"></a>Local affix</h5>
<!--l. 1404--><p class="noindent" >Local affixes are variables local for the <span 
class="cmss-10">actual-rule</span> or the <span 
class="cmss-10">compound-member</span> in which
they are defined. Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1407--><p class="indent" >      <span 
class="cmss-10">local-affix-sequence: local-affix</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1408--><p class="indent" >      <span 
class="cmss-10">local-affix: minus-symbol, local-tag.</span></dd></dl>
<!--l. 1410--><p class="noindent" >Example of a <span 
class="cmss-10">local-affix-sequence</span>:
  <!--l. 1411--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;-count</span>
</div>
<!--l. 1414--><p class="noindent" >None of the tags in the <span 
class="cmss-10">local-affix-sequence</span> can have a qualifier, and all these tags
must be different. A <span 
class="cmss-10">local-tag</span> has the attribute <span 
class="cmti-10">uninitialized </span>at the beginning of each
<span 
class="cmss-10">alternative</span> of the <span 
class="cmss-10">actual-rule</span> or <span 
class="cmss-10">compound-member</span>. Its attribute must be <span 
class="cmti-10">initialized</span>
at the end of at least one <span 
class="cmss-10">alternative</span>, meaning that the variable has been
used.
<!--l. 1422--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.3   </span> <a 
 id="x1-230003.3"></a>Operations</h4>
<!--l. 1424--><p class="noindent" >Operations are the primitive actions in the <span 
class="cmss-10">ALEPH </span>language. They are the
assignments (<span 
class="cmss-10">transport</span>), comparing two integer values (<span 
class="cmss-10">comparison</span>), and adding new
elements to a stack (<span 
class="cmss-10">extension</span>). Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1428--><p class="indent" >      <span 
class="cmss-10">operation: transport; comparison; extension.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1431--><p class="indent" >      <span 
class="cmss-10">source: constant-source; destination.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1432--><p class="indent" >      <span 
class="cmss-10">constant-source: constant-value; table-element.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1433--><p class="indent" >      <span 
class="cmss-10">destination:</span>
   <!--l. 1435--><p class="indent" >      <span 
class="cmss-10">variable-tag; stack-element; dummy-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1436--><p class="indent" >      <span 
class="cmss-10">constant-value:</span>
   <!--l. 1438--><p class="indent" >      <span 
class="cmss-10">integral-denotation; character-denotation; constant-tag; limit.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1447--><p class="indent" >      <span 
class="cmss-10">table-element:</span>
   <!--l. 1449--><p class="indent" >      <span 
class="cmss-10">[selector, of-symbol], table-tag, [sub-symbol, source, bus-symbol].</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1450--><p class="indent" >      <span 
class="cmss-10">stack-element:</span>
   <!--l. 1452--><p class="indent" >      <span 
class="cmss-10">[selector, of-symbol], stack-tag, [sub-symbol, source, bus-symbol].</span></dd></dl>
<!--l. 1467--><p class="noindent" >Example of a <span 
class="cmss-10">transport</span> (assignment):
  <!--l. 1469--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">pnt-&#x003E;sel*list[q]-&#x003E;offset-&#x003E;ors*list[offset]-&#x003E;#</span>
</div>
<!--l. 1472--><p class="noindent" >Example of a <span 
class="cmss-10">comparison</span>:
  <!--l. 1474--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">ext*list[pnt]</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;!=</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;-0x3b7</span>
</div>
<!--l. 1477--><p class="noindent" >Example of an <span 
class="cmss-10">extension</span>:
  <!--l. 1479--><p class="noindent" ><div class="obeylines-v">
 <span 
class="ec-lmtt-9x-x-102">(*</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;pnt-&#x003E;sel,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;nil-&#x003E;ect-&#x003E;ors</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;*)list</span>
</div>
<!--l. 1483--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.3.1   </span> <a 
 id="x1-240003.3.1"></a>Transport</h5>
<!--l. 1484--><p class="noindent" >A <span 
class="cmss-10">transport</span> (assignment) is a <span 
class="cmss-10">function</span> since it has no (inherent) side effects and
always succeeds. Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1487--><p class="indent" >      <span 
class="cmss-10">transport: source, (arrow-symbol, destination)</span><span 
class="ec-lmtt-9x-x-102">+</span><span 
class="cmss-10">.</span></dd></dl>
<!--l. 1489--><p class="noindent" >The execution of a <span 
class="cmss-10">transport</span> starts with the evaluation of its <span 
class="cmss-10">source</span>. A <span 
class="cmss-10">source</span> is evaluated
as follows.
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 1492--><p class="noindent" >If the <span 
class="cmss-10">source</span> is an <span 
class="cmss-10">integral-denotation</span>, its value is the numerical value of <span 
class="cmss-10">digit</span>
   sequence considered as a number in decimal notation, negated if preceded by
   a <span 
class="cmss-10">minus-symbol</span>; or the hexadecimal value of the <span 
class="cmss-10">hex-digit</span> sequence following
   the  <span 
class="cmss-10">hex-symbol</span>,  also  negated  when  preceded  by  a  <span 
class="cmss-10">minus-symbol</span>;  or  the
   numerical value of the <span 
class="cmss-10">manifest-constant</span> as determined by the compiler.
   </li>
   <li class="itemize">
   <!--l. 1500--><p class="noindent" >If the <span 
class="cmss-10">source</span> is a <span 
class="cmss-10">character-denotation</span>, the value is the (numerical) code of
   the <span 
class="cmss-10">visible-character</span> between the <span 
class="cmss-10">absolute-symbols</span> <span 
class="ec-lmtt-9x-x-102">/</span>.
   </li>
   <li class="itemize">
   <!--l. 1505--><p class="noindent" >If the <span 
class="cmss-10">source</span> is a <span 
class="cmss-10">constant-tag</span> or a <span 
class="cmss-10">variable-tag</span>, its value is the value of the
   constant or variable identified. If a formal or local variable is identified, it
   must have the <span 
class="cmti-10">initialized </span>attribute.
   </li>
   <li class="itemize">
   <!--l. 1510--><p class="noindent" >If the <span 
class="cmss-10">source</span> is a <span 
class="cmss-10">table-element</span> or a <span 
class="cmss-10">stack-element</span>, its value is determined as
   follows (see also 
<a href="#x1-420004.2.4">Section 4.2.4</a>  
and 
<a href="#x1-430004.2.5">Section 4.2.5</a>). Let <span 
class="cmmi-10">T </span>be the <span 
class="cmss-10">table-tag</span> or <span 
class="cmss-10">stack-tag</span> in the
   <span 
class="cmss-10">source</span>, and denote by <span 
class="cmmi-10">L </span>the (global or formal) list identified by <span 
class="cmmi-10">T</span>. First, a
   selector <span 
class="cmmi-10">S </span>is determined. If the <span 
class="cmss-10">of-symbol</span> is present, <span 
class="cmmi-10">S </span>is the <span 
class="cmss-10">selector</span> in front
   of it. If it is absent, then <span 
class="cmmi-10">S </span>is the same as <span 
class="cmmi-10">T</span>, this is the <span 
class="cmti-10">standard selector </span>of
   the list. If <span 
class="cmmi-10">S </span>is not a selector of the list <span 
class="cmmi-10">L</span>, then it is an error.
   <!--l. 1520--><p class="noindent" >Next, an index <span 
class="cmmi-10">P </span>is determined. If the <span 
class="cmss-10">source</span> between the <span 
class="cmss-10">sub-symbol</span> and
   <span 
class="cmss-10">bus-symbol</span> is present, it is evaluated, and the value is <span 
class="cmmi-10">P</span>. Otherwise <span 
class="cmmi-10">P </span>is
   set to the actual upper bound of <span 
class="cmmi-10">L</span>. As an example, <span 
class="ec-lmtt-9x-x-102">list</span> is equivalent to
   <span 
class="ec-lmtt-9x-x-102">list*list[&#x003E;&#x003E;list]</span>.
   <!--l. 1525--><p class="noindent" >Now consider the block <span 
class="cmmi-10">B </span>in <span 
class="cmmi-10">L </span>that has an address equal to <span 
class="cmmi-10">P</span>. If no such
   a block exists, then it is an error. The value of the <span 
class="cmss-10">list-element</span> is the value
   identified by the selector <span 
class="cmmi-10">S </span>in the block <span 
class="cmmi-10">B</span>.
   </li>
   <li class="itemize">
   <!--l. 1529--><p class="noindent" >If the <span 
class="cmss-10">source</span> is a <span 
class="cmss-10">limit</span>, its value is described in 
<a href="#x1-410004.2.3">Section 4.2.3</a>.
   </li>
   <li class="itemize">
   <!--l. 1532--><p class="noindent" >If the <span 
class="cmss-10">source</span> is a <span 
class="cmss-10">dummy-symbol</span>, there is an error.</li></ul>
<!--l. 1537--><p class="indent" >   The value of the <span 
class="cmss-10">source</span> is called <span 
class="cmmi-10">V </span>. Now the assignments of the <span 
class="cmss-10">transport</span> are
executed in textual order. A single assignment is executed as follows.
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 1542--><p class="noindent" >If the <span 
class="cmss-10">destination</span> is a <span 
class="cmss-10">variable-tag</span>, the value <span 
class="cmmi-10">V </span>is put in the location identified
   by the variable. If the variable is formal or local, then it has the <span 
class="cmti-10">initialized</span>
   attribute in the rest of the <span 
class="cmss-10">alternative</span> in which this <span 
class="cmss-10">transport</span> appears.
   </li>
   <li class="itemize">
   <!--l. 1548--><p class="noindent" >If the <span 
class="cmss-10">destination</span> is a <span 
class="cmss-10">stack-element</span>, a selector <span 
class="cmmi-10">S </span>and a block <span 
class="cmmi-10">B </span>in the list <span 
class="cmmi-10">L</span>
   identified by the <span 
class="cmss-10">stack-tag</span> is determined as above. The value <span 
class="cmmi-10">V </span>is put into
   the location of the block <span 
class="cmmi-10">B </span>identified by the selector <span 
class="cmmi-10">S</span>.
   </li>
   <li class="itemize">
   <!--l. 1554--><p class="noindent" >If the <span 
class="cmss-10">destination</span> is a <span 
class="cmss-10">dummy-symbol</span>, the assignment is a dummy action.</li></ul>
<!--l. 1559--><p class="indent" >   Examples:
<!--l. 1561--><p class="noindent" ><!--tex4ht:inline--><div class="tabular"> <table id="TBL-3" class="tabular" 
 
><colgroup id="TBL-3-1g"><col 
id="TBL-3-1"><col 
id="TBL-3-2"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-3-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">0-&#x003E;cnt-&#x003E;res</span>       </td><td  style="white-space:normal; text-align:left;" id="TBL-3-1-2"  
class="td11"><!--l. 1564--><p class="noindent" >now <span 
class="ec-lmtt-9x-x-102">cnt</span> and <span 
class="ec-lmtt-9x-x-102">res</span> are both zero                         </td></tr><tr 
class="vspace" style="font-size:2.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-1"  
class="td11">
<span 
class="ec-lmtt-9x-x-102">list-&#x003E;list[q]-&#x003E;q</span>   </td><td  style="white-space:normal; text-align:left;" id="TBL-3-2-2"  
class="td11"><!--l. 1567--><p class="noindent" >the  value  at  <span 
class="ec-lmtt-9x-x-102">list*list[&#x003E;&#x003E;list]</span> is  put  in  the
location identified by <span 
class="ec-lmtt-9x-x-102">list*list[q]</span> (so <span 
class="ec-lmtt-9x-x-102">list</span> must
be a stack), and in (the location of) <span 
class="ec-lmtt-9x-x-102">q</span>           </td>
</tr><tr 
class="vspace" style="font-size:2.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">p-&#x003E;q-&#x003E;list[q]</span>      </td><td  style="white-space:normal; text-align:left;" id="TBL-3-3-2"  
class="td11"><!--l. 1571--><p class="noindent" >the value of <span 
class="ec-lmtt-9x-x-102">p</span> is put in (the location of) <span 
class="ec-lmtt-9x-x-102">q</span> and then
in the location identified by <span 
class="ec-lmtt-9x-x-102">list*list[q]</span> which is
now the same as <span 
class="ec-lmtt-9x-x-102">list*list[p]</span>                 </td>
</tr><tr 
class="vspace" style="font-size:2.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-4-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">list[p]-&#x003E;p-&#x003E;list[p]</span></td><td  style="white-space:normal; text-align:left;" id="TBL-3-4-2"  
class="td11"><!--l. 1575--><p class="noindent" >the value of <span 
class="ec-lmtt-9x-x-102">list*list[p]</span> is put in <span 
class="ec-lmtt-9x-x-102">p</span> and then put
in <span 
class="ec-lmtt-9x-x-102">list*list[p]</span> using the new value of <span 
class="ec-lmtt-9x-x-102">p</span>, with the
result that now <span 
class="ec-lmtt-9x-x-102">list*list[p]</span> contains a pointer to
itself                                                           </td>
   </tr></table></div>
<!--l. 1580--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.3.2   </span> <a 
 id="x1-250003.3.2"></a>Comparison</h5>
<!--l. 1582--><p class="noindent" >A <span 
class="cmss-10">comparison</span> is a question, i.e., it has no side effects and may either succeed or fail.
Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1585--><p class="indent" >      <span 
class="cmss-10">comparison: source, relation, source.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1586--><p class="indent" >      <span 
class="cmss-10">relation:</span>
   <!--l. 1588--><p class="indent" >      <span 
class="cmss-10">lt-symbol; le-symbol; eq-symbol; ne-symbol; ge-symbol; gt-symbol.</span></dd></dl>
<!--l. 1590--><p class="noindent" >Both <span 
class="cmss-10">source</span>s are evaluated as described above. The two resulting values are considered
to be signed integers and compared using the specified <span 
class="cmss-10">relation</span>:
   <div class="tabular"> <table id="TBL-4" class="tabular" 
 
><colgroup id="TBL-4-1g"><col 
id="TBL-4-1"><col 
id="TBL-4-2"><col 
id="TBL-4-3"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-4-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-1-1"  
class="td11">symbol  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-1-2"  
class="td11">example</td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-1-3"  
class="td11">succeeds if                          </td>
</tr><tr 
class="vspace" style="font-size:2.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-2-1"  
class="td11"><span 
class="cmss-10">lt-symbol</span> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-2-2"  
class="td11"><span 
class="ec-lmtt-9x-x-102">x &#x003C; y</span>  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-2-3"  
class="td11"><span 
class="ec-lmtt-9x-x-102">x</span> is less than <span 
class="ec-lmtt-9x-x-102">y</span>              </td>
</tr><tr 
class="vspace" style="font-size:2.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-3-1"  
class="td11"><span 
class="cmss-10">le-symbol</span> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-3-2"  
class="td11"><span 
class="ec-lmtt-9x-x-102">x &#x003C;= y</span> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-3-3"  
class="td11"><span 
class="ec-lmtt-9x-x-102">x</span> is less than or equal to <span 
class="ec-lmtt-9x-x-102">y</span>   </td>
</tr><tr 
class="vspace" style="font-size:2.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-4-1"  
class="td11"><span 
class="cmss-10">eq-symbol</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-4-2"  
class="td11"><span 
class="ec-lmtt-9x-x-102">x = y</span>  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-4-3"  
class="td11"><span 
class="ec-lmtt-9x-x-102">x</span> is equal to <span 
class="ec-lmtt-9x-x-102">y</span>              </td>
</tr><tr 
class="vspace" style="font-size:2.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-5-1"  
class="td11"><span 
class="cmss-10">ne-symbol</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-5-2"  
class="td11"><span 
class="ec-lmtt-9x-x-102">x != y</span> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-5-3"  
class="td11"><span 
class="ec-lmtt-9x-x-102">x</span> and <span 
class="ec-lmtt-9x-x-102">y</span> differ                      </td>
</tr><tr 
class="vspace" style="font-size:2.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-6-1"  
class="td11"><span 
class="cmss-10">ge-symbol</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-6-2"  
class="td11"><span 
class="ec-lmtt-9x-x-102">x &#x003E;= y</span> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-6-3"  
class="td11"><span 
class="ec-lmtt-9x-x-102">x</span> is greater than or equal to <span 
class="ec-lmtt-9x-x-102">y</span></td>
</tr><tr 
class="vspace" style="font-size:2.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-7-1"  
class="td11"><span 
class="cmss-10">gt-symbol</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-7-2"  
class="td11"><span 
class="ec-lmtt-9x-x-102">x &#x003E; y</span>  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-7-3"  
class="td11"><span 
class="ec-lmtt-9x-x-102">x</span> is greater than <span 
class="ec-lmtt-9x-x-102">y</span>           </td> </tr></table>
</div>
<!--l. 1610--><p class="noindent" >The return value of a <span 
class="cmss-10">comparison</span> is &#8220;success&#8221; if the relation holds between the two
values, and &#8220;fail&#8221; otherwise. Note that even if both <span 
class="cmss-10">source</span> values represent pointers
to lists, the numerical values of these pointers are compared, and not the values they
point to.
<!--l. 1616--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.3.3   </span> <a 
 id="x1-260003.3.3"></a>Extension</h5>
<!--l. 1618--><p class="noindent" >An <span 
class="cmss-10">extension</span> is an action, i.e., it has side effects and always succeeds. Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1621--><p class="indent" >      <span 
class="cmss-10">extension: left-of-symbol, field-transport-list, right-of-symbol, stack-tag.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1623--><p class="indent" >      <span 
class="cmss-10">field-transport-list: field-transport, (comma-symbol, field-transport)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1625--><p class="indent" >      <span 
class="cmss-10">field-transport: source, (arrow-symbol, selector-tag)</span><span 
class="ec-lmtt-9x-x-102">+</span><span 
class="cmss-10">.</span></dd></dl>
<!--l. 1627--><p class="noindent" >Call the stack indicated by the <span 
class="cmss-10">stack-tag</span> <span 
class="cmmi-10">S</span>. All <span 
class="cmss-10">selector-tag</span>s appearing in the
<span 
class="cmss-10">field-transport-list</span> must be selectors of <span 
class="cmmi-10">S</span>.
<!--l. 1630--><p class="indent" >   First, the <span 
class="cmss-10">source</span>s in the <span 
class="cmss-10">field transport</span>s are evaluated as described in 
<a href="#x1-240003.3.1">Section 3.3.1</a>  
and
their values are remembered. Subsequently a block <span 
class="cmmi-10">B </span>is created with as many empty
locations as the calibre of <span 
class="cmmi-10">S</span>. Next, all <span 
class="cmss-10">field transport</span>s are executed; a <span 
class="cmss-10">field-transport</span> is
executed by putting the value remembered for its <span 
class="cmss-10">source</span> in the location(s) in <span 
class="cmmi-10">B</span>
identified by the <span 
class="cmss-10">selector-tag</span>s.
<!--l. 1637--><p class="indent" >   No more than one value may be put in a given location in <span 
class="cmmi-10">B</span>, and at the end of
the <span 
class="cmss-10">extension</span> locations filled in <span 
class="cmmi-10">B </span>must form an end-section of <span 
class="cmmi-10">B </span>without holes.
Violating this condition results in an error message. Finally, the stack <span 
class="cmmi-10">S </span>is extended
by a (possibly incomplete) block containing the filled locations. In the case when the
block is incomplete, a warning is issued.
<!--l. 1646--><p class="indent" >   Example: given a stack <span 
class="ec-lmtt-9x-x-102">st</span> declared as <span 
class="ec-lmtt-9x-x-102">[](sel,ect,or)st[]</span>, the first of the three
<span 
class="cmss-10">extension</span>s
  <!--l. 1648--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(*</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;3-&#x003E;ect,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;5-&#x003E;sel-&#x003E;or</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;*)st,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(*</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;0-&#x003E;or</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;*)st,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(*</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;5-&#x003E;sel-&#x003E;ect</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;*)st</span>
</div>
<!--l. 1653--><p class="noindent" >adds the block <span 
class="ec-lmtt-9x-x-102">(5,3,5)</span> to <span 
class="ec-lmtt-9x-x-102">st</span> and increases the actual upper bound <span 
class="ec-lmtt-9x-x-102">&#x003E;&#x003E;st</span> by 3. The
second <span 
class="cmss-10">extension</span> adds a single zero element to the top of <span 
class="ec-lmtt-9x-x-102">st</span> and increases <span 
class="ec-lmtt-9x-x-102">&#x003E;&#x003E;st</span> by 1.
The last <span 
class="cmss-10">extension</span> is incorrect as the mentioned <span 
class="cmss-10">selector</span>s do not form an end-segment
of the block.
<!--l. 1660--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.4   </span> <a 
 id="x1-270003.4"></a>Affix form</h4>
<!--l. 1661--><p class="noindent" >Calling (executing) a rule is done through an <span 
class="cmss-10">affix-form</span>. It specifies both the
rule to be called and the actual affixes (parameters) the rule is called with.
Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1665--><p class="indent" >      <span 
class="cmss-10">affix-form: rule-tag, [actual-affix-sequence].</span></dd></dl>
<!--l. 1667--><p class="noindent" >Example:
  <!--l. 1668--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">string</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;elem+tbl+str+cnt+symb</span>
</div>
<!--l. 1672--><p class="indent" >   Let <span 
class="cmmi-10">R </span>be the rule identified by the <span 
class="cmss-10">rule-tag</span> in the <span 
class="cmss-10">affix-form</span>. Executing the
<span 
class="cmss-10">affix-form</span> means calling <span 
class="cmmi-10">R </span>so that its <span 
class="cmss-10">formal-affix</span>es are specified by the <span 
class="cmss-10">actual-affix</span>es
of the <span 
class="cmss-10">affix-form</span>. To establish the correspondence between the formal and actual
affixes the <span 
class="cmss-10">actual-affix-sequence</span> is modified as follows. Each <span 
class="cmss-10">string-denotation</span> in the
<span 
class="cmss-10">actual-affix-sequence</span> is replaced by two affixes: a <span 
class="cmss-10">table-tag</span> identifying an internal
table, and a <span 
class="cmss-10">constant-tag</span> pointing to an instance of the specified string in that table.
Furthermore the trailing <span 
class="cmss-10">anchor</span> in the <span 
class="cmss-10">actual-affix-sequence</span>, if present, is
deleted.
<!--l. 1683--><p class="indent" >   After this preparation the correspondence between actual and formal affixes is
established in their textual order: the first actual corresponds to the first formal, the
second actual to the second formal, and so on. In this process the formal <span 
class="cmss-10">anchor</span>
affix, if present, is skipped, and not matched against any actual affix. If the
formal affixes are exhausted while the actual affixes are not, the formal affixes
are reset to the affix immediately following the formal <span 
class="cmss-10">anchor</span>. If there is
no formal <span 
class="cmss-10">anchor</span>, then this is an error. The matching process ends when
there are no more actual affixes in the prepared list. At this point <span 
class="cmti-10">either</span>
the formal affixes must be exhausted as well, <span 
class="cmti-10">or </span>both the last affix in the
<span 
class="cmss-10">actual-affix-sequence</span>, and the next unprocessed <span 
class="cmss-10">formal-affix</span> of the called rule must be
an <span 
class="cmss-10">anchor</span>.
<!--l. 1695--><p class="indent" >   For an illustration of the process, assume that the <span 
class="cmss-10">formal-affix-sequence</span> of the
called rule is
  <!--l. 1697--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+A[]+&#x003E;B&#x003E;+@+""C+D&#x003E;+[]E[]</span>
</div>
<!--l. 1700--><p class="noindent" >which has a <span 
class="cmti-10">repeat affix block </span>of length 3, see 
<a href="#x1-200003.2.1">Section 3.2.1</a>. The affixes in the following
<span 
class="cmss-10">actual-affix-sequence</span>s are correctly matched up with the formal affixes labelled by the
corresponding upper case letters:
  <!--l. 1704--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+a+b+@,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+a+b+c+d+e,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+a+b+c1+d1+e1+c2+d2+e2+c3+d3+e3+@.</span>
</div>
<!--l. 1709--><p class="noindent" >In the first case the matching parts of both the <span 
class="cmss-10">actual-affix-sequence</span> and the
<span 
class="cmss-10">formal-affix-sequence</span> end with an <span 
class="cmss-10">anchor</span>; in the other two cases both sequences are
exhausted simultaneously. In the last case the <span 
class="cmss-10">formal-affix-sequence</span> is reset
twice. The following affix sequences do not match correctly with the above
<span 
class="cmss-10">formal-affix-sequence</span>
  <!--l. 1715--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+a+b,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+a+b+c+d,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+a+b+c+d+@,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+a+b+c1+d1+e1+c2.</span>
</div>
<!--l. 1719--><p class="indent" >   If the <span 
class="cmss-10">actual-affix-sequence</span> ends with an <span 
class="cmss-10">anchor</span>, then the <span 
class="cmss-10">actual-rule</span>, of which this
<span 
class="cmss-10">affix-form</span> is a member, must also have an <span 
class="cmss-10">anchor</span> in its <span 
class="cmss-10">formal-affix-sequence</span> 
(<a href="#x1-200003.2.1">Section 3.2.1</a>),
and also there must be an <span 
class="cmss-10">anchor</span> in the <span 
class="cmss-10">formal-affix-sequence</span> of the rule <span 
class="cmmi-10">R</span>. These two
<span 
class="cmti-10">repeat affix blocks </span>must have the same number of elements, and are also matched
against each other in their textual order.
<!--l. 1729--><p class="indent" >   The matched actual and formal affixes must satisfy the following conditions.
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 1731--><p class="noindent" >The actual corresponding to a <span 
class="cmss-10">formal-table</span> must be a <span 
class="cmss-10">list-tag</span> identifying a
   (global or formal) stack or a (global or formal) table. All actions performed
   on the formal during the execution of the rule <span 
class="cmmi-10">R </span>are executed directly on
   the actual. If the formal has <span 
class="cmss-10">field-definition</span>, then the block size (calibre)
   and the standard selector of the formal and that of the actual must be
   equal, while the selectors other than the standard selector, may differ. If the
   formal has no <span 
class="cmss-10">field-definition</span>, then no calibre match is required. Regardless
   of mismatches, the value delivered by the <span 
class="cmss-10">calibre</span> (<span 
class="ec-lmtt-9x-x-102">&#x003C;&#x003E;list</span>) is the calibre of
   the global list to which the <span 
class="cmss-10">formal table</span> corresponds, directly or indirectly.
   </li>
   <li class="itemize">
   <!--l. 1743--><p class="noindent" >The actual corresponding to a <span 
class="cmss-10">formal-stack</span> must be a <span 
class="cmss-10">stack-tag</span> identifying
   a (global or formal) stack. All actions performed on the formal during the
   execution of <span 
class="cmmi-10">R </span>are executed directly on the actual. Restriction on calibre
   and selectors is the same as for <span 
class="cmss-10">formal-table</span>s.
   </li>
   <li class="itemize">
   <!--l. 1749--><p class="noindent" >The actual corresponding to a <span 
class="cmss-10">formal-file</span> must be a <span 
class="cmss-10">file-tag</span> identifying a
   (global or formal) file. All actions performed on the formal are executed
   directly on the actual.
   </li>
   <li class="itemize">
   <!--l. 1754--><p class="noindent" >The  actual  corresponding  to  a  formal  <span 
class="cmss-10">in-variable</span>  must  be  a  <span 
class="cmss-10">source</span>;  the
   actual corresponding to a formal <span 
class="cmss-10">inout-variable</span> or a formal <span 
class="cmss-10">out-variable</span> must
   be a <span 
class="cmss-10">destination</span>. The <span 
class="cmss-10">dummy-symbol</span>, however, is not allowed for formal
   <span 
class="cmss-10">inout-variable</span>s. The <span 
class="cmss-10">destination</span> for an <span 
class="cmss-10">inout-variable</span> must have the <span 
class="cmti-10">initialized</span>
   attribute.
   </li>
   <li class="itemize">
   <!--l. 1762--><p class="noindent" >If the matching actual and formal affixes are both from the corresponding
   <span 
class="cmti-10">repeat affix blocks</span>, then the actual corresponding to a formal <span 
class="cmss-10">inout-variable</span>
   must also be a (formal) <span 
class="cmss-10">inout-variable</span>, and the actual corresponding to an
   <span 
class="cmss-10">out-variable</span> must be either an <span 
class="cmss-10">out-variable</span> or an <span 
class="cmss-10">inout-variable</span>.</li></ul>
<!--l. 1771--><p class="indent" >   After establishing the correspondence between the actual and formal affixes, the
following steps are executed.
<!--l. 1775--><p class="noindent" >Step 1.
  Prepare the list of affixes to be passed to the called rule as follows.
    <ul class="itemize0">
    <li class="itemize">
    <!--l. 1778--><p class="noindent" >If the last affix in the <span 
class="cmss-10">actual-affix-sequence</span> is not an <span 
class="cmss-10">anchor</span>, then this list
    consists of the (actual) affixes in their original order as prepared above.
    </li>
    <li class="itemize">
    <!--l. 1782--><p class="noindent" >If the <span 
class="cmss-10">actual-affix-sequence</span> ends with an <span 
class="cmss-10">anchor</span>, then first take all affixes as
    prepared above. By the conditions the <span 
class="cmss-10">actual-rule</span> of which this <span 
class="cmss-10">affix-form</span>
    is a member, has a <span 
class="cmti-10">repeat affix block</span>. The actual (visible) affixes in that
    block, plus all affixes in subsequent (pending) blocks are copied to the end
    of the list.</li></ul>
<!--l. 1792--><p class="noindent" >Step 2.
  <!--l. 1794--><p class="noindent" >The  copying  part  of  the  affix  mechanism  is  put  into  operation.  For  each
  <span 
class="cmss-10">actual-affix</span> in the list prepared in Step 1, if the corresponding <span 
class="cmss-10">formal-affix</span> is
  either an <span 
class="cmss-10">in-variable</span>, or an <span 
class="cmss-10">inout-variable</span>, a <span 
class="cmss-10">transport</span> (see 
<a href="#x1-240003.3.1">Section 3.3.1</a>) is executed with the actual as the <span 
class="cmss-10">source</span>, and the formal as its only <span 
class="cmss-10">destination</span>.
<!--l. 1802--><p class="noindent" >Step 3.
   Prepare repeat affix blocks. If the <span 
class="cmss-10">actual-rule</span> rule <span 
class="cmmi-10">R </span>(as identified by the
  <span 
class="cmss-10">rule-tag</span> in the <span 
class="cmss-10">affix-form</span>) has a <span 
class="cmti-10">repeat affix block </span>of length <span 
class="cmmi-10">S</span>, then <span 
class="cmss-10">actual-affix</span>es
  corresponding to the formal affixes in that affix block are grouped into blocks
  of length <span 
class="cmmi-10">S </span>starting from the leftmost <span 
class="cmss-10">actual-affix</span>. Elements of the first block
  are matched against the formals in the formal <span 
class="cmti-10">repeat affix block</span>, while the
  remaining blocks, if any, are the &#8220;pending&#8221; or &#8220;unseen&#8221; blocks. If <span 
class="cmmi-10">R </span>has no
  repeat affix block, this step is skipped.
<!--l. 1815--><p class="noindent" >Step 4.
   Subsequently  the  rule  <span 
class="cmmi-10">R </span>is  executed.  If  the  <span 
class="cmss-10">actual-rule</span>  <span 
class="cmmi-10">R </span>succeeds,  the
  <span 
class="cmss-10">affix-form</span> succeeds, if it fails, the <span 
class="cmss-10">affix-form</span> fails.
  <!--l. 1820--><p class="noindent" >If the <span 
class="cmss-10">affix-form</span> succeeds, the restoring part of the affix mechanism is executed:
  for each <span 
class="cmss-10">formal-affix</span> that is either <span 
class="cmss-10">out-variable</span> or <span 
class="cmss-10">inout-variable</span> a <span 
class="cmss-10">transport</span> is
  executed with the formal as its <span 
class="cmss-10">source</span> and the actual as its <span 
class="cmss-10">destination</span>, in the
  order in which these affixes appear. This copying is also executed for affixes
  in the repeat affix block.
<!--l. 1828--><p class="noindent" >Example 1: Suppose the following rule and variable declarations:
  <!--l. 1830--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;sq+&#x003E;a+&#x003E;b&#x003E;+c&#x003E;:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;b-&#x003E;c,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;a-&#x003E;b.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">variable</span><span 
class="ec-lmtt-9x-x-102">&#8217;x=0,y=1.</span>
</div>
<!--l. 1834--><p class="noindent" >The <span 
class="cmss-10">actual-rule</span> <span 
class="ec-lmtt-9x-x-102">sq+x+y+x</span> swaps the values of <span 
class="ec-lmtt-9x-x-102">x</span> and <span 
class="ec-lmtt-9x-x-102">y</span>. Indeed, the copying part
described in Step 2 executes the <span 
class="cmss-10">transport</span>s <span 
class="ec-lmtt-9x-x-102">x-&#x003E;a</span>, <span 
class="ec-lmtt-9x-x-102">y-&#x003E;b</span> <span 
class="cmti-10">before </span>calling <span 
class="ec-lmtt-9x-x-102">sq</span>, and the
<span 
class="cmss-10">transport</span>s <span 
class="ec-lmtt-9x-x-102">b-&#x003E;y</span>, <span 
class="ec-lmtt-9x-x-102">c-&#x003E;x</span> <span 
class="cmti-10">after </span><span 
class="ec-lmtt-9x-x-102">sq</span> successfully returns.
<!--l. 1840--><p class="noindent" >Example 2: With the following declarations:
  <!--l. 1842--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;P+""file+@+T[]+&#x003E;ptr:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;do</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;something</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;...$.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;PP+@+T[]+&#x003E;ptr:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;P+STDOUT+"first"+@.</span>
  <br>
</div>
<!--l. 1847--><p class="noindent" >the <span 
class="cmss-10">actual-rule</span> <span 
class="ec-lmtt-9x-x-102">PP+"str1"+"str2"</span> will call <span 
class="ec-lmtt-9x-x-102">PP</span> with four affixes; the first and the third
are the internal table containing inline strings, the second and fourth affixes are
pointers pointing to the (packed forms) of the strings <span 
class="ec-lmtt-9x-x-102">"str1"</span> and <span 
class="ec-lmtt-9x-x-102">"str2"</span>. The rule <span 
class="ec-lmtt-9x-x-102">PP</span>,
in turn, calls <span 
class="ec-lmtt-9x-x-102">P</span> with a total of seven affixes of which the last four comes from the
repeat affix blocks of <span 
class="ec-lmtt-9x-x-102">PP</span> (two in the visible block and two pending). The overall effect
is the same as that of the <span 
class="cmss-10">actual-rule</span>
  <!--l. 1856--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;P+STDOUT+"first"+"str1"+"str2".</span>
</div>
<!--l. 1862--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.5   </span> <a 
 id="x1-280003.5"></a>Terminators</h4>
<!--l. 1863--><p class="noindent" >Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1865--><p class="indent" >      <span 
class="cmss-10">terminator: jump; success-symbol; failure-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1866--><p class="indent" >      <span 
class="cmss-10">jump: repeat-symbol, rule-tag.</span></dd></dl>
<!--l. 1875--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.5.1   </span> <a 
 id="x1-290003.5.1"></a>Jumps</h5>
<!--l. 1876--><p class="noindent" >The <span 
class="cmss-10">rule-tag</span> after the <span 
class="cmss-10">repeat-symbol</span> may be the <span 
class="cmss-10">rule-tag</span> of the rule in which the <span 
class="cmss-10">jump</span>
occurs or the <span 
class="cmss-10">rule-tag</span> of (one of) the <span 
class="cmss-10">compound member</span>(s) in which the <span 
class="cmss-10">jump</span>
occurs.
<!--l. 1880--><p class="indent" >   A <span 
class="cmss-10">jump</span> to the <span 
class="cmss-10">rule-tag</span> of a rule is an abbreviated notation of a call to that rule,
with actual affixes that correspond to the original actual affixes. The abbreviation is
only allowed if, after the execution of the call, no more members in the rule can be
executed. This condition ensures that there will be no need for the recursive call
mechanism to be invoked.
<!--l. 1887--><p class="noindent" >Example: the rule
  <!--l. 1889--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;bad1:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;a,(b;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;:bad1),</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;c;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+.</span>
</div>
<!--l. 1892--><p class="noindent" >is incorrect. After returning from <span 
class="ec-lmtt-9x-x-102">:bad1</span>, the <span 
class="cmss-10">affix-form</span> <span 
class="ec-lmtt-9x-x-102">c</span> should be executed. If <span 
class="ec-lmtt-9x-x-102">,c</span> is
removed, the rule becomes correct. Likewise, the rule
  <!--l. 1896--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">question</span><span 
class="ec-lmtt-9x-x-102">&#8217;bad2:(a,b,:bad2);</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;c.</span>
</div>
<!--l. 1899--><p class="noindent" >is incorrect: after an unsuccessful return from <span 
class="ec-lmtt-9x-x-102">:bad2</span>, the <span 
class="cmss-10">affix-form</span> <span 
class="ec-lmtt-9x-x-102">c</span> should be
executed. If the parentheses are removed, the rule becomes correct.
<!--l. 1904--><p class="indent" >   A <span 
class="cmss-10">jump</span> to the <span 
class="cmss-10">rule-tag</span> of a <span 
class="cmss-10">compound-member</span> <span 
class="cmmi-10">C </span>causes this <span 
class="cmss-10">compound-member</span> to
be re-executed. The precise meaning can be assessed by decomposing (see 
<a href="#x1-310003.6">Section 3.6</a>) the
actual rule until <span 
class="cmmi-10">C </span>turns into a rule. Then the above applies.
<!--l. 1909--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">3.5.2   </span> <a 
 id="x1-300003.5.2"></a>Success and failure symbols</h5>
<!--l. 1911--><p class="noindent" >The execution of the <span 
class="cmss-10">success-symbol</span> <span 
class="ec-lmtt-9x-x-102">+</span> always succeeds, the execution of the
<span 
class="cmss-10">failure-symbol</span> <span 
class="ec-lmtt-9x-x-102">-</span> always fails. Neither has side-effects.
<!--l. 1915--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.6   </span> <a 
 id="x1-310003.6"></a>Compound members</h4>
<!--l. 1916--><p class="noindent" ><span 
class="cmss-10">Compound-member</span>s serve to turn a composite <span 
class="cmss-10">rule-body</span> into a single <span 
class="cmss-10">member</span>.
Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1919--><p class="indent" >      <span 
class="cmss-10">compound-member: open-symbol, [local-part, colon-symbol],</span>
   <!--l. 1921--><p class="indent" >      <span 
class="cmss-10">rule-body, close-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1922--><p class="indent" >      <span 
class="cmss-10">local-part: rule-tag, local-affix</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">; local-affix</span><span 
class="ec-lmtt-9x-x-102">+</span><span 
class="cmss-10">.</span></dd></dl>
<!--l. 1924--><p class="noindent" >Example:
  <!--l. 1925--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">(order-n:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;y&#x003C;x,x-&#x003E;n,y-&#x003E;x,n-&#x003E;y;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;x=y,get</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;int+x,:order;+)</span>
</div>
<!--l. 1929--><p class="noindent" >A <span 
class="cmss-10">compound-member</span> is an abbreviated notation for the call of a rule. Loosely
speaking, the rule that is called has the same meaning as the <span 
class="cmss-10">rule-body</span> of the
<span 
class="cmss-10">compound-member</span>, and has no formal affixes, and its local affixes are specified in the
<span 
class="cmss-10">local-part</span>. The call then calls that rule. The following statement expresses this more
precisely.
<!--l. 1937--><p class="indent" >   A <span 
class="cmss-10">rule-declaration</span> for the rule that is called can be derived from the
<span 
class="cmss-10">compound-member</span> in the following way.
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 1940--><p class="noindent" >The <span 
class="cmss-10">open-symbol</span> and <span 
class="cmss-10">close-symbol</span> are removed.
   </li>
   <li class="itemize">
   <!--l. 1941--><p class="noindent" >A <span 
class="cmss-10">point-symbol</span> is placed after the <span 
class="cmss-10">rule-body</span>.
   </li>
   <li class="itemize">
   <!--l. 1942--><p class="noindent" >If the <span 
class="cmss-10">local-part, colon-symbol</span> is absent, a <span 
class="cmss-10">colon-symbol</span> is placed in front of
   the <span 
class="cmss-10">rule-body</span>.
   </li>
   <li class="itemize">
   <!--l. 1944--><p class="noindent" >If the <span 
class="cmss-10">rule-tag</span> is missing, a <span 
class="cmss-10">rule-tag</span> is placed in front that produces a <span 
class="cmss-10">tag</span>
   that is different from any other <span 
class="cmss-10">tag</span> in the program.
   </li>
   <li class="itemize">
   <!--l. 1947--><p class="noindent" >The <span 
class="cmti-10">type </span>of the <span 
class="cmss-10">rule-body</span> is determined, and the corresponding <span 
class="cmss-10">typer</span> (see
<a href="#x1-160003.1.1">Section 3.1.1</a>) is placed in front of the <span 
class="cmss-10">rule-tag</span>.</li></ul>
<!--l. 1952--><p class="noindent" >Example: For the <span 
class="cmss-10">compound-member</span>
  <!--l. 1954--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">(1-&#x003E;n,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;m=n;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;incr+m,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;m=n)</span>
</div>
<!--l. 1957--><p class="noindent" >the created <span 
class="cmss-10">rule-declaration</span> is
  <!--l. 1959--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">question</span><span 
class="ec-lmtt-9x-x-102">&#8217;zzgrzl:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;1-&#x003E;n,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;m=n;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;incr+m,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;m=n.</span>
</div>
<!--l. 1962--><p class="noindent" >Since the rule created from a <span 
class="cmss-10">compound-member</span> has no formal affixes, the
copying mechanism does not prevent the side effects from materializing. If <span 
class="ec-lmtt-9x-x-102">n</span> is
a local or formal tag, then if the guard of the first <span 
class="cmss-10">alternative</span> in the rule
body
  <!--l. 1966--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(1-&#x003E;n,m=n);</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;n=0,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;do</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;something;</span>
</div>
<!--l. 1970--><p class="noindent" >fails (because the value of <span 
class="ec-lmtt-9x-x-102">m</span> is not one)), the side effect of changing <span 
class="ec-lmtt-9x-x-102">n</span> remains in
effect and the guard of the second <span 
class="cmss-10">alternative</span> will never succeed.
<!--l. 1976--><p class="indent" >   Neither the <span 
class="cmss-10">rule-tag</span> nor any of the <span 
class="cmss-10">local-tag</span>s in the <span 
class="cmss-10">local-part</span> can have
qualifiers.
<!--l. 1981--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">3.7   </span> <a 
 id="x1-320003.7"></a>Classification</h4>
<!--l. 1983--><p class="noindent" >A <span 
class="cmss-10">classification</span> is similar to an <span 
class="cmss-10">alternative-series</span> in that both specify a series of
<span 
class="cmss-10">alternative</span>s only one of which will eventually apply. The difference is twofold: in a
<span 
class="cmss-10">classification</span> exactly one <span 
class="cmss-10">alternative</span> applies (as opposed to one or zero in an <span 
class="cmss-10">alternative</span>
<span 
class="cmss-10">series</span>), and the choice of the pertinent <span 
class="cmss-10">alternative</span> is based on a single value (as
opposed to the successive execution of guards). <span 
class="cmss-10">Classification</span>s allow a faster
selection of <span 
class="cmss-10">alternative</span>s at the cost of a less versatile selection mechanism.
Syntax:
<!--l. 1992--><p class="indent" >
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1993--><p class="indent" >      <span 
class="cmss-10">classification: classifier-box, class-chain.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1994--><p class="indent" >      <span 
class="cmss-10">classifier-box: box-symbol, source, box-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1995--><p class="indent" >      <span 
class="cmss-10">class-chain: (class, semicolon symbol)</span><span 
class="ec-lmtt-9x-x-102">+</span><span 
class="cmss-10">, last-class.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1996--><p class="indent" >      <span 
class="cmss-10">class: area, comma-symbol, alternative.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 1997--><p class="indent" >      <span 
class="cmss-10">last-class: class; alternative.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2001--><p class="indent" >      <span 
class="cmss-10">area: sub-symbol, zone, (semicolon-symbol, zone)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, bus-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2002--><p class="indent" >      <span 
class="cmss-10">zone: [constant-value], up-to-symbol, [constant-value];</span>
   <!--l. 2004--><p class="indent" >      <span 
class="cmss-10">constant-value; list-tag.</span></dd></dl>
<!--l. 2006--><p class="noindent" >A <span 
class="cmss-10">list-tag</span> in a <span 
class="cmss-10">zone</span> must identify a global (and not local or eternal) stack or table;
moreover the <span 
class="cmss-10">constant-value</span> cannot be an actual upper or lower limit, nor an
external <span 
class="cmss-10">constant-tag</span> (as these values are not known during compilation
time.
<!--l. 2013--><p class="noindent" >Example 1:
  <!--l. 2015--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">(n:get+char,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(=char=</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[/0/:/9/],</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;dgt-&#x003E;type;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[/a/:/z/;/A/:/Z/],ltr-&#x003E;type;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[/+/;/-/;/*/;///],op-&#x003E;type;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[0:31;127],</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;:n;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[:],</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;err-&#x003E;type))</span>
</div>
<!--l. 2024--><p class="noindent" >Example 2:
  <!--l. 2026--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">=tag=</span>
  <br><span 
class="ec-lmtt-9x-x-102">[var</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;decl],</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;handle</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;variable+tag;</span>
  <br><span 
class="ec-lmtt-9x-x-102">[macro</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;decl],</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;handle</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;macro</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;call+tag;</span>
  <br><span 
class="ec-lmtt-9x-x-102">[proc</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;decl],</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;handle</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;routine</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;call+tag;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;handle</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;bad</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tag+tag</span>
</div>
<!--l. 2034--><p class="indent" >   The execution of a <span 
class="cmss-10">classification</span> starts with the evaluation of the <span 
class="cmss-10">source</span> in its
<span 
class="cmss-10">classifier-box</span>. Let the resulting value be <span 
class="cmmi-10">V </span>. The <span 
class="cmss-10">area</span>s in the <span 
class="cmss-10">classification</span> are searched
in textual order for the first <span 
class="cmss-10">area</span> which &#8220;contains&#8221; <span 
class="cmmi-10">V </span>. If such an <span 
class="cmss-10">area</span> is
found, the <span 
class="cmss-10">alternative</span> following that <span 
class="cmss-10">area</span> applies and is executed (see 
<a href="#x1-170003.1.2">Section 3.1.2</a>). If
there is no such an <span 
class="cmss-10">area</span>, the <span 
class="cmss-10">last-class</span> must be an <span 
class="cmss-10">alternative</span>, which then
applies and is executed. Otherwise the program run is aborted with an error
message.
<!--l. 2044--><p class="indent" >   A given <span 
class="cmss-10">area</span> contains the value <span 
class="cmmi-10">V </span>if one of its <span 
class="cmss-10">zone</span>s contains <span 
class="cmmi-10">V </span>. Whether a given
<span 
class="cmss-10">zone</span> contains <span 
class="cmmi-10">V </span>is determined as follows.
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 2048--><p class="noindent" >If the <span 
class="cmss-10">zone</span> is a <span 
class="cmss-10">constant-value</span>, then it contains <span 
class="cmmi-10">V </span>if <span 
class="cmmi-10">V </span>is numerically equal
   to the <span 
class="cmss-10">constant-value</span>.
   </li>
   <li class="itemize">
   <!--l. 2051--><p class="noindent" >If the <span 
class="cmss-10">zone</span> contains an <span 
class="cmss-10">up-to-symbol</span>, it is designated by two boundaries.
   The left boundary <span 
class="cmmi-10">L </span>is the <span 
class="cmss-10">constant-value</span> before the <span 
class="cmss-10">up-to-symbol</span> or, if it is
   missing, the smallest (negative) representable integer. The right boundary
   <span 
class="cmmi-10">R </span>is the <span 
class="cmss-10">constant-value</span> after the <span 
class="cmss-10">up-to-symbol</span> or, if it is missing, the maximal
   representable integer. The <span 
class="cmss-10">zone</span> contains <span 
class="cmmi-10">V </span>if <span 
class="cmmi-10">L </span><span 
class="cmsy-10">&#x2264; </span><span 
class="cmmi-10">V </span><span 
class="cmsy-10">&#x2264; </span><span 
class="cmmi-10">R</span>.
   </li>
   <li class="itemize">
   <!--l. 2059--><p class="noindent" >If the <span 
class="cmss-10">zone</span> is a <span 
class="cmss-10">list-tag</span>, this <span 
class="cmss-10">list-tag</span> must identify a global (and not a formal)
   list. The <span 
class="cmss-10">zone</span> contains <span 
class="cmmi-10">V  </span>if <span 
class="cmmi-10">V  </span>is in the virtual address space (see 
<a href="#x1-390004.2.1">Section 4.2.1</a>)
   assigned to that list.</li></ul>
<!--l. 2064--><p class="noindent" ><span 
class="cmss-10">Area</span>s may coincide partially, but it is an error if an <span 
class="cmss-10">area</span> cannot be reached by some
value of the <span 
class="cmss-10">source</span>.
<!--l. 2067--><p class="indent" >   A <span 
class="cmss-10">classification</span> can fail only if one of its <span 
class="cmss-10">alternative</span>s fail; and has side-effects if at
least one of the <span 
class="cmss-10">alternative</span>s has side-effects.
<!--l. 2074--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-330004"></a>Data</h3>
<!--l. 2076--><p class="noindent" >The basic way of representing information in <span 
class="cmss-10">ALEPH </span>is through integers. There are
four integer-based data types:
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 2079--><p class="noindent" >integers (constants),
   </li>
   <li class="itemize">
   <!--l. 2080--><p class="noindent" >variables that contain integers,
   </li>
   <li class="itemize">
   <!--l. 2081--><p class="noindent" >ordered lists of integers (tables), and
   </li>
   <li class="itemize">
   <!--l. 2082--><p class="noindent" >ordered lists of locations that contain integers (stacks).</li></ul>
<!--l. 2084--><p class="noindent" >Integers used in data declarations can be given in the form of expressions.
<!--l. 2086--><p class="indent" >   The basic way of routing information into and out of the program is through files.
There are two file types:
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 2089--><p class="noindent" >charfiles, files containing only integers that correspond to characters, and
   </li>
   <li class="itemize">
   <!--l. 2091--><p class="noindent" >datafiles,  files  containing  integers  and  pointers  to  prescribed  stacks  and
   tables.</li></ul>
<!--l. 2094--><p class="noindent" >There are three primitive actions on integer-based data: <span 
class="cmss-10">transport</span> (assignment),
<span 
class="cmss-10">comparison</span>, and <span 
class="cmss-10">extension</span>. Additional integer handling (such as addition and
multiplication) are done through external rules. There are no primitive actions on
files, all file handling is done through externals. Syntax:
<!--l. 2100--><p class="indent" >
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2101--><p class="indent" >      <span 
class="cmss-10">data-declaration:</span>
   <!--l. 2103--><p class="indent" >      <span 
class="cmss-10">constant-declaration; variable-declaration; static-variable-declaration;</span>
   <!--l. 2105--><p class="indent" >      <span 
class="cmss-10">table-declaration; stack-declaration; static-stack-declaration;</span>
   <!--l. 2107--><p class="indent" >      <span 
class="cmss-10">table-filling; stack-filling;</span>
   <!--l. 2109--><p class="indent" >      <span 
class="cmss-10">file-declaration.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2110--><p class="indent" >      <span 
class="cmss-10">data-prototype:</span>
   <!--l. 2112--><p class="indent" >      <span 
class="cmss-10">constant-prototype; variable-prototype; static-variable-prototype;</span>
   <!--l. 2114--><p class="indent" >      <span 
class="cmss-10">table-prototype; stack-prototype; static-stack-prototype;</span>
   <!--l. 2116--><p class="indent" >      <span 
class="cmss-10">file-prototype.</span></dd></dl>
<!--l. 2119--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.1   </span> <a 
 id="x1-340004.1"></a>Constants and variables</h4>
<!--l. 2121--><p class="noindent" >Constant and variable tags are initialized through expressions. Expressions are
evaluated during compilation.
<!--l. 2124--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.1.1   </span> <a 
 id="x1-350004.1.1"></a>Expressions</h5>
<!--l. 2125--><p class="noindent" >Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2127--><p class="indent" >      <span 
class="cmss-10">expression: [unary-operator], base, (binary-operator, base)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2129--><p class="indent" >      <span 
class="cmss-10">base: constant-value; open-symbol, expression, close-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2130--><p class="indent" >      <span 
class="cmss-10">unary-operator: minus-symbol; complement-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2131--><p class="indent" >      <span 
class="cmss-10">binary-opeator: times-symbol; by-symbol; plus-symbol; minus-symbol;</span>
   <!--l. 2133--><p class="indent" >      <span 
class="cmss-10">or-symbol; and-symbol; xor-symbol.</span></dd></dl>
<!--l. 2135--><p class="noindent" >Examples:
  <!--l. 2136--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">-3</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;0x7f</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&amp;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;byte</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;size</span>
  <br><span 
class="ec-lmtt-9x-x-102">((/e/+1)*char</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;size</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;/n/+1)*char</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;size+/d/+1</span>
  <br><span 
class="ec-lmtt-9x-x-102">///////</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;the</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;code</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;of</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;/</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;divided</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;by</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;itself</span>
</div>
<!--l. 2142--><p class="indent" >   The value of an <span 
class="cmss-10">expression</span> is the integral value that results from evaluating the
<span 
class="cmss-10">expression</span> according to the standard rules of arithmetic. Operators applied in the
order of their priorities; operators of equal priority are applied from left to right.
Unary operators have the highest priority. They are followed by multiplication and
division, then addition and subtraction. The Boolean (bitwise) operators have the
lowest priority.
<!--l. 2150--><p class="indent" >   An <span 
class="cmss-10">expression</span> through the <span 
class="cmss-10">constant-value</span> (<a href="#x1-230003.3">Section 3.3</a>) cannot contain actual
upper or lower limits, and cannot contain external <span 
class="cmss-10">constant-tag</span>s. There is
no restriction, however, on the usage of <span 
class="cmss-10">constant-tag</span>s exported by other
modules.
<!--l. 2155--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.1.2   </span> <a 
 id="x1-360004.1.2"></a>Constants</h5>
<!--l. 2157--><p class="noindent" >A <span 
class="cmss-10">constant-declaration</span> specifies the integral value which is represented by a
<span 
class="cmss-10">constant-tag</span>. This relationship is fixed and does not change. Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2161--><p class="indent" >      <span 
class="cmss-10">constant-declaration: constant-symbol, constant-description,</span>
   <!--l. 2164--><p class="indent" >      <span 
class="cmss-10">(comma-symbol, constant-description)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2165--><p class="indent" >      <span 
class="cmss-10">constant-description: constant-tag, equals-symbol, expression.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2168--><p class="indent" >      <span 
class="cmss-10">constant-prototype: constant-symbol, constant-tag,</span>
   <!--l. 2171--><p class="indent" >      <span 
class="cmss-10">(comma-symbol, constant-tag)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point-symbol.</span></dd></dl>
<!--l. 2173--><p class="noindent" >Example for a <span 
class="cmss-10">constant-declaration</span>:
  <!--l. 2174--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">constant</span><span 
class="ec-lmtt-9x-x-102">&#8217;mid</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;page</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;=</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;line</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;width/2,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;line</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;width=144.</span>
</div>
<!--l. 2177--><p class="noindent" >The value of the <span 
class="cmss-10">expression</span> cannot depend on the <span 
class="cmss-10">constant-tag</span> being declared.
Consequently, the declaration
  <!--l. 2180--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">constant</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;p=q,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;q=2-p.</span>
</div>
<!--l. 2183--><p class="noindent" >results in an error message. The <span 
class="cmss-10">constant-tag</span> in a <span 
class="cmss-10">constant-prototype</span> should
originate either from a <span 
class="cmss-10">constant-declaration</span> or from a <span 
class="cmss-10">pointer-initialization</span>, see 
<a href="#x1-440004.2.6">Section 4.2.6</a>.
<!--l. 2189--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.1.3   </span> <a 
 id="x1-370004.1.3"></a>Variables</h5>
<!--l. 2191--><p class="noindent" >An <span 
class="cmss-10">ALEPH </span>variable consists of a <span 
class="cmss-10">variable-tag</span> and a location; the location may or may
not contain a value. If it contains a value, then the variable <span 
class="cmti-10">has </span>that value. The
content of the location may change. Once a location has obtained a value it can&#8217;t
become empty again.
<!--l. 2196--><p class="indent" >   A global variable is declared in a <span 
class="cmss-10">variable-declaration</span>; a formal variable
originates from a <span 
class="cmss-10">formal-affix-sequence</span>, and a local variable originates from a
<span 
class="cmss-10">local-affix-sequence</span>.
<!--l. 2200--><p class="indent" >
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2201--><p class="indent" >      <span 
class="cmss-10">variable-declaration: variable-symbol, variable-description,</span>
   <!--l. 2203--><p class="indent" >      <span 
class="cmss-10">(comma-symbol, variable-description)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2204--><p class="indent" >      <span 
class="cmss-10">variable-description: variable-tag, equals-symbol, expression.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2205--><p class="indent" >      <span 
class="cmss-10">static-variable-declaration: static-symbol, variable-declaration.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2209--><p class="indent" >      <span 
class="cmss-10">variable-prototype: variable-symbol, variable-tag,</span>
   <!--l. 2211--><p class="indent" >      <span 
class="cmss-10">(comma-symbol, variable-tag)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2212--><p class="indent" >      <span 
class="cmss-10">static-variable-prototype: static symbol, variable-prototype.</span></dd></dl>
<!--l. 2215--><p class="noindent" >Examples:
  <!--l. 2216--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">variable</span><span 
class="ec-lmtt-9x-x-102">&#8217;tag</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;pnt=nil,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;median</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;code=(&#x003C;code+</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#x003E;code)/2.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">static</span><span 
class="ec-lmtt-9x-x-102">&#8217;&#8217;</span><span 
class="ec-lmtk-10x-x-92">variable</span><span 
class="ec-lmtt-9x-x-102">&#8217;line</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;cnt=0,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;page</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;cnt=0.</span>
</div>
<!--l. 2220--><p class="noindent" >For each <span 
class="cmss-10">variable-description</span> a location is created with the <span 
class="cmss-10">variable-tag</span> as its label, and
filled with the value of the <span 
class="cmss-10">expression</span>. Variables can be used in <span 
class="cmss-10">source</span>s and
<span 
class="cmss-10">destination</span>s. They cannot be used in <span 
class="cmss-10">expression</span>s.
<!--l. 2226--><p class="indent" >   A static <span 
class="cmss-10">variable-tag</span> behaves as a variable in the module it is declared, but in
other modules it behaves like a <span 
class="cmss-10">constant-tag</span>. The content of a <span 
class="cmss-10">variable-tag</span> can only be
manipulated by rules in its defining module; in other modules such a variable is &#8220;read
only&#8221;.
<!--l. 2231--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.2   </span> <a 
 id="x1-380004.2"></a>Tables and stacks</h4>
<!--l. 2233--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.2.1   </span> <a 
 id="x1-390004.2.1"></a>The address space</h5>
<!--l. 2235--><p class="noindent" ><span 
class="cmss-10">ALEPH </span>stacks and tables together are called <span 
class="cmti-10">lists</span>. Items in lists are identified by
unique addresses; these addresses come from a range of integer values called <span 
class="cmti-10">virtual</span>
<span 
class="cmti-10">memory space</span>. The range starts at some small positive number and ends at a large
positive number. Lists occupy separate consecutive locations in this virtual memory.
List elements are identified (indexed) by their virtual memory addresses. Variables in
<span 
class="cmss-10">ALEPH </span>have no virtual addresses as they are not stored in the virtual memory
space.
<!--l. 2243--><p class="indent" >   When an <span 
class="cmss-10">ALEPH </span>program is compiled, the complete available virtual memory
space is distributed among the lists in the program with almost no control of the
programmer. The chunk of memory addresses assigned to a list is its <span 
class="cmti-10">virtual address</span>
<span 
class="cmti-10">space</span>. Frequently only a part of this virtual space is in use, which is called the <span 
class="cmti-10">actual</span>
<span 
class="cmti-10">address space </span>of the list.
<!--l. 2249--><p class="indent" >   The virtual memory is distributed among all lists as follows.
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 2251--><p class="noindent" >For each table and for each stack with empty <span 
class="cmss-10">size-estimate</span> in its declaration,
   the size of the actual address space is determined by its <span 
class="cmss-10">filling</span>s. The allocated
   virtual space is the amount necessary to store elements of those fillings.
   </li>
   <li class="itemize">
   <!--l. 2256--><p class="noindent" >For a stack with an <span 
class="cmss-10">absolute-size</span> the allocated virtual space is the maximum
   of the given value and the total size of the fillings.
   </li>
   <li class="itemize">
   <!--l. 2258--><p class="noindent" >The remainder of the virtual address space is distributed over the rest of
   the stacks proportionally to the specified <span 
class="cmss-10">relative-size</span>.
   </li>
   <li class="itemize">
   <!--l. 2260--><p class="noindent" >External tables and stacks set up their own virtual limits from a separate
   virtual memory range.</li></ul>
<!--l. 2263--><p class="noindent" >For each list the largest address in its virtual address space is its <span 
class="cmti-10">virtual upper</span>
<span 
class="cmti-10">limit</span>, while the lowest address plus the <span 
class="cmss-10">calibre</span> (block size) minus one is its
<span 
class="cmti-10">virtual lower limit</span>. These values are determined at compile time and do not
change.
<!--l. 2268--><p class="indent" >   The initial values of the <span 
class="cmti-10">actual limits </span>of the list are calculated as follows.
The <span 
class="cmti-10">actual lower limit </span>is set to the <span 
class="cmti-10">virtual lower limit</span>. The initial value
of the <span 
class="cmti-10">actual upper limit </span>is calculated from the <span 
class="cmss-10">filling</span>s of the list. These
fillings are positioned next to each other at the beginning of the virtual
address space. The <span 
class="cmti-10">actual upper limit </span>is set to the largest (rightmost) occupied
virtual address. If the list has no <span 
class="cmss-10">filling</span>, then its <span 
class="cmti-10">actual upper limit </span>is set to its
virtual lower limit minus the <span 
class="cmss-10">calibre</span>. This value is one less than the lowest
virtual address assigned to the list, thus does not point into the list&#8217;s address
space.
<!--l. 2279--><p class="indent" >   The actual limits of a table are equal to its virtual limits and do not change.
Actual limits of a stack can change, but they always remain within its virtual
limits.
<!--l. 2283--><p class="indent" >   Suppose, for example, that the following list declarations (see 
<a href="#x1-420004.2.4">Section 4.2.4</a>  
and 
<a href="#x1-430004.2.5">Section 4.2.5</a>) occur
in the program:
  <!--l. 2285--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">table</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;pw[]=(1,10,100,1000).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">stack</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[=</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;5</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;=]</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;dg</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[]=(0),</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;30</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;]</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;st</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[],</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;50</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;]</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(num,denom)</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;ax[]</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;=</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;((365,113):pi,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(191,71):e).</span>
</div>
<!--l. 2292--><p class="noindent" >Assuming that the virtual memory is indexed from 10000 to 99999, the virtual
address space could have the following layout:
<div class="center" 
>
<!--l. 2296--><p class="noindent" >
<div class="tabular"> <table id="TBL-5" class="tabular" ><colgroup id="TBL-5-1g"><col 
id="TBL-5-1"><col 
id="TBL-5-2"><col 
id="TBL-5-3"><col 
id="TBL-5-4"><col 
id="TBL-5-5"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-5-1-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-1-1"
class="td11">                                                               <span 
class="cmr-9">address </span><span 
class="cmr-9">&#x00A0;</span><span 
class="cmr-9">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-1-2"  
class="td11"><span 
class="cmr-9">contents</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-1-3"  
class="td11"><span 
class="cmr-9">belongs to</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-1-4"  
class="td11"><span 
class="cmr-9">selector</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-1-5"  
class="td11"><span 
class="cmr-9">pointer          </span></td>
</tr><tr 
class="vspace" style="font-size:4.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-2-"><td  style="white-space:nowrap; text-align:right;" id="TBL-5-2-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">10000</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-2"  
class="td11">      <span 
class="ec-lmtt-9x-x-94">1</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">pw    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-5-2-4"  
class="td11">  <span 
class="ec-lmtk-10x-x-92">pw  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-2-5"  
class="td11"><span 
class="ec-lmtk-10x-x-92">&#x003C;pw</span><span 
class="cmr-9">, </span><span 
class="ec-lmtk-10x-x-92">&#x003C;&#x003C;pw</span>     </td>
</tr>
<tr  
 style="vertical-align:baseline;" id="TBL-05-5-"><td  style="white-space:nowrap; text-align:right;" id="TBL-05-5-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">10001</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-05-5-2"  
class="td11">     <span 
class="ec-lmtt-9x-x-94">10</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-05-5-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">pw    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-05-5-4"  
class="td11">  <span 
class="ec-lmtk-10x-x-92">pw  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-05-5-5"  
class="td11">             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-005-8-"><td  style="white-space:nowrap; text-align:right;" id="TBL-005-8-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">10002</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-005-8-2"  
class="td11">    <span 
class="ec-lmtt-9x-x-94">100</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-005-8-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">pw    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-005-8-4"  
class="td11">  <span 
class="ec-lmtk-10x-x-92">pw  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-005-8-5"  
class="td11">             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-0005-11-"><td  style="white-space:nowrap; text-align:right;" id="TBL-0005-11-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">10003</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-0005-11-2"  
class="td11">   <span 
class="ec-lmtt-9x-x-94">1000</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-0005-11-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">pw    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-0005-11-4"  
class="td11">  <span 
class="ec-lmtk-10x-x-92">pw  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-0005-11-5"  
class="td11"><span 
class="ec-lmtk-10x-x-92">&#x003E;pw</span><span 
class="cmr-9">, </span><span 
class="ec-lmtk-10x-x-92">&#x003E;&#x003E;pw</span>     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-0005-12-"><td  style="white-space:nowrap; text-align:right;" id="TBL-0005-12-1"  
class="td11">                                                             <span 
class="ec-lmtt-9x-x-94">10004-10009</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-0005-12-2"  
class="td11">     <span 
class="ec-lmtt-9x-x-94">&#8211;</span> </td><td colspan="2" style="white-space:nowrap; text-align:left;" id="TBL-0005-12-3"  
class="td11"><div class="multicolumn"  style="white-space:nowrap; text-align:left;"> <span 
class="cmr-9">unassigned </span></div>      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-0005-12-5"  
class="td11">             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-0005-13-"><td  style="white-space:nowrap; text-align:right;" id="TBL-0005-13-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">10010</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-0005-13-2"  
class="td11">      <span 
class="ec-lmtt-9x-x-94">0</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-0005-13-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">dg    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-0005-13-4"  
class="td11">  <span 
class="ec-lmtk-10x-x-92">dg  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-0005-13-5"  
class="td11"><span 
class="ec-lmtk-10x-x-92">&#x003C;dg</span><span 
class="cmr-9">, </span><span 
class="ec-lmtk-10x-x-92">&#x003C;&#x003C;dg</span><span 
class="cmr-9">, </span><span 
class="ec-lmtk-10x-x-92">&#x003E;&#x003E;dg</span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-00005-16-"><td  style="white-space:nowrap; text-align:right;" id="TBL-00005-16-1"  
class="td11">                                                             <span 
class="ec-lmtt-9x-x-94">10011-10013</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-00005-16-2"  
class="td11">     <span 
class="ec-lmtt-9x-x-94">&#8211;</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-00005-16-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">dg    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-00005-16-4"  
class="td11">      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-00005-16-5"  
class="td11">             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-000005-19-"><td  style="white-space:nowrap; text-align:right;" id="TBL-000005-19-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">10014</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-000005-19-2"  
class="td11">     <span 
class="ec-lmtt-9x-x-94">&#8211;</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-000005-19-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">dg    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-000005-19-4"  
class="td11">      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-000005-19-5"  
class="td11"><span 
class="ec-lmtk-10x-x-92">&#x003E;dg</span>           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-000005-20-"><td  style="white-space:nowrap; text-align:right;" id="TBL-000005-20-1"  
class="td11">                                                             <span 
class="ec-lmtt-9x-x-94">10015-10018</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-000005-20-2"  
class="td11">     <span 
class="ec-lmtt-9x-x-94">&#8211;</span> </td><td colspan="2" style="white-space:nowrap; text-align:left;" id="TBL-000005-20-3"  
class="td11"><div class="multicolumn"  style="white-space:nowrap; text-align:left;"> <span 
class="cmr-9">unassigned </span></div>      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-000005-20-5"  
class="td11">             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-000005-21-"><td  style="white-space:nowrap; text-align:right;" id="TBL-000005-21-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">10019</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-000005-21-2"  
class="td11">     <span 
class="ec-lmtt-9x-x-94">&#8211;</span> </td><td colspan="2" style="white-space:nowrap; text-align:left;" id="TBL-000005-21-3"  
class="td11"><div class="multicolumn"  style="white-space:nowrap; text-align:left;"> <span 
class="cmr-9">unassigned </span></div>      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-000005-21-5"  
class="td11"><span 
class="ec-lmtk-10x-x-92">&#x003E;&#x003E;st</span>          </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-0000005-24-"><td  style="white-space:nowrap; text-align:right;" id="TBL-0000005-24-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">10020</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-0000005-24-2"  
class="td11">     <span 
class="ec-lmtt-9x-x-94">&#8211;</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-0000005-24-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">st    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-0000005-24-4"  
class="td11">      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-0000005-24-5"  
class="td11"><span 
class="ec-lmtk-10x-x-92">&#x003C;st</span><span 
class="cmr-9">, </span><span 
class="ec-lmtk-10x-x-92">&#x003C;&#x003C;st</span>     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-00000005-27-"><td  style="white-space:nowrap; text-align:right;" id="TBL-00000005-27-1"  
class="td11">                                                             <span 
class="ec-lmtt-9x-x-94">10020-32327</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-00000005-27-2"  
class="td11">     <span 
class="ec-lmtt-9x-x-94">&#8211;</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-00000005-27-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">st    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-00000005-27-4"  
class="td11">      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-00000005-27-5"  
class="td11">             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-000000005-30-"><td  style="white-space:nowrap; text-align:right;" id="TBL-000000005-30-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">32328</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-000000005-30-2"  
class="td11">     <span 
class="ec-lmtt-9x-x-94">&#8211;</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-000000005-30-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">st    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-000000005-30-4"  
class="td11">      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-000000005-30-5"  
class="td11"><span 
class="ec-lmtk-10x-x-92">&#x003E;st</span>           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-000000005-31-"><td  style="white-space:nowrap; text-align:right;" id="TBL-000000005-31-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">32329</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-000000005-31-2"  
class="td11">     <span 
class="ec-lmtt-9x-x-94">&#8211;</span> </td><td colspan="2" style="white-space:nowrap; text-align:left;" id="TBL-000000005-31-3"  
class="td11"><div class="multicolumn"  style="white-space:nowrap; text-align:left;"> <span 
class="cmr-9">unassigned </span></div>      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-000000005-31-5"  
class="td11">             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-000000005-32-"><td  style="white-space:nowrap; text-align:right;" id="TBL-000000005-32-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">32330</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-000000005-32-2"  
class="td11">    <span 
class="ec-lmtt-9x-x-94">355</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-000000005-32-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">ax    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-000000005-32-4"  
class="td11"> <span 
class="ec-lmtk-10x-x-92">num</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0; </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-000000005-32-5"  
class="td11">             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-0000000005-35-"><td  style="white-space:nowrap; text-align:right;" id="TBL-0000000005-35-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">32331</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-0000000005-35-2"  
class="td11">    <span 
class="ec-lmtt-9x-x-94">113</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-0000000005-35-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">ax    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-0000000005-35-4"  
class="td11"> <span 
class="ec-lmtk-10x-x-92">denom </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-0000000005-35-5"  
class="td11"><span 
class="ec-lmtk-10x-x-92">&#x003C;ax</span><span 
class="cmr-9">, </span><span 
class="ec-lmtk-10x-x-92">&#x003C;&#x003C;ax</span><span 
class="cmr-9">, </span><span 
class="ec-lmtk-10x-x-92">pi</span>  </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-00000000005-38-"><td  style="white-space:nowrap; text-align:right;" id="TBL-00000000005-38-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">32332</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-00000000005-38-2"  
class="td11">    <span 
class="ec-lmtt-9x-x-94">191</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-00000000005-38-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">ax    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-00000000005-38-4"  
class="td11"> <span 
class="ec-lmtk-10x-x-92">num</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0; </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-00000000005-38-5"  
class="td11">             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-000000000005-41-"><td  style="white-space:nowrap; text-align:right;" id="TBL-000000000005-41-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">32333</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-000000000005-41-2"  
class="td11">     <span 
class="ec-lmtt-9x-x-94">71</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-000000000005-41-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">ax    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-000000000005-41-4"  
class="td11"> <span 
class="ec-lmtk-10x-x-92">denom </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-000000000005-41-5"  
class="td11"><span 
class="ec-lmtk-10x-x-92">&#x003E;&#x003E;ax</span><span 
class="cmr-9">, </span><span 
class="ec-lmtk-10x-x-92">e</span>       </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-0000000000005-44-"><td  style="white-space:nowrap; text-align:right;" id="TBL-0000000000005-44-1"  
class="td11">                                                             <span 
class="ec-lmtt-9x-x-94">32334-99998</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-0000000000005-44-2"  
class="td11">     <span 
class="ec-lmtt-9x-x-94">&#8211;</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-0000000000005-44-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">ax    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-0000000000005-44-4"  
class="td11">      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-0000000000005-44-5"  
class="td11">             </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-00000000000005-47-"><td  style="white-space:nowrap; text-align:right;" id="TBL-00000000000005-47-1"  
class="td11">                                                                  <span 
class="ec-lmtt-9x-x-94">99999</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span><span 
class="ec-lmtt-9x-x-94">&#x00A0;</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-00000000000005-47-2"  
class="td11">     <span 
class="ec-lmtt-9x-x-94">&#8211;</span> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-00000000000005-47-3"  
class="td11">   <span 
class="ec-lmtk-10x-x-92">ax    </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-00000000000005-47-4"  
class="td11">      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-00000000000005-47-5"  
class="td11"><span 
class="ec-lmtk-10x-x-92">&#x003E;ax</span>           </td>
</tr>
</table>
</div></div>
<!--l. 2327--><p class="indent" >   A stack can be extended to the right while raising its actual upper limit through
an <span 
class="cmss-10">extension</span> (<a href="#x1-260003.3.3">Section 3.3.3</a>).
Items can be removed from the right of a stack through a call of a
run in the Standard Library (see 
<a href="#x1-660008.2">Section 8.2</a>) such as <span 
class="ec-lmtt-9x-x-102">unstack</span> or <span 
class="ec-lmtt-9x-x-102">unstack to</span>, after which
the discarded address space can be reclaimed again, but not the values in
it.
<!--l. 2334--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.2.2   </span> <a 
 id="x1-400004.2.2"></a>Selectors</h5>
<!--l. 2336--><p class="noindent" >Elements of an <span 
class="cmss-10">ALEPH </span>table or stack are subdivided into consecutive blocks. The
address of the rightmost item in a block is the block address, and values
in the block are referenced through the block address and a <span 
class="cmss-10">selector-tag</span>.
The <span 
class="cmss-10">selector-tag</span> identical to the <span 
class="cmss-10">list-tag</span> is called the <span 
class="cmti-10">standard selector</span>. The
available selectors, which might miss the standard selector, are specified in a
<span 
class="cmss-10">field-definition</span>.
<!--l. 2343--><p class="indent" >   <span 
class="cmss-10">Field-definition</span>s can be used in a <span 
class="cmss-10">formal-affix-sequence</span> to specify the block
structure of a formal table or stack; in list declarations and prototypes; and in <span 
class="cmss-10">filling</span>s.
If no <span 
class="cmss-10">field-definition</span> is specified in a declaration, then the blocks in the list have a
single element, and the selector of that element is the standard selector.
Syntax:
<!--l. 2349--><p class="indent" >
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2350--><p class="indent" >      <span 
class="cmss-10">field-definition: field-list-pack</span><span 
class="ec-lmtt-9x-x-102">+</span><span 
class="cmss-10">.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2351--><p class="indent" >      <span 
class="cmss-10">field-list-pack:</span>
   <!--l. 2353--><p class="indent" >      <span 
class="cmss-10">open-symbol, field, (comma-symbol, field)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, close-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2354--><p class="indent" >      <span 
class="cmss-10">field: dummy-symbol; selector-tag, (equals-symbol, selector-tag)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">.</span></dd></dl>
<!--l. 2356--><p class="noindent" >Examples for <span 
class="cmss-10">field-definition</span>s:
  <!--l. 2358--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">(s1,s2=t1,s3=t2)</span>
  <br><span 
class="ec-lmtt-9x-x-102">(s1,s2,s3)(#,t1,t2)</span>
</div>
<!--l. 2363--><p class="indent" >   A <span 
class="cmss-10">field-definition</span> contains one or more <span 
class="cmss-10">field-list-pack</span>s. Each of them defines the
<span 
class="cmss-10">calibre</span> of the list as the number of the <span 
class="cmss-10">field</span>s in it, this number must be the same for
each <span 
class="cmss-10">field-list-pack</span> in the <span 
class="cmss-10">field-definition</span>.
<!--l. 2368--><p class="indent" >   Selectors of the block elements are specified from left to right by the <span 
class="cmss-10">selector-tag</span>s
in the <span 
class="cmss-10">field-list-pack</span>. The same block element can be identified by multiple selectors;
the additional selectors are specified after the initial selector using an <span 
class="cmss-10">equals-symbol</span>,
see the first example. The second example specifies the same block structure with the
same selectors, emphasizing which selectors are used together. The <span 
class="cmss-10">dummy-symbol</span> <span 
class="ec-lmtt-9x-x-102">#</span>
is used as a placeholder.
<!--l. 2376--><p class="indent" >   If a list is defined with a <span 
class="cmss-10">field-definition</span>, then a matching prototype must also
contain a <span 
class="cmss-10">field-definition</span>, while a <span 
class="cmss-10">list-filling</span> may omit it. All <span 
class="cmss-10">field-definition</span>s of the same
list must define the same <span 
class="cmss-10">calibre</span> (block size), and the same standard selector, but
could define different selector names which accumulate: any of the specified selectors
can be used to identify elements in the list. Nevertheless, all <span 
class="cmss-10">field-definition</span>s must be
consistent on the standard selector.
<!--l. 2384--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.2.3   </span> <a 
 id="x1-410004.2.3"></a>Limits</h5>
<!--l. 2386--><p class="noindent" ><span 
class="cmss-10">Limit</span>s provide the block size, the virtual and actual limits of a list as constant
values. The actual limits of a stack can change by an <span 
class="cmss-10">extension</span> (<a href="#x1-260003.3.3">Section 3.3.3</a>), or by
stack-manipulating externals (<a href="#x1-660008.2">Section 8.2</a>). Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2391--><p class="indent" >      <span 
class="cmss-10">limit: limit-token, list-tag.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2392--><p class="indent" >      <span 
class="cmss-10">limit-token: static-limit; dynamic-limit.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2393--><p class="indent" >      <span 
class="cmss-10">static-limit: vlwb-symbol vupb-symbol; calibre-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2394--><p class="indent" >      <span 
class="cmss-10">dynamic-limit: alwb-symbol; aupb-symbol.</span></dd></dl>
<!--l. 2396--><p class="noindent" >Examples:
  <!--l. 2397--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x003E;table,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#x003C;&#x003E;blocksize,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#x003C;&#x003C;stack.</span>
</div>
<!--l. 2401--><p class="noindent" >The calibre is the block size of the list. Static limits are determined during
compilation; actual limits of a stack may change during the program run as a
consequence of actions that change the stack size. Actual limits of a table do not
change.
<!--l. 2407--><p class="indent" >   If the <span 
class="cmss-10">list-tag</span> in the <span 
class="cmss-10">limit</span> is a formal affix, the returned value is the <span 
class="cmss-10">limit</span> of
the corresponding global list. In particular, the <span 
class="cmss-10">calibre</span> of a <span 
class="cmss-10">formal-affix</span> is
the calibre of the corresponding global list, and not the calibre of the local
affix.
<!--l. 2412--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.2.4   </span> <a 
 id="x1-420004.2.4"></a>Tables</h5>
<!--l. 2414--><p class="noindent" >Tables originate from <span 
class="cmss-10">table declaration</span>s. They contain values that are determined at
compile time and cannot change. Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2417--><p class="indent" >      <span 
class="cmss-10">table-declaration: table-symbol, table-description,</span>
   <!--l. 2419--><p class="indent" >      <span 
class="cmss-10">(comma-symbol, table-description)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2420--><p class="indent" >      <span 
class="cmss-10">table-description: table-head, sub-bus, [equals-symbol, filling].</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2421--><p class="indent" >      <span 
class="cmss-10">table-head: [field-definition], table-tag.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2424--><p class="indent" >      <span 
class="cmss-10">table-prototype: table-symbol, table-head,</span>
   <!--l. 2426--><p class="indent" >      <span 
class="cmss-10">(comma-symbol, table-head)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point-symbol.</span></dd></dl>
<!--l. 2429--><p class="noindent" >Examples:
  <!--l. 2431--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">table</span><span 
class="ec-lmtt-9x-x-102">&#8217;(s1,s2,s3)(#,t2,t3)</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;T[].</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;declaration</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">table</span><span 
class="ec-lmtt-9x-x-102">&#8217;(up,down=S)</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;S.</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;prototype</span>
</div>
<!--l. 2435--><p class="noindent" >
<!--l. 2437--><p class="indent" >   The <span 
class="cmss-10">calibre</span> of the table <span 
class="ec-lmtt-9x-x-102">T</span> is three. The first element of a block of <span 
class="ec-lmtt-9x-x-102">T</span> can be accessed
by the selector <span 
class="ec-lmtt-9x-x-102">s1</span> only; the last element by both selectors <span 
class="ec-lmtt-9x-x-102">s3</span> and <span 
class="ec-lmtt-9x-x-102">t3</span>. The table <span 
class="ec-lmtt-9x-x-102">T</span> has
no standard selector, consequently using the <span 
class="cmss-10">list-element</span> <span 
class="ec-lmtt-9x-x-102">T[ptr]</span> results in an error.
The table <span 
class="ec-lmtt-9x-x-102">S</span> has <span 
class="cmss-10">calibre</span> two, and the standard selector identifies the last element of its
block.
<!--l. 2446--><p class="indent" >   A <span 
class="cmss-10">table-declaration</span> declares a table, specifies the block size (calibre),
selectors, and whether it has a standard selector or not. The content of the
table is specified by <span 
class="cmss-10">filling</span>s, one of which can be optionally added at the
declaration. The final order in which the different <span 
class="cmss-10">filling</span>s are stored in the table is
unspecified.
<!--l. 2452--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.2.5   </span> <a 
 id="x1-430004.2.5"></a>Stacks</h5>
<!--l. 2453--><p class="noindent" >Stacks originate from <span 
class="cmss-10">stacks-declaration</span>s. Syntax:
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2455--><p class="indent" >      <span 
class="cmss-10">stack-declaration: stack-symbol, stack-description,</span>
   <!--l. 2457--><p class="indent" >      <span 
class="cmss-10">(comma symbol, stack-description)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2458--><p class="indent" >      <span 
class="cmss-10">static-stack-declaration:</span>
   <!--l. 2460--><p class="indent" >      <span 
class="cmss-10">static-symbol, stack-declaration.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2461--><p class="indent" >      <span 
class="cmss-10">stack-description:</span>
   <!--l. 2463--><p class="indent" >      <span 
class="cmss-10">sub-symbol, size-estimate, bus-symbol, stack-head, sub-bus,</span>
   <!--l. 2465--><p class="indent" >      <span 
class="cmss-10">[equals-symbol, filling].</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2466--><p class="indent" >      <span 
class="cmss-10">stack-head: [field-definition], stack-tag.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2469--><p class="indent" >      <span 
class="cmss-10">size-estimate:</span>
   <!--l. 2471--><p class="indent" >      <span 
class="cmss-10">empty; absolute-size; relative-size.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2472--><p class="indent" >      <span 
class="cmss-10">absolute-size: box-symbol, constant-value, box-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2474--><p class="indent" >      <span 
class="cmss-10">relative-size: constant-value.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2478--><p class="indent" >      <span 
class="cmss-10">stack-prototype: [static-symbol], stack-symbol, stack-head,</span>
   <!--l. 2480--><p class="indent" >      <span 
class="cmss-10">(comma-symbol, stack-head)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point-symbol.</span></dd></dl>
<!--l. 2482--><p class="noindent" >Examples:
  <!--l. 2483--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">stack</span><span 
class="ec-lmtt-9x-x-102">&#8217;[=</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;line</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;width</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;=](char)print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;line[].</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;declaration</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">stack</span><span 
class="ec-lmtt-9x-x-102">&#8217;BUFFER,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(flag,data)</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;RULE.</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;prototype</span>
</div>
<!--l. 2488--><p class="noindent" >The stack <span 
class="ec-lmtt-9x-x-102">print line</span> has a fixed number of elements specified by the <span 
class="cmss-10">constant-tag</span>
<span 
class="ec-lmtt-9x-x-102">line width</span>, it has one-element blocks, and no standard selector. This stack cannot
grow beyond its specified limit, however it can still shrink. In the prototype two
stacks are specified. For <span 
class="ec-lmtt-9x-x-102">BUFFER</span> no <span 
class="cmss-10">field-definition</span> is given, the same prototype can be
written equivalently as <span 
class="ec-lmtt-9x-x-102">(BUFFER)BUFFER</span>.
<!--l. 2498--><p class="indent" >   A <span 
class="cmss-10">stack-declaration</span> declares a stack, specifying the required virtual memory. If the
<span 
class="cmss-10">size-estimate</span> is empty, the allocated virtual memory will be determined by the total
size of <span 
class="cmss-10">filling</span>s. The <span 
class="cmss-10">absolute-size</span> specifies the number of requested virtual locations
(not blocks); this number must be positive. The <span 
class="cmss-10">relative-size</span> must be positive and at
most 100. The <span 
class="cmss-10">constant-value</span> in the <span 
class="cmss-10">size-estimate</span> cannot depend on values which are
determined after the distribution of the virtual memory, such as virtual limits or
pointer constants.
<!--l. 2507--><p class="indent" >   A static <span 
class="cmss-10">stack-tag</span> behaves as a stack in the module it is declared, but in other
modules it behaves like a <span 
class="cmss-10">table-tag</span>: neither the list itself, nor its content can be
modified.
<!--l. 2511--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.2.6   </span> <a 
 id="x1-440004.2.6"></a>Filling</h5>
<!--l. 2513--><p class="noindent" >The initial content of lists is defined in <span 
class="cmss-10">filling</span>s. <span 
class="cmss-10">Filling</span>s of the same list can spread
across the program, even across different modules. Each <span 
class="cmss-10">filling</span> is stored in the
designated list at consecutive locations, but the order in which the different
<span 
class="cmss-10">filling</span>s appear is unspecified. A <span 
class="cmss-10">filling</span> may contain <span 
class="cmss-10">pointer-initialization</span>s which
define a <span 
class="cmss-10">constant-tag</span> with the value of the virtual address of the block it
follows.
<!--l. 2521--><p class="indent" >
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2522--><p class="indent" >      <span 
class="cmss-10">table-filling:</span>
   <!--l. 2524--><p class="indent" >      <span 
class="cmss-10">table-symbol, table-head, equals-symbol, filling.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2526--><p class="indent" >      <span 
class="cmss-10">stack-filling:</span>
   <!--l. 2528--><p class="indent" >      <span 
class="cmss-10">stack-symbol, stack-head, equals-symbol, filling.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2530--><p class="indent" >      <span 
class="cmss-10">filling: open-symbol, filling-unit,</span>
   <!--l. 2532--><p class="indent" >      <span 
class="cmss-10">(comma-symbol, filling-unit)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, close-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2533--><p class="indent" >      <span 
class="cmss-10">filling-unit:</span>
   <!--l. 2535--><p class="indent" >      <span 
class="cmss-10">constant-value, [multiplier], pointer-initialization</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">;</span>
   <!--l. 2537--><p class="indent" >      <span 
class="cmss-10">open-symbol, compound-block, close-symbol,</span>
   <!--l. 2539--><p class="indent" >      <span 
class="cmss-10">&#x00A0; </span><span 
class="cmss-10">&#x00A0; </span><span 
class="cmss-10">&#x00A0; [multiplier], pointer-initialization</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">;</span>
   <!--l. 2541--><p class="indent" >      <span 
class="cmss-10">string-denotation, pointer-initialization</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2543--><p class="indent" >      <span 
class="cmss-10">compound-block: value-block; selector-block.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2544--><p class="indent" >      <span 
class="cmss-10">multiplier: times-symbol, constant-value.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2545--><p class="indent" >      <span 
class="cmss-10">pointer-initialization: colon-symbol, constant-tag.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2547--><p class="indent" >      <span 
class="cmss-10">value-block:</span>
   <!--l. 2549--><p class="indent" >      <span 
class="cmss-10">(constant-value, comma-symbol)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, constant-value,</span>
   <!--l. 2551--><p class="indent" >      <span 
class="cmss-10">&#x00A0; </span><span 
class="cmss-10">&#x00A0; </span><span 
class="cmss-10">&#x00A0; [times-symbol], (comma-symbol, constant-value)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2553--><p class="indent" >      <span 
class="cmss-10">selector-block:</span>
   <!--l. 2555--><p class="indent" >      <span 
class="cmss-10">fill-transport, (comma-symbol, fill-transport)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2557--><p class="indent" >      <span 
class="cmss-10">fill-transport: constant-value, (arrow-symbol, selector-tag)</span><span 
class="ec-lmtt-9x-x-102">+</span><span 
class="cmss-10">.</span></dd></dl>
<!--l. 2560--><p class="noindent" >Examples:
  <!--l. 2562--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">stack</span><span 
class="ec-lmtt-9x-x-102">&#8217;(ch,p)optor=</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(/+/-&#x003E;ch,3-&#x003E;p),(3-&#x003E;p,/-/-&#x003E;ch),(5-&#x003E;p,/^/-&#x003E;ch)</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">table</span><span 
class="ec-lmtt-9x-x-102">&#8217;messages=("tag</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;undefined":bad</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tag).</span>
</div>
<!--l. 2569--><p class="noindent" >Values in the <span 
class="cmss-10">filling</span> specify the content of consecutive locations of the designated list.
Each <span 
class="cmss-10">filling-unit</span> defines one or more blocks of the list which are added to the list in
the order they appear. Each <span 
class="cmss-10">filling-unit</span> can be followed by <span 
class="cmss-10">pointer-initialization</span>s. If
present, all <span 
class="cmss-10">constant-tag</span>s in it are defined to have the virtual address of the
block.
<!--l. 2577--><p class="indent" >   If the <span 
class="cmss-10">filling-unit</span> is a <span 
class="cmss-10">constant-value</span>, then it defines a single element block with the
specified content. If there is a <span 
class="cmss-10">multiplier</span>, then the block is repeated by the specified
value, which must be at least one.
<!--l. 2581--><p class="indent" >   If the <span 
class="cmss-10">filling-unit</span> is <span 
class="cmss-10">compound-block</span>, then it specifies a complete block, the number
of elements must be equal to the calibre of the list. In a <span 
class="cmss-10">value-block</span> the block
elements are specified in a left to right order. One of the elements can be
followed by the <span 
class="cmss-10">times-symbol</span> <span 
class="ec-lmtt-9x-x-102">*</span> indicating that this element should be repeated,
if necessary, to get the required number of block elements. Example: the
<span 
class="cmss-10">filling</span>
  <!--l. 2587--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">stack</span><span 
class="ec-lmtt-9x-x-102">&#8217;(a,b,c,d,e,f,g,h)big</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;block=(</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(1,0*,1)*100</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;).</span>
</div>
<!--l. 2591--><p class="noindent" >adds 100 blocks to the stack <span 
class="ec-lmtt-9x-x-102">big block</span>, each consisting of a <span 
class="ec-lmtt-9x-x-102">1</span>, six <span 
class="ec-lmtt-9x-x-102">0</span>, and another <span 
class="ec-lmtt-9x-x-102">1</span>.
The block can also be written as <span 
class="ec-lmtt-9x-x-102">(1,0*6,1)</span>.
<!--l. 2596--><p class="indent" >   If the <span 
class="cmss-10">compound-block</span> is a <span 
class="cmss-10">selector-block</span>, then the <span 
class="cmss-10">constant-value</span>s are stored at the
location(s) specified by the <span 
class="cmss-10">selector-tag</span>(s). One of the selectors can be replaced by the
<span 
class="cmss-10">times-symbol</span> <span 
class="ec-lmtt-9x-x-102">*</span> to mean that the value should be copied to all selectors not mentioned
explicitly in the <span 
class="cmss-10">selector-block</span>.
<!--l. 2602--><p class="indent" >   If a <span 
class="cmss-10">value-block</span> specifies less elements or more elements than the calibre, a
warning is given. If a <span 
class="cmss-10">selector-block</span> specifies less elements than the calibre, then
those elements must form an end-segment of the block, and a warning is
given.
<!--l. 2607--><p class="indent" >   If the <span 
class="cmss-10">filling-unit</span> is a <span 
class="cmss-10">string-denotation</span>, the string is stored, in compressed form, at
several consecutive locations, forming a <span 
class="cmti-10">string block</span>. As other blocks, the string block
is also identified by the address of its last (rightmost) element. String blocks can be
manipulated by Standard Library rules, see 
<a href="#x1-670008.3">Section 8.3</a>.
<!--l. 2613--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">4.3   </span> <a 
 id="x1-450004.3"></a>Files</h4>
<!--l. 2615--><p class="noindent" ><span 
class="cmss-10">ALEPH </span>files originate from <span 
class="cmss-10">file declaration</span>s. They are associated with file-system
elements through an explicit or implicit call to the Standard Library rule <span 
class="ec-lmtt-9x-x-102">open file</span>,
and detached by the rule <span 
class="ec-lmtt-9x-x-102">close file</span> (see 
<a href="#x1-680008.4">Section 8.4</a>). Files can be opened for <span 
class="cmti-10">reading</span>, when
the content of the associated file is made available for the <span 
class="cmss-10">ALEPH </span>program,
or for <span 
class="cmti-10">writing</span>, when the data written to the <span 
class="cmss-10">file</span> is stored in the associated
computer file. A <span 
class="cmss-10">file</span> cannot be opened for reading and writing simultaneously.
Syntax:
<!--l. 2624--><p class="indent" >
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2624--><p class="indent" >      <span 
class="cmss-10">file-declaration: file-typer, file-description,</span>
   <!--l. 2627--><p class="indent" >      <span 
class="cmss-10">(comma-symbol, file-description)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2628--><p class="indent" >      <span 
class="cmss-10">file-typer: charfile-symbol; datafile-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2629--><p class="indent" >      <span 
class="cmss-10">file-description: file-tag, [file-area], equals-symbol,</span>
   <!--l. 2631--><p class="indent" >      <span 
class="cmss-10">[right-symbol], string-denotation, [right-symbol].</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2632--><p class="indent" >      <span 
class="cmss-10">file-area:</span>
   <!--l. 2634--><p class="indent" >      <span 
class="cmss-10">sub-symbol, list-tag, (semicolon-symbol, list-tag)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, bus-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2637--><p class="indent" >      <span 
class="cmss-10">file-prototype:</span>
   <!--l. 2639--><p class="indent" >      <span 
class="cmss-10">file-typer, file-tag, (comma symbol, file-tag)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point-symbol.</span>
       </dd></dl>
<!--l. 2642--><p class="noindent" >Examples:
  <!--l. 2643--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">charfile</span><span 
class="ec-lmtt-9x-x-102">&#8217;OUTPUT=&#x003E;"result.txt",</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;INPUT="data/survey.txt"&#x003E;.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">datafile</span><span 
class="ec-lmtt-9x-x-102">&#8217;TEMP[tag;link]=</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#x003E;"/tmp/xbcrq.bin"&#x003E;.</span>
</div>
<!--l. 2649--><p class="indent" >   A <span 
class="cmss-10">file-description</span> declares a <span 
class="cmss-10">file</span> of the type indicated by the <span 
class="cmss-10">file-typer</span>. The <span 
class="cmss-10">file-area</span>
can be used in <span 
class="cmss-10">datafile</span> declarations only.
<!--l. 2653--><p class="indent" >   If an <span 
class="cmss-10">ALEPH </span><span 
class="cmss-10">file</span> is not opened explicitly, then the first file operation using
the <span 
class="cmss-10">file-tag</span> tries to associate it with the file-system element specified in the
<span 
class="cmss-10">string-denotation</span>. The optional <span 
class="cmss-10">right-symbol</span>s before and after the <span 
class="cmss-10">string-denotation</span>
restrict this implicit opening: the <span 
class="cmss-10">file</span> is opened for <span 
class="cmti-10">writing </span>only if there is a
<span 
class="cmss-10">right-symbol</span> before the string (indicating the data is allowed to flow into the specified
string), and opened for <span 
class="cmti-10">reading </span>only if there is a <span 
class="cmss-10">right-symbol</span> after the string
(indicating that data can flow from the string). When the <span 
class="cmss-10">file</span> is opened explicitly by
a call of <span 
class="ec-lmtt-9x-x-102">open file</span>, this restriction does not apply.
<!--l. 2664--><p class="indent" >   <span 
class="cmss-10">ALEPH </span>contains no explicit <span 
class="cmss-10">file</span> handling statements: all file handling is done
through rules in the Standard Library, see 
<a href="#x1-680008.4">Section 8.4</a>. Files are read and written
sequentially. When a file is opened for reading, it can be positioned to a previously
visited location; in particular it can be reset and reread from the beginning. Files
opened for writing cannot be positioned. Writing to a file ends when the file is closed,
or when the program terminates.
<!--l. 2672--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.3.1   </span> <a 
 id="x1-460004.3.1"></a>Character files</h5>
<!--l. 2674--><p class="noindent" >An <span 
class="cmss-10">ALEPH </span>character file is a sequence of unicode characters stored using UTF-8
encoding. A <span 
class="cmss-10">charfile</span> returns and accepts unicode characters, converting these
characters to and from UTF-8 encoding on the fly. Standard Library rules allow two
ways of processing a character file.
   <dl class="list2"><dt class="list">
Characterwise: </dt><dd 
class="list">
   <!--l. 2684--><p class="noindent" >when a character file <span 
class="ec-lmtt-9x-x-102">file</span> is opened for reading, each call of the external
   predicate  <span 
class="ec-lmtt-9x-x-102">get char+""file+ch&#x003E;</span> yields  the  next  unicode  character  in  <span 
class="ec-lmtt-9x-x-102">ch</span>,
   failing when the end of file is reached. When opened for writing, the action
   <span 
class="ec-lmtt-9x-x-102">put char+""file+&#x003E;ch</span> adds  the  unicode  character  <span 
class="ec-lmtt-9x-x-102">ch</span> to  the  file  written,
   ignoring the request if <span 
class="ec-lmtt-9x-x-102">ch</span> is illegal or zero.
   </dd><dt class="list">
Linewise: </dt><dd 
class="list">
   <!--l. 2692--><p class="noindent" >the predicate <span 
class="ec-lmtt-9x-x-102">get line+""file+[]stack[]+ch&#x003E;</span> extends the <span 
class="ec-lmtt-9x-x-102">stack</span> with the
   character codes of a complete line in the following way. If there are no more
   characters in the file, then the rule fails, and the <span 
class="ec-lmtt-9x-x-102">stack</span> is unchanged. If the
   next character in the <span 
class="ec-lmtt-9x-x-102">file</span> is a <span 
class="ec-lmtt-9x-x-102">newline</span>, then it is skipped, and <span 
class="ec-lmtt-9x-x-102">ch</span> is set to
   the code of the newline character; if the next character is not a <span 
class="ec-lmtt-9x-x-102">newline</span>, then
   <span 
class="ec-lmtt-9x-x-102">ch</span> is set to the value <span 
class="ec-lmtt-9x-x-102">rest line</span>. Subsequently unicode characters are read
   from <span 
class="ec-lmtt-9x-x-102">file</span> until either the end of file, or until the next character would be
   a <span 
class="ec-lmtt-9x-x-102">newline</span>. Codes of the characters read are put on the top of <span 
class="ec-lmtt-9x-x-102">stack</span> in the
   order they are read, and then <span 
class="ec-lmtt-9x-x-102">get line</span> returns with success.
   <!--l. 2704--><p class="noindent" >The action <span 
class="ec-lmtt-9x-x-102">put line+""file+table[]+&#x003E;ch</span> assumes that all elements in <span 
class="ec-lmtt-9x-x-102">table</span>
   are codes of unicode characters, appends all of these characters to <span 
class="ec-lmtt-9x-x-102">file</span>, and
   also a character with code <span 
class="ec-lmtt-9x-x-102">ch</span>, except when <span 
class="ec-lmtt-9x-x-102">ch</span> is <span 
class="ec-lmtt-9x-x-102">rest line</span>, which is ignored.</dd></dl>
<!--l. 2712--><p class="indent" >   Character files <span 
class="ec-lmtt-9x-x-102">STDIN</span> and <span 
class="ec-lmtt-9x-x-102">STDOUT</span> defined in the Standard Library read from the
standard input and write to the standard output, respectively; typically it means
reading from and writing to the console.
<!--l. 2716--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">4.3.2   </span> <a 
 id="x1-470004.3.2"></a>Data files</h5>
<!--l. 2718--><p class="noindent" >An <span 
class="cmss-10">ALEPH </span>datafile consists of a list of <span 
class="cmti-10">data items</span>. A data item is an integer value
and an indication about its meaning. This indication is either <span 
class="ec-lmtt-9x-x-102">numerical</span>, in which
case the integer value stands for itself, or it is a serial number identifying an <span 
class="cmss-10">ALEPH</span>
<span 
class="cmss-10">list</span>, in which case the integer value is an offset from the left end of that
list.
<!--l. 2724--><p class="indent" >   A data item is written to a <span 
class="cmss-10">datafile</span> by a call of the action <span 
class="ec-lmtt-9x-x-102">put data+""file+&#x003E;item+</span>
<span 
class="ec-lmtt-9x-x-102">&#x003E;type</span>. The data item is constructed from the <span 
class="ec-lmtt-9x-x-102">item</span> and <span 
class="ec-lmtt-9x-x-102">type</span> affixes and from the
<span 
class="cmss-10">file-area</span> in the <span 
class="cmss-10">file-description</span> of the <span 
class="ec-lmtt-9x-x-102">file</span> in the following way.
<!--l. 2729--><p class="indent" >   If the affix <span 
class="ec-lmtt-9x-x-102">type</span> equals <span 
class="ec-lmtt-9x-x-102">numerical</span>, then the data item consists of the value of the
<span 
class="ec-lmtt-9x-x-102">item</span> affix and indication <span 
class="ec-lmtt-9x-x-102">numerical</span>.
<!--l. 2732--><p class="indent" >   If the affix <span 
class="ec-lmtt-9x-x-102">type</span> equals <span 
class="ec-lmtt-9x-x-102">pointer</span>, then the value of <span 
class="ec-lmtt-9x-x-102">item</span> must either be zero
(indicating the null pointer), or be an address in the virtual address space of one of
the lists whose <span 
class="cmss-10">list-tag</span> is enlisted in the <span 
class="cmss-10">file-area</span>. The data item then consists of the
offset from the left end of that list and the serial number of the list in the
<span 
class="cmss-10">file-area</span>.
<!--l. 2738--><p class="indent" >   Data items are read from a datafile by calls of the predicate <span 
class="ec-lmtt-9x-x-102">get data+""file+</span>
<span 
class="ec-lmtt-9x-x-102">item&#x003E;+type&#x003E;</span>. If there are no more data items on the datafile, the predicate fails.
If there is still a data item on <span 
class="ec-lmtt-9x-x-102">file</span>, it is read and the <span 
class="ec-lmtt-9x-x-102">item</span> and <span 
class="ec-lmtt-9x-x-102">type</span> are
reconstructed, using the lists in their order of appearance in the corresponding
<span 
class="cmss-10">file-area</span>.
<!--l. 2745--><p class="indent" >   Datafiles can be used to transfer information from one <span 
class="cmss-10">ALEPH </span>program to
another. Pointers to lists that occupy different virtual addresses in the programs are
adjusted automatically during the transfer.
<!--l. 2750--><p class="indent" >
   <h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-480005"></a>Externals</h3>
<!--l. 2753--><p class="noindent" >External items can be used in the same way as internally declared ones. An
external rule differs from an internal rule in that its body is not given by
the <span 
class="cmss-10">ALEPH </span>construct, but is instead obtained from some external source.
In the same way values of other external items are obtained from external
sources. The necessary information for correct compilation is supplied by the
<span 
class="cmss-10">external-declaration</span>s. Since the correct usage requires special knowledge about the low
level details of the compiled code, <span 
class="cmss-10">external-declaration</span>s are restricted to <span 
class="cmti-10">library</span>
<span 
class="cmti-10">mode </span>only. Many items in the Standard Library are realized by externals.
Syntax:
<!--l. 2763--><p class="indent" >
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2764--><p class="indent" >      <span 
class="cmss-10">external-declaration:</span>
   <!--l. 2766--><p class="indent" >      <span 
class="cmss-10">external-rule-declaration; external-data-declaration.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2768--><p class="indent" >      <span 
class="cmss-10">external-rule-declaration:</span>
   <!--l. 2770--><p class="indent" >      <span 
class="cmss-10">external-symbol, typer, external-rule-description,</span>
   <!--l. 2772--><p class="indent" >      <span 
class="cmss-10">&#x00A0; </span><span 
class="cmss-10">&#x00A0; </span><span 
class="cmss-10">&#x00A0; (comma-symbol, external-rule-description)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2774--><p class="indent" >      <span 
class="cmss-10">external-rule-description:</span>
   <!--l. 2776--><p class="indent" >      <span 
class="cmss-10">rule-head, equals-symbol, string-denotation.</span></dd></dl>
<!--l. 2779--><p class="noindent" >Example:
  <!--l. 2781--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">external</span><span 
class="ec-lmtt-9x-x-102">&#8217;&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;add+&#x003E;x+&#x003E;y+z&#x003E;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;=</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"#3=#1+#2",</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;subtr+&#x003E;x+&#x003E;y+z&#x003E;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;=</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"#3=#1-#2".</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">external</span><span 
class="ec-lmtt-9x-x-102">&#8217;&#8217;</span><span 
class="ec-lmtk-10x-x-92">exit</span><span 
class="ec-lmtt-9x-x-102">&#8217;exit+&#x003E;code</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;=</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"</span><span 
class="ec-lmtt-9x-x-102">_exit(#1)".</span>
</div>
<!--l. 2787--><p class="indent" >   An <span 
class="cmss-10">external-rule-description</span> defines a rule of the type specified by <span 
class="cmss-10">typer</span> and known
to the <span 
class="cmss-10">ALEPH </span>program by the name <span 
class="cmss-10">rule-tag</span>. The <span 
class="cmss-10">string-denotation</span> describes, in an
implementation dependent way, how calls of the <span 
class="cmss-10">rule-tag</span> are handled. It is the
responsibility of the supplier of the <span 
class="cmss-10">string-denotation</span> to see that it translates to
actions which are in accordance with the type of the rule and that no side effects will
occur when a call of the rule fails.
<!--l. 2797--><p class="indent" >   An <span 
class="cmss-10">ALEPH </span>program can access and manipulate system data using
<span 
class="cmss-10">external-data-declaration</span>s. For example, the external table <span 
class="ec-lmtt-9x-x-102">STDARG</span> is pre-filled with the
command line arguments specified when the <span 
class="cmss-10">ALEPH </span>program is launched.
Syntax:
<!--l. 2802--><p class="indent" >
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2804--><p class="indent" >      <span 
class="cmss-10">external-data-declaration:</span>
   <!--l. 2806--><p class="indent" >      <span 
class="cmss-10">external-symbol, data-typer, external-data-description,</span>
   <!--l. 2808--><p class="indent" >      <span 
class="cmss-10">&#x00A0; </span><span 
class="cmss-10">&#x00A0; </span><span 
class="cmss-10">&#x00A0; (comma-symbol, external-data-description)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2810--><p class="indent" >      <span 
class="cmss-10">data-typer: constant-symbol; variable-symbol;</span>
   <!--l. 2812--><p class="indent" >      <span 
class="cmss-10">table-symbol; stack-symbol; file-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2814--><p class="indent" >      <span 
class="cmss-10">external-data-description:</span>
   <!--l. 2816--><p class="indent" >      <span 
class="cmss-10">data-head, equals-symbol, string-denotation.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2818--><p class="indent" >      <span 
class="cmss-10">data-head:</span>
   <!--l. 2820--><p class="indent" >      <span 
class="cmss-10">[field-definition], list-tag;</span>
   <!--l. 2822--><p class="indent" >      <span 
class="cmss-10">constant-tag;</span>
   <!--l. 2824--><p class="indent" >      <span 
class="cmss-10">variable-tag;</span>
   <!--l. 2826--><p class="indent" >      <span 
class="cmss-10">file-tag.</span></dd></dl>
<!--l. 2828--><p class="noindent" >Examples:
  <!--l. 2829--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">external</span><span 
class="ec-lmtt-9x-x-102">&#8217;&#8217;</span><span 
class="ec-lmtk-10x-x-92">table</span><span 
class="ec-lmtt-9x-x-102">&#8217;(head,tail)graph="initGraph".</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">external</span><span 
class="ec-lmtt-9x-x-102">&#8217;&#8217;</span><span 
class="ec-lmtk-10x-x-92">constant</span><span 
class="ec-lmtt-9x-x-102">&#8217;sys</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;time="return</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;time()".</span>
</div>
<!--l. 2834--><p class="indent" >   The <span 
class="cmss-10">string-denotation</span> in the <span 
class="cmss-10">external-data-description</span> specifies, in an implementation
dependent way, how the declared item is accessed. In the external table declaration
above, <span 
class="ec-lmtt-9x-x-102">initGraph</span> is the name of an external procedure which is responsible to prefill
the table with content and set its virtual and actual limits. Using the external
constant <span 
class="ec-lmtt-9x-x-102">sys time</span> as a <span 
class="cmss-10">constant-source</span> either in a <span 
class="cmss-10">transport</span> or as an <span 
class="cmss-10">actual-affix</span> would
supply the actual system time.
<!--l. 2849--><p class="indent" >
   <h3 class="sectionHead"><span class="titlemark">6   </span> <a 
 id="x1-490006"></a>Pragmats</h3>
<!--l. 2852--><p class="noindent" >Pragmats control many aspects of the compilation. The exact position of a pragmat
in the program may be significant. Syntax:
<!--l. 2855--><p class="indent" >
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2856--><p class="indent" >      <span 
class="cmss-10">pragmat: pragmat-symbol, pragmat-item,</span>
   <!--l. 2858--><p class="indent" >      <span 
class="cmss-10">(comma-symbol, pragmat-item)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, point-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2859--><p class="indent" >      <span 
class="cmss-10">pragmat item:</span>
   <!--l. 2861--><p class="indent" >      <span 
class="cmss-10">pragmat-tag, equals-symbol, pragmat-value;</span>
   <!--l. 2863--><p class="indent" >      <span 
class="cmss-10">pragmat-tag, equals-symbol, pragmat-value-list.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2865--><p class="indent" >      <span 
class="cmss-10">pragmat-value-list: open-symbol, pragmat-value,</span>
   <!--l. 2867--><p class="indent" >      <span 
class="cmss-10">(comma-symbol, pragmat-value)</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, close-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 2868--><p class="indent" >      <span 
class="cmss-10">pragmat-value:</span>
   <!--l. 2870--><p class="indent" >      <span 
class="cmss-10">tag;</span>
   <!--l. 2872--><p class="indent" >      <span 
class="cmss-10">integral-denotation;</span>
   <!--l. 2874--><p class="indent" >      <span 
class="cmss-10">string-denotation.</span></dd></dl>
<!--l. 2876--><p class="noindent" >Example:
  <!--l. 2877--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;module=basic,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;require=("mod1","mod2),</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;macro=(show</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;integers,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;value,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;set</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;all</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;bits).</span>
</div>
<!--l. 2882--><p class="noindent" >The <span 
class="cmss-10">tag</span> in a <span 
class="cmss-10">pragmat</span> must be an identifier, it cannot have a qualifier. Similarly, the
<span 
class="cmss-10">string-denotation</span> must be a <span 
class="cmss-10">proper-string</span> and not a <span 
class="cmss-10">manifest-string</span>,
<!--l. 2887--><p class="indent" >   Before a <span 
class="cmss-10">pragmat</span> is evaluated, it is preprocessed: the <span 
class="cmss-10">pragmat-value-list</span> is removed
in the following way.
<!--l. 2890--><p class="indent" >   For every <span 
class="cmss-10">pragmat-value-list</span> which is preceded by an <span 
class="cmss-10">equals-symbol</span> preceded by a
<span 
class="cmss-10">pragmat-tag</span>, the <span 
class="cmss-10">equals-symbol</span> and <span 
class="cmss-10">pragmat-tag</span> are removed and inserted in front of
each <span 
class="cmss-10">pragmat-value</span> in the <span 
class="cmss-10">pragmat-value-list</span>. Subsequently all <span 
class="cmss-10">open-symbol</span>s and
<span 
class="cmss-10">close-symbol</span>s are removed.
<!--l. 2896--><p class="indent" >   The <span 
class="cmss-10">pragmat-item</span> <span 
class="ec-lmtt-9x-x-102">require=("mod1","mod2")</span> thus has the same meaning as
<span 
class="ec-lmtt-9x-x-102">require="mod1", require="mod2"</span>.
<!--l. 2899--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">6.1   </span> <a 
 id="x1-500006.1"></a>Compiler output</h4>
<!--l. 2901--><p class="noindent" >Pragmats in this group control the output of the <span 
class="cmss-10">ALEPH </span>compiler.
<!--l. 2903--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;tab width=</span><span 
class="cmss-10">integer</span>.
   <!--l. 2903--><p class="noindent" >The right hand side of the <span 
class="ec-lmtt-9x-x-102">tab width</span> <span 
class="cmss-10">pragmat</span> must be a positive integer less than
   100. The value will be used as the tab size for program text printing. The default
   value is <span 
class="ec-lmtt-9x-x-102">8</span>.
<!--l. 2908--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;right margin=</span><span 
class="cmss-10">integer</span>.
   <!--l. 2908--><p class="noindent" >Sets the right margin for program text and dictionary printing. The default value
   is <span 
class="ec-lmtt-9x-x-102">120</span>.
<!--l. 2912--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;list=on/off.</span>
   <!--l. 2912--><p class="noindent" >The <span 
class="cmss-10">tag</span> on the right hand side of the <span 
class="ec-lmtt-9x-x-102">list</span> <span 
class="cmss-10">pragmat</span> can be <span 
class="ec-lmtt-9x-x-102">on</span> or <span 
class="ec-lmtt-9x-x-102">off</span>.
   The program text source is printed when this value is <span 
class="ec-lmtt-9x-x-102">on</span>. The default is
   <span 
class="ec-lmtt-9x-x-102">off</span>.
<!--l. 2917--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;dictionary=on/off.</span>
   <!--l. 2917--><p class="noindent" >The <span 
class="cmss-10">tag</span> in the pragmat can be <span 
class="ec-lmtt-9x-x-102">on</span> or <span 
class="ec-lmtt-9x-x-102">off</span>. When it is <span 
class="ec-lmtt-9x-x-102">on</span>, each <span 
class="cmss-10">tag</span> with the
   corresponding source line number is stored in a dictionary. The dictionary,
   if not empty, is printed when the compilation finishes. The default is
   <span 
class="ec-lmtt-9x-x-102">off</span>.
<!--l. 2923--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;warning level=</span><span 
class="cmss-10">integer</span>.
   <!--l. 2923--><p class="noindent" >Set the warning level between <span 
class="ec-lmtt-9x-x-102">0</span> and <span 
class="ec-lmtt-9x-x-102">9</span>, <span 
class="ec-lmtt-9x-x-102">0</span> being the most verbose. The default
   value is 4.
<!--l. 2927--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;error=</span><span 
class="cmss-10">proper-string</span>.
   <!--l. 2927--><p class="noindent" >Issues a compilation error with the given message.
<!--l. 2930--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;warning=</span><span 
class="cmss-10">proper-string</span>.
   <!--l. 2930--><p class="noindent" >Issues a compilation warning at level 9 with the given message.
<!--l. 2933--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">6.2   </span> <a 
 id="x1-510006.2"></a>Compilation pragmats</h4>
<!--l. 2935--><p class="noindent" >Pragmats in this group control aspects of code generation.
<!--l. 2937--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;bounds=on/off.</span>
   <!--l. 2937--><p class="noindent" >Turn index checking on or off. If it is <span 
class="ec-lmtt-9x-x-102">on</span>, list indices are checked to point into the
   actual address space of the list. When it is <span 
class="ec-lmtt-9x-x-102">off</span>, no checking is performed. The
   default value is <span 
class="ec-lmtt-9x-x-102">off</span>. Index checking cannot be turned on or off inside an
   <span 
class="cmss-10">actual-rule</span>.
<!--l. 2943--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;count=on/off.</span>
   <!--l. 2943--><p class="noindent" >Turn profiling on or off. If it is <span 
class="ec-lmtt-9x-x-102">on</span> when compiling an <span 
class="cmss-10">actual-rule</span>, a counter is
   added which counts the number of calls to this rule. These call numbers are
   printed out after the run of the compiled program terminates. The default value is
   <span 
class="ec-lmtt-9x-x-102">off</span>.
<!--l. 2949--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;trace=on/off.</span>
   <!--l. 2949--><p class="noindent" >Turn tracing on or off. If it is <span 
class="ec-lmtt-9x-x-102">on</span> when compiling an <span 
class="cmss-10">actual-rule</span>, code is added
   which prints out the rule name and the value of its <span 
class="cmss-10">in-</span> and <span 
class="cmss-10">inout-affix</span>es whenever
   the rule is called. The default value is <span 
class="ec-lmtt-9x-x-102">off</span>.
<!--l. 2955--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;macro=</span><span 
class="cmss-10">rule-tag</span>.
   <!--l. 2955--><p class="noindent" >In the compilation unit of this <span 
class="cmss-10">pragmat</span>, calls of the <span 
class="cmss-10">actual-rule</span> corresponding
   to the specified <span 
class="cmss-10">rule-tag</span> are implemented by textual replacement. The
   replacement, however, can result in a syntactically incorrect program
   text or in a different semantics, see <a href="#x1-590007.5">Section 7.5</a>.
The <span 
class="cmss-10">rule-tag</span> cannot have a
   qualifier.
<!--l. 2962--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;library mode=on/off.</span>
   <!--l. 2962--><p class="noindent" >Turn library mode on or off. The value determines whether library extensions are
   allowed or not. The default of <span 
class="ec-lmtt-9x-x-102">off</span>.
   <!--l. 2965--><p class="noindent" >If <span 
class="ec-lmtt-9x-x-102">library mode</span> is <span 
class="ec-lmtt-9x-x-102">on</span>, the <span 
class="ec-lmtt-9x-x-102">@</span> character is considered to be a letter, thus private tags
   can be created. Directory listing ignores tags starting with <span 
class="ec-lmtt-9x-x-102">@</span>. More importantly,
   <span 
class="cmss-10">external-declaration</span>s and the <span 
class="ec-lmtt-9x-x-102">front matter</span> and <span 
class="ec-lmtt-9x-x-102">back matter</span> pragmats are allowed
   in library mode only.
<!--l. 2972--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;front matter=</span><span 
class="cmss-10">proper-string</span>.
   <!--l. 2972--><p class="noindent" >The string, without quote marks, is copied to the front of the generated code. In
   the string the character pair <span 
class="ec-lmtt-9x-x-102">%n</span> is replaced by the newline character. This
   pragmat is accepted only when <span 
class="ec-lmtt-9x-x-102">library mode</span> is <span 
class="ec-lmtt-9x-x-102">on</span>. The order in which strings
   from different <span 
class="ec-lmtt-9x-x-102">front matter</span> pragmats appear is unspecified.
<!--l. 2979--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;back matter=</span><span 
class="cmss-10">proper-string</span>.
   <!--l. 2979--><p class="noindent" >This pragmat is handled similarly to <span 
class="ec-lmtt-9x-x-102">front matter</span>, only the supplied string is
   copied to the end of the generated code.
<!--l. 2983--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">6.3   </span> <a 
 id="x1-520006.3"></a>Conditional pragmats</h4>
<!--l. 2991--><p class="noindent" >Conditional pragmats can be used to instruct the compiler to ignore certain parts of
the source file. They have the syntax
<!--l. 2996--><p class="pnoindent" >   <span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;if=</span><span 
class="cmss-10">tag</span>. &nbsp; &#x2026; &nbsp;   <span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;else=</span><span 
class="cmss-10">tag</span>. &nbsp; &#x2026; &nbsp;   <span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;endif=</span><span 
class="cmss-10">tag</span>.
<!--l. 2999--><p class="noindent" >or
<!--l. 3001--><p class="pnoindent" >   <span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;ifnot=</span><span 
class="cmss-10">tag</span>. &nbsp; &#x2026; &nbsp;  <span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;else=</span><span 
class="cmss-10">tag</span>. &nbsp; &#x2026; &nbsp;   <span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;endif=</span><span 
class="cmss-10">tag</span>.
<!--l. 3004--><p class="noindent" >or
<!--l. 3006--><p class="pnoindent" >   <span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;ifdef=</span><span 
class="cmss-10">tag</span>. &nbsp; &#x2026; &nbsp;  <span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;else=</span><span 
class="cmss-10">tag</span>. &nbsp; &#x2026; &nbsp;   <span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;endif=</span><span 
class="cmss-10">tag</span>.
<!--l. 3010--><p class="noindent" >or
<!--l. 3012--><p class="pnoindent" >   <span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;ifndef=</span><span 
class="cmss-10">tag</span>. &nbsp; &#x2026; &nbsp; <span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;else=</span><span 
class="cmss-10">tag</span>. &nbsp; &#x2026; &nbsp;   <span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;endif=</span><span 
class="cmss-10">tag</span>.
<!--l. 3016--><p class="noindent" >The <span 
class="cmss-10">tag</span> in <span 
class="ec-lmtt-9x-x-102">if</span> and <span 
class="ec-lmtt-9x-x-102">ifnot</span> pragmats can be one of <span 
class="ec-lmtt-9x-x-102">compile</span>, <span 
class="ec-lmtt-9x-x-102">module</span>, <span 
class="ec-lmtt-9x-x-102">library mode</span>, <span 
class="ec-lmtt-9x-x-102">list</span>,
and <span 
class="ec-lmtt-9x-x-102">dictionary</span>. The program text between the <span 
class="ec-lmtt-9x-x-102">if</span> and <span 
class="ec-lmtt-9x-x-102">else</span> pragmats is processed if
<span 
class="cmss-10">tag</span> is (or is not) in effect, otherwise it is skipped; and the opposite is true for the text
between <span 
class="ec-lmtt-9x-x-102">else</span> and <span 
class="ec-lmtt-9x-x-102">endif</span>. The <span 
class="ec-lmtt-9x-x-102">else</span> part may be missing. The <span 
class="cmss-10">tag</span> in <span 
class="ec-lmtt-9x-x-102">ifdef</span> and <span 
class="ec-lmtt-9x-x-102">ifndef</span>
pragmats can be any identifier, and the compiler checks if this <span 
class="cmss-10">tag</span> has (has not) been
defined at this point by a declaration, an import prototype, or by a <span 
class="ec-lmtt-9x-x-102">define</span>
pragmat.
<!--l. 3027--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;define=</span><span 
class="cmss-10">tag</span>.
   <!--l. 3027--><p class="noindent" >Mark the specified <span 
class="cmss-10">tag</span> as &#8220;defined&#8221; for use in an <span 
class="ec-lmtt-9x-x-102">ifdef</span> pragmat.
<!--l. 3031--><p class="noindent" >Example for a conditional pragmat:
  <!--l. 3033--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;if=module,include="private",else=module,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;include="public",endif=module.</span>
</div>
<!--l. 3037--><p class="noindent" >It adds the source file <span 
class="ec-lmtt-9x-x-102">private</span> among those to be processed if a <span 
class="ec-lmtt-9x-x-102">module</span> pragmat has
been processed previously, otherwise it adds the <span 
class="ec-lmtt-9x-x-102">public</span> source file.
<!--l. 3042--><p class="indent" >   The <span 
class="ec-lmtt-9x-x-102">if...endif</span> pragmats must be nested properly, and the skipped text must be
syntactically correct (as it is scanned to find the closing pragmat). The <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> symbol
marking the end of the source file is never ignored: conditional pragmats do not
extend over the end of the current file.
<!--l. 3050--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">6.4   </span> <a 
 id="x1-530006.4"></a>Module pragmats</h4>
<!--l. 3052--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;compile=on/off.</span>
   <!--l. 3052--><p class="noindent" >The value of this pragmat is set automatically to facilitate module handling, see
<a href="#x1-540007">Chapter 7</a>. It cannot be manipulated directly in the program text.
<!--l. 3057--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;title=</span><span 
class="cmss-10">proper-string</span>.
   <!--l. 3057--><p class="noindent" >This pragmat is ignored if the pragmat <span 
class="ec-lmtt-9x-x-102">compile</span> is <span 
class="ec-lmtt-9x-x-102">off</span>, otherwise it sets the title
   of the unit under compilation. The default title, if none is specified, is <span 
class="ec-lmtt-9x-x-102">"aleph"</span>.
   The title string is not used explicitly, but it can be included in the program text
   by the <span 
class="cmss-10">manifest-string</span> <span 
class="ec-lmtt-9x-x-102">_title</span><span 
class="ec-lmtt-9x-x-102">_</span>, and it also appears in the intermediate <span 
class="cmtt-10">ALICE</span>
   code, as well as in the linked final code.
<!--l. 3065--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;std library=on/off.</span>
   <!--l. 3065--><p class="noindent" >Enable or disable Standard Library source files. The default value is <span 
class="ec-lmtt-9x-x-102">on</span>. This
   pragmat is accepted only when <span 
class="ec-lmtt-9x-x-102">compile</span> is <span 
class="ec-lmtt-9x-x-102">on</span>.
<!--l. 3069--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;module=</span><span 
class="cmss-10">tag</span>.
   <!--l. 3069--><p class="noindent" >If <span 
class="ec-lmtt-9x-x-102">compile</span> is <span 
class="ec-lmtt-9x-x-102">on</span>, the current compilation unit is defined to be a module and the
   value of the <span 
class="ec-lmtt-9x-x-102">prototype</span> pragmat is set to <span 
class="ec-lmtt-9x-x-102">public</span>. The <span 
class="cmss-10">tag</span> in the pragmat
   defines both the module name and its namespace. After the pragmat has
   been processed, the condition <span 
class="ec-lmtt-9x-x-102">if=module</span> holds in subsequent conditional
   pragmats. If <span 
class="ec-lmtt-9x-x-102">compile</span> is <span 
class="ec-lmtt-9x-x-102">off</span>, the <span 
class="ec-lmtt-9x-x-102">module</span> pragmat specifies the name and
   namespace of the invoked module, and also sets the <span 
class="ec-lmtt-9x-x-102">prototype</span> pragmat to
   <span 
class="ec-lmtt-9x-x-102">import</span>.
<!--l. 3078--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;require=</span><span 
class="cmss-10">proper-string</span>.
   <!--l. 3078--><p class="noindent" >The string specifies a filename, and the <span 
class="cmss-10">ALEPH </span>source in that file must be a
   <span 
class="cmti-10">module</span>. The module is added to the <span 
class="cmti-10">module hierarchy </span>of the <span 
class="cmss-10">unit</span> under
   compilation, and the filename is added, if it is not there, to the pool of the
   <span 
class="cmti-10">required </span>source files to be processed.
<!--l. 3084--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;library=</span><span 
class="cmss-10">proper-string</span>.
   <!--l. 3084--><p class="noindent" >Add the filename specified by the string, if it is not there, to the pool of <span 
class="cmss-10">ALEPH</span>
   source files to be processed as a <span 
class="cmti-10">user library</span>. This <span 
class="cmss-10">pragmat</span> is accepted only if
   <span 
class="ec-lmtt-9x-x-102">compile</span> is <span 
class="ec-lmtt-9x-x-102">on</span>.
<!--l. 3089--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;include=</span><span 
class="cmss-10">proper-string</span>.
   <!--l. 3089--><p class="noindent" >Add the filename specified by the string to the pool of <span 
class="cmss-10">ALEPH </span>source files to be
   processed as an addendum to the current source file.
<!--l. 3093--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;pragmat&#8217;prototype=import/public/none/reverse.</span>
   <!--l. 3093--><p class="noindent" >This pragmat has three possible values: <span 
class="ec-lmtt-9x-x-102">import</span>, <span 
class="ec-lmtt-9x-x-102">public</span>, and <span 
class="ec-lmtt-9x-x-102">none</span>; the default
   value is <span 
class="ec-lmtt-9x-x-102">none</span>. The pragmat determines how the compiler handles <span 
class="cmss-10">prototype</span>s.
   The case <span 
class="ec-lmtt-9x-x-102">prototype=import</span> indicates that the <span 
class="cmss-10">tag</span> in a <span 
class="cmss-10">prototype</span> has a
   declaration outside this <span 
class="cmss-10">unit</span> (and then it cannot occur in a <span 
class="cmss-10">declaration</span> in
   this <span 
class="cmss-10">unit</span>). In the case <span 
class="ec-lmtt-9x-x-102">prototype=public</span> a <span 
class="cmss-10">tag</span> appearing in a <span 
class="cmss-10">prototype</span>
   automatically gets the <span 
class="cmti-10">public </span>flag, and must be declared in this unit
   (in particular, it cannot be imported, and this unit must be a module).
   When <span 
class="ec-lmtt-9x-x-102">prototype=none</span>, prototypes are used for type checking only, and do
   not imply any specific behavior. Finally, <span 
class="ec-lmtt-9x-x-102">prototype=reverse</span> swaps the
   current prototype value between <span 
class="ec-lmtt-9x-x-102">import</span> and <span 
class="ec-lmtt-9x-x-102">public</span>, while keeping <span 
class="ec-lmtt-9x-x-102">none</span>
   unchanged.
<!--l. 3109--><p class="indent" >
   <h3 class="sectionHead"><span class="titlemark">7   </span> <a 
 id="x1-540007"></a>Units</h3>
<!--l. 3112--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">7.1   </span> <a 
 id="x1-550007.1"></a>Source files</h4>
<!--l. 3114--><p class="noindent" >Translating an <span 
class="cmss-10">ALEPH </span><span 
class="cmss-10">unit</span> may require processing several files. The compiler
maintains a pool of source files to be processed. Files in this pool are handled one at
a time: a source is read, processed and closed before opening the next one. Once
opened, a source file is read until either the end of file or an <span 
class="cmss-10">end-symbol</span> is
encountered. Everything after the <span 
class="cmss-10">end-symbol</span> is ignored. Initially the pool contains
the source file(s) submitted for compilation. Additional source files are added to the
pool by the <span 
class="ec-lmtt-9x-x-102">require</span>, <span 
class="ec-lmtt-9x-x-102">library</span>, and <span 
class="ec-lmtt-9x-x-102">include</span> pragmats, see 
<a href="#x1-530006.4">Section 6.4</a>. Processing of library
modules starts only after all non-library sources have been completed. Files provided
by <span 
class="ec-lmtt-9x-x-102">require</span> and <span 
class="ec-lmtt-9x-x-102">include</span> pragmats inside a library module are treated as library
files.
<!--l. 3126--><p class="indent" >   Before opening a source file, all <span 
class="cmss-10">pragmat</span>s are reset to their default values (see 
<a href="#x1-490006">Chapter 6</a>), except for the <span 
class="ec-lmtt-9x-x-102">compile</span> and <span 
class="ec-lmtt-9x-x-102">prototype</span> pragmats, which are handled as
follows.
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 3131--><p class="noindent" >If the source file was submitted directly for compilation, these pragmats are
   set to <span 
class="ec-lmtt-9x-x-102">compile=on</span>, and <span 
class="ec-lmtt-9x-x-102">prototype=none</span>.
   </li>
   <li class="itemize">
   <!--l. 3134--><p class="noindent" >If the source file was added by a <span 
class="ec-lmtt-9x-x-102">request</span> or by a <span 
class="ec-lmtt-9x-x-102">library</span> pragmat, their
   values are <span 
class="ec-lmtt-9x-x-102">compile=off</span> and <span 
class="ec-lmtt-9x-x-102">prototype=import</span>.
   </li>
   <li class="itemize">
   <!--l. 3137--><p class="noindent" >If  the  source  file  was  added  by  an  <span 
class="ec-lmtt-9x-x-102">include</span> pragmat,  both  <span 
class="ec-lmtt-9x-x-102">compile</span> and
   <span 
class="ec-lmtt-9x-x-102">prototype</span> are reset to the values they took when the <span 
class="ec-lmtt-9x-x-102">include</span> pragmat was
   executed.</li></ul>
<!--l. 3143--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">7.2   </span> <a 
 id="x1-560007.2"></a>Modules</h4>
<!--l. 3145--><p class="noindent" >According to the best practice the name of the source file containing the source text
of the module should resemble the module name. It is particularly relevant in <span 
class="cmss-10">ALEPH</span>
as modules are invoked by specifying file names, and not module names.
While not recommended, different module <span 
class="cmss-10">unit</span>s (that is, modules in different
source files) can share the same module name, and, consequently, the same
namespace.
<!--l. 3152--><p class="indent" >   The first non-comment line in a typical <span 
class="cmss-10">ALEPH </span>module is a <span 
class="ec-lmtt-9x-x-102">module</span> <span 
class="cmss-10">pragmat</span>,
specifying both the module name and the namespace. This pragmat is followed by
the public part of the module, or the <span 
class="cmti-10">module head</span>. The head contains the prototypes
of the (public) tags to be exported by, and defined in, this module. The module
source is concluded by the private part, or <span 
class="cmti-10">module body</span>, which defines the
exported items together with the optional auxiliary, unexported items. The
body is enclosed between <span 
class="ec-lmtt-9x-x-102">ifdef=compile</span> and <span 
class="ec-lmtt-9x-x-102">endif=compile</span> conditional
pragmats.
<!--l. 3161--><p class="indent" >   The module is compiled by submitting its source file to the <span 
class="cmss-10">ALEPH </span>compiler. The
source file is opened with <span 
class="ec-lmtt-9x-x-102">compile=on</span> and <span 
class="ec-lmtt-9x-x-102">prototype=none</span>. The leading <span 
class="ec-lmtt-9x-x-102">module</span>
pragmat informs the compiler that it is handling a <span 
class="cmti-10">module</span>. Executing this
pragmat sets the module name (and namespace) as well as the pragmat
<span 
class="ec-lmtt-9x-x-102">prototype</span> to <span 
class="ec-lmtt-9x-x-102">public</span>. The <span 
class="cmss-10">prototype</span>s in the module head specify items to be
exported. The conditional pragmat <span 
class="ec-lmtt-9x-x-102">if=compile</span> enclosing the body holds,
thus the body is processed as well. The compiler checks that items with the
<span 
class="cmti-10">public </span>flag (that is, which have <span 
class="cmss-10">prototype</span>s in the head) are indeed defined
correctly.
<!--l. 3171--><p class="indent" >   When the module is <span 
class="cmti-10">required </span>by a <span 
class="ec-lmtt-9x-x-102">require</span> pragmat, its source is opened with
<span 
class="ec-lmtt-9x-x-102">compile=off</span>. The leading <span 
class="ec-lmtt-9x-x-102">module</span> pragmat specifies the name and namespace of the
invoked module, and sets the <span 
class="ec-lmtt-9x-x-102">prototype</span> pragmat to <span 
class="ec-lmtt-9x-x-102">import</span>. Due to this setting the
subsequent <span 
class="cmss-10">prototype</span>s are considered to have declarations outside the <span 
class="cmss-10">unit</span> under
compilation, as is the case now. Reaching the <span 
class="ec-lmtt-9x-x-102">if=compile</span> conditional pragmat the
condition fails, thus the module body is skipped.
<!--l. 3179--><p class="indent" >   Next to <span 
class="cmss-10">prototype</span>s, the module head may contain additional <span 
class="cmss-10">ALEPH </span>constructs. A
<span 
class="ec-lmtt-9x-x-102">require</span> pragmat in the head automatically re-exports the imported items (using
their original namespace), while declarations in the head are compiled into the
invoking program locally, using the module&#8217;s namespace. It may happen, without any
program, that the head of module <span 
class="ec-lmtt-9x-x-102">A</span> requires module <span 
class="ec-lmtt-9x-x-102">B</span>, while the head of module <span 
class="ec-lmtt-9x-x-102">B</span>
requires module <span 
class="ec-lmtt-9x-x-102">A</span>.
<!--l. 3187--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">7.3   </span> <a 
 id="x1-570007.3"></a>The module hierarchy</h4>
<!--l. 3189--><p class="noindent" >An <span 
class="cmss-10">ALEPH </span><span 
class="cmss-10">unit</span> (a <span 
class="cmti-10">main program </span>or <span 
class="cmti-10">module</span>) may require several modules. Any
module may also require other modules in its head, which modules may also require
additional modules, and so on. The &#8220;<span 
class="ec-lmtt-9x-x-102">X</span> required module <span 
class="ec-lmtt-9x-x-102">Y</span>&#8221; relation defines a
hierarchy among the involved units. In this hierarchy <span 
class="ec-lmtt-9x-x-102">A</span> is <span 
class="cmti-10">below </span><span 
class="ec-lmtt-9x-x-102">B</span> if there is a
&#8220;require&#8221; chain from <span 
class="ec-lmtt-9x-x-102">A</span> to <span 
class="ec-lmtt-9x-x-102">B</span>. Resources provided by module <span 
class="ec-lmtt-9x-x-102">B</span> are automatically
available for every unit below <span 
class="ec-lmtt-9x-x-102">B</span> in this hierarchy.
<!--l. 3197--><p class="indent" >   When <span 
class="ec-lmtt-9x-x-102">A</span> needs a resource, that resource might be provided by several modules.
In the basic case, among the potential offers that module is chosen which
is above <span 
class="ec-lmtt-9x-x-102">A</span> and has the <span 
class="cmti-10">smallest rank</span>, that is, which requires the smallest
number of &#8220;require&#8221; hops to reach it from <span 
class="ec-lmtt-9x-x-102">A</span>. By default, <span 
class="ec-lmtt-9x-x-102">A</span> has rank zero above
itself.
<!--l. 3203--><p class="indent" >   The same module can be required by different modules, in which case this module
appears in the hierarchy at several places. Nevertheless, it is still processed only once.
Modules added as <span 
class="cmti-10">user library </span>using the <span 
class="ec-lmtt-9x-x-102">library</span> pragmat, and modules required
recursively by these library modules, form a second hierarchy. Elements of this
hierarchy are <span 
class="cmti-10">above </span>all elements of the first one by a very high hop number. Using
this arrangement, resources defined by a library module are available to every plain
module, but only as a last resort: if no other definition can be found, then consult the
offers in library modules. On the top of the user library hierarchy there is still
another hierarchy: the Standard Library providing the realization of many basic
operations.
<!--l. 3215--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">7.4   </span> <a 
 id="x1-580007.4"></a>Tag definitions</h4>
<!--l. 3217--><p class="noindent" >Global <span 
class="cmss-10">tag</span>s can have a <span 
class="cmti-10">qualifier </span>specifying the <span 
class="cmti-10">namespace </span>this tag belongs to, such as
<span 
class="ec-lmtt-9x-x-102">q::x</span>, where <span 
class="ec-lmtt-9x-x-102">q</span> is the qualifier. Without providing an explicit qualifier, <span 
class="cmss-10">tag</span>s in
definitions (<span 
class="cmss-10">declaration</span>s and import <span 
class="cmss-10">prototype</span>s) inherit the actual namespace. This
namespace is empty in the main program; otherwise it is the same as the module
name as defined by the <span 
class="ec-lmtt-9x-x-102">module</span> pragmat. The explicit qualifier, if present, cannot be
empty. A <span 
class="cmss-10">tag</span> with a qualifier identifies only those definitions where the same implicit
or explicit qualifier is used.
<!--l. 3227--><p class="indent" >   The process of finding the defining occurrence of a <span 
class="cmss-10">tag</span> in the module hierarchy
goes as follows. Suppose the <span 
class="cmss-10">tag</span> with identifier <span 
class="ec-lmtt-9x-x-102">x</span> occurs in <span 
class="ec-lmtt-9x-x-102">A</span>, where <span 
class="ec-lmtt-9x-x-102">A</span> is either a
module or the main program, and the <span 
class="cmss-10">tag</span> has qualifier <span 
class="ec-lmtt-9x-x-102">q</span> which is either explicit or
implicit. (In case <span 
class="ec-lmtt-9x-x-102">A</span> is the main program, the implicit qualifier is empty.) First, check
modules which are <span 
class="cmti-10">strictly below </span><span 
class="ec-lmtt-9x-x-102">A</span>. If some of them defines <span 
class="ec-lmtt-9x-x-102">q::x</span> (where the qualifier
in the definition can be either explicit or implicit), then the one with the <span 
class="cmti-10">smallest</span>
<span 
class="cmti-10">absolute rank </span>(having the minimal number of &#8220;require&#8221; hops from the main program,
see 
<a href="#x1-570007.3">Section 7.3</a>) is chosen.
<!--l. 3238--><p class="indent" >   If this step does not give result, then consider <span 
class="ec-lmtt-9x-x-102">A</span> and the modules <span 
class="cmti-10">above </span><span 
class="ec-lmtt-9x-x-102">A</span>. If <span 
class="ec-lmtt-9x-x-102">x</span> has
no explicit qualifier, then it matches any definition of <span 
class="ec-lmtt-9x-x-102">x</span> in those modules; if <span 
class="ec-lmtt-9x-x-102">x</span> has an
explicit qualifier <span 
class="ec-lmtt-9x-x-102">q::x</span>, then it matches only those definitions where the qualifier is
(explicitly or implicitly set to) <span 
class="ec-lmtt-9x-x-102">q</span>. Among the candidate modules that one is chosen
which has the smallest rank above <span 
class="ec-lmtt-9x-x-102">A</span>. If this search does not yield a unique definition,
then it is an error.
<!--l. 3248--><p class="indent" >   This procedure is illustrated in the table below. Both modules in source files <span 
class="ec-lmtt-9x-x-102">"f1"</span>
and <span 
class="ec-lmtt-9x-x-102">"f2"</span> have the first line
  <!--l. 3250--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;module=t.</span>
</div>
<!--l. 3253--><p class="noindent" >which sets the module name to <span 
class="ec-lmtt-9x-x-102">t</span> for both; <span 
class="ec-lmtt-9x-x-102">"f2"</span> is required by the module in <span 
class="ec-lmtt-9x-x-102">"f1"</span>,
and <span 
class="ec-lmtt-9x-x-102">"f1"</span> is required by the main program. Tags (with the indicated explicit qualifier)
in the &#8220;definition&#8221; column are defined in the module head; the numbers
next to them identify the definition. Numbers in the &#8220;usage&#8221; column show their
defining occurrences.

<div class="center" 
>
<!--l. 3261--><p class="noindent" >
<div class="tabular"> <table id="TBL-6" class="tabular" 
><colgroup id="TBL-6-1g"><col 
id="TBL-6-1"><col 
id="TBL-6-2"><col 
id="TBL-6-3"><col 
id="TBL-6-4"><col 
id="TBL-6-5"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-1-1"  
class="td11"> file </td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-1-2"  
class="td11">require</td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-1-3"  
class="td11">module</td><td  style="white-space:nowrap; text-align:left;" id="TBL-6-1-4"  
class="td11">definition   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-6-1-5"  
class="td11">usage                  </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-2-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">"f2"</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-2-2"  
class="td11">      </td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-2-3"  
class="td11">   <span 
class="ec-lmtt-9x-x-102">t   </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-6-2-4"  
class="td11"> <span 
class="ec-lmtt-9x-x-102">b</span>
<span 
class="cmr-7">(1)</span>   <span 
class="ec-lmtt-9x-x-102">v</span>
    <span 
class="cmr-7">(2)</span>         </td><td  style="white-space:nowrap; text-align:left;" id="TBL-6-2-5"  
class="td11"> <span 
class="ec-lmtt-9x-x-102">a</span>
<span 
class="cmr-7">(3)</span>   <span 
class="ec-lmtt-9x-x-102">v</span>
    <span 
class="cmr-7">(4)</span>   <span 
class="ec-lmtt-9x-x-102">x</span>
       <span 
class="cmr-7">(6)</span>               </td>
</tr><tr 
class="vspace" style="font-size:8.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-3-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">"f1"</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-3-2"  
class="td11"> <span 
class="ec-lmtt-9x-x-102">"f2" </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-3-3"  
class="td11">   <span 
class="ec-lmtt-9x-x-102">t   </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-6-3-4"  
class="td11"> <span 
class="ec-lmtt-9x-x-102">a</span>
<span 
class="cmr-7">(3)</span>   <span 
class="ec-lmtt-9x-x-102">v</span>
    <span 
class="cmr-7">(4)</span>         </td><td  style="white-space:nowrap; text-align:left;" id="TBL-6-3-5"  
class="td11"> <span 
class="ec-lmtt-9x-x-102">a</span>
<span 
class="cmr-7">(3)</span>   <span 
class="ec-lmtt-9x-x-102">b</span>
    <span 
class="cmr-7">(1)</span>   <span 
class="ec-lmtt-9x-x-102">x</span>
       <span 
class="cmr-7">(6)</span>               </td>
</tr><tr 
class="vspace" style="font-size:8.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-6-4-1"  
class="td11">main</td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-4-2"  
class="td11"> <span 
class="ec-lmtt-9x-x-102">"f1" </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-6-4-3"  
class="td11">      </td><td  style="white-space:nowrap; text-align:left;" id="TBL-6-4-4"  
class="td11"> <span 
class="ec-lmtt-9x-x-102">a</span>
<span 
class="cmr-7">(5)</span>  <span 
class="ec-lmtt-9x-x-102">t::x</span>
    <span 
class="cmr-7">(6)</span>     <span 
class="ec-lmtt-9x-x-102">x</span>
        <span 
class="cmr-7">(7)</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-6-4-5"  
class="td11"> <span 
class="ec-lmtt-9x-x-102">a</span>
<span 
class="cmr-7">(5)</span>  <span 
class="ec-lmtt-9x-x-102">t::a</span>
    <span 
class="cmr-7">(3)</span>     <span 
class="ec-lmtt-9x-x-102">b</span>
        <span 
class="cmr-7">(1)</span>   <span 
class="ec-lmtt-9x-x-102">v</span>
            <span 
class="cmr-7">(4)</span>   <span 
class="ec-lmtt-9x-x-102">x</span>
               <span 
class="cmr-7">(7)</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr>
</table></div></div>
<!--l. 3279--><p class="noindent" >The <span 
class="cmss-10">tag</span> <span 
class="ec-lmtt-9x-x-102">a</span> used in the module from file <span 
class="ec-lmtt-9x-x-102">"f1"</span> (and also in the module from file <span 
class="ec-lmtt-9x-x-102">"f2"</span>)
has the implicit qualifier <span 
class="ec-lmtt-9x-x-102">t</span>, therefore it does not match definition (5) in the main
program. The <span 
class="cmss-10">tag</span> <span 
class="ec-lmtt-9x-x-102">x</span> in these modules matches definition (6) of <span 
class="ec-lmtt-9x-x-102">t::x</span> in the main
program, but not definition (7) of <span 
class="ec-lmtt-9x-x-102">x</span> (which is without qualifier). Observe that
definition (2) is not used at all; each occurence of <span 
class="ec-lmtt-9x-x-102">v</span> in <span 
class="ec-lmtt-9x-x-102">"f2"</span> uses definition (4) from
<span 
class="ec-lmtt-9x-x-102">"f1"</span>.
<!--l. 3288--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">7.5   </span> <a 
 id="x1-590007.5"></a>Macro rules</h4>
<!--l. 3290--><p class="noindent" >To improve efficiency, calls of rules declared in the same compilation <span 
class="cmss-10">unit</span> can be
implemented by textual substitution. When the rule name appears in a <span 
class="ec-lmtt-9x-x-102">macro</span>
<span 
class="cmss-10">pragmat</span> (<a href="#x1-510006.2">Section 6.2</a>), calls to this rule in the current compilation unit are
replaced by the <span 
class="cmss-10">rule-body</span>, and replacing the <span 
class="cmss-10">formal-affix</span>es by the actual ones. The
substitution, however, can result in a syntactically incorrect program text, or in a
different semantics. The following examples illustrate these cases and explain the
additional restrictions a macro rule must satisfy.
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 3303--><p class="noindent" >In a macro, a formal <span 
class="cmss-10">in-variable</span> affix cannot be assigned to. Indeed, suppose the
   rule <span 
class="ec-lmtt-9x-x-102">macro</span> is defined as
     <!--l. 3306--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;macro+&#x003E;x+y&#x003E;:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;1-&#x003E;y-&#x003E;x,x-&#x003E;y.</span>
</div>
   <!--l. 3309--><p class="noindent" >After textual substitution the replacement can be syntactically wrong as
   in
   <!--l. 3312--><p class="noindent" >   <span 
class="ec-lmtt-9x-x-102">macro+1+z</span>      <span 
class="cmsy-10">&#x21D2;   </span><span 
class="ec-lmtt-9x-x-102">(1-&#x003E;z-&#x003E;1,1-&#x003E;z)</span>.
   </li>
   <li class="itemize">
   <!--l. 3314--><p class="noindent" >There is a problem with the <span 
class="cmss-10">dummy-symbol</span> <span 
class="ec-lmtt-9x-x-102">#</span> as <span 
class="cmss-10">actual-affix</span>. Using the
   same <span 
class="ec-lmtt-9x-x-102">macro</span> rule as above, the following substitution results in incorrect
   syntax:
   <!--l. 3318--><p class="noindent" >   <span 
class="ec-lmtt-9x-x-102">macro+u+#</span>      <span 
class="cmsy-10">&#x21D2;   </span><span 
class="ec-lmtt-9x-x-102">(u-&#x003E;#-&#x003E;u, u-&#x003E;#)</span>.
   </li>
   <li class="itemize">
   <!--l. 3320--><p class="noindent" >While a macro rule can have a variable number of affixes, neither <span 
class="ec-lmtt-9x-x-102">shift affix</span>
   <span 
class="ec-lmtt-9x-x-102">block</span> nor <span 
class="ec-lmtt-9x-x-102">get affix blockno</span> can be used in a macro text as illustrated
   by the following example. The rule <span 
class="ec-lmtt-9x-x-102">is zero</span> below checks whether one
   of its arguments has value zero; while rule <span 
class="ec-lmtt-9x-x-102">math</span> computes the product
   of its arguments if none of them is zero, otherwise it computes their
   sum:
     <!--l. 3326--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">question</span><span 
class="ec-lmtt-9x-x-102">&#8217;is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;zero+@+&#x003E;x:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;x=0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;shift</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;affix</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;block+@,:is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;zero.</span>
     <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;math+y&#x003E;+@+&#x003E;x:</span>
     <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;zero+@,0-&#x003E;y,(nxt:add+x+y+y,shift</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;affix</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;block+@,:nxt;+);</span>
     <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;1-&#x003E;y,(nxt:mult+x+y+y,shift</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;affix</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;block+@,:nxt;+).</span>
</div>
   <!--l. 3333--><p class="noindent" >If <span 
class="ec-lmtt-9x-x-102">is zero</span> were substituted verbatim in rule <span 
class="ec-lmtt-9x-x-102">math</span>, it would shift out all affixes
   and then the computation in <span 
class="ec-lmtt-9x-x-102">math</span> would not be carried over. Similarly, suppose
   the rule <span 
class="ec-lmtt-9x-x-102">macro</span> is defined as
     <!--l. 3337--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;macro+a&#x003E;+@+&#x003E;q:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;q-&#x003E;b,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;get</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;affix</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;blocno+a+@.</span>
</div>
   <!--l. 3340--><p class="noindent" >where <span 
class="ec-lmtt-9x-x-102">b</span> is some global variable. After verbatim substitution the repeat block
   could vanish completely causing syntax error:
   <!--l. 3344--><p class="noindent" >   <span 
class="ec-lmtt-9x-x-102">macro+b+2+T</span>    <span 
class="cmsy-10">&#x21D2;   </span><span 
class="ec-lmtt-9x-x-102">(2-&#x003E;b,get affix blockno+b+2+T)</span>
   </li>
   <li class="itemize">
   <!--l. 3347--><p class="noindent" >Standard selectors are not carried over. Example:
     <!--l. 3348--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;macro+t[]+x&#x003E;:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;t[ptr]-&#x003E;x.</span>
</div>
   <!--l. 3352--><p class="noindent" >where <span 
class="ec-lmtt-9x-x-102">ptr</span> is some global variable. After textual substitution
   <!--l. 3354--><p class="noindent" >   <span 
class="ec-lmtt-9x-x-102">macro+S+z</span>      <span 
class="cmsy-10">&#x21D2;   </span><span 
class="ec-lmtt-9x-x-102">(S[ptr]-&#x003E;z)</span>
   <!--l. 3358--><p class="noindent" >while <span 
class="ec-lmtt-9x-x-102">S</span> might not have a standard selector.
   </li>
   <li class="itemize">
   <!--l. 3360--><p class="noindent" >Out affixes get their values only after returning from a call. The rule call
   <span 
class="ec-lmtt-9x-x-102">swap+x+y+x</span> swaps the value of <span 
class="ec-lmtt-9x-x-102">x</span> and <span 
class="ec-lmtt-9x-x-102">y</span> if it is defined as
     <!--l. 3364--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;swap+&#x003E;a+&#x003E;b&#x003E;+c&#x003E;:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;b-&#x003E;c,a-&#x003E;b.</span>
</div>
   <!--l. 3367--><p class="noindent" >but as a macro it does <span 
class="ec-lmtt-9x-x-102">(y-&#x003E;x,x-&#x003E;y)</span>, with a completely different result.</li></ul>
<!--l. 3373--><p class="indent" >   Items a) and c) are checked during compilation, and error messages are issued if
the conditions are violated. For b), if the actual affix is the dummy affix <span 
class="ec-lmtt-9x-x-102">#</span>, the formal
out affix in the macro is replaced by a newly created anonymous local variable (which
may be removed during optimization). For d) the macro substitution mechanism
remembers the last substituted formal affix and uses that value for the standard
selector what the rule call would do. For e) and other side effects, no warning is, or
can be, given, but substitution clearly changes the semantics. So use macros with
care.
<!--l. 3385--><p class="indent" >
   <h3 class="sectionHead"><span class="titlemark">8   </span> <a 
 id="x1-600008"></a>Standard Library</h3>
<!--l. 3388--><p class="noindent" >Items in the Standard Library can be used in all programs without further
notice. Any of these items, except for the variable affix handling rules, can be
redeclared.
<!--l. 3392--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">8.1   </span> <a 
 id="x1-610008.1"></a>Integers</h4>
<!--l. 3396--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.1.1   </span> <a 
 id="x1-620008.1.1"></a>Constants</h5>
<!--l. 3398--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">constant</span><span 
class="ec-lmtt-9x-x-102">&#8217; max int, min int, int size.</span>
   <!--l. 3398--><p class="noindent" ><span 
class="ec-lmtt-9x-x-102">max int</span> is the largest representable integer, <span 
class="ec-lmtt-9x-x-102">min int</span> is the smallest (most
   negative) representable integer. <span 
class="ec-lmtt-9x-x-102">int size</span> is the number of decimal digits
   necessary to represent <span 
class="ec-lmtt-9x-x-102">max int</span>.
<!--l. 3403--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.1.2   </span> <a 
 id="x1-630008.1.2"></a>Arithmetical operations</h5>
<!--l. 3405--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;add+&#x003E;x+&#x003E;y+z&#x003E;, subtr+&#x003E;x+&#x003E;y+z&#x003E;, mult+&#x003E;x+&#x003E;y+z&#x003E;, div+&#x003E;x+&#x003E;y+z&#x003E;.</span>
   <!--l. 3405--><p class="noindent" >These functions compute the standard arithmetic functions yielding the result in
   the last affix <span 
class="ec-lmtt-9x-x-102">x+y-&#x003E;z</span>; <span 
class="ec-lmtt-9x-x-102">x-y-&#x003E;z</span>; <span 
class="ec-lmtt-9x-x-102">x*y-&#x003E;z</span>; integer part of <span 
class="ec-lmtt-9x-x-102">x/y-&#x003E;z</span>.
<!--l. 3410--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;addmult+&#x003E;x+&#x003E;y+&#x003E;z+u&#x003E;, divrem+&#x003E;x+&#x003E;y+q&#x003E;+r&#x003E;.</span>
   <!--l. 3410--><p class="noindent" ><span 
class="ec-lmtt-9x-x-102">addmult</span> yields <span 
class="ec-lmtt-9x-x-102">x*y+z</span> in <span 
class="ec-lmtt-9x-x-102">u</span>; <span 
class="ec-lmtt-9x-x-102">divrem</span> returns the quotient in <span 
class="ec-lmtt-9x-x-102">q</span> and the remainder in <span 
class="ec-lmtt-9x-x-102">r</span>:
   <span 
class="ec-lmtt-9x-x-102">x/y-&#x003E;q</span>, <span 
class="ec-lmtt-9x-x-102">x-y*q-&#x003E;r</span>.
<!--l. 3414--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;incr+&#x003E;x&#x003E;, decr+&#x003E;x&#x003E;, get abs+&#x003E;x+y&#x003E;, min+&#x003E;x+&#x003E;y&#x003E;, max+&#x003E;x+&#x003E;y&#x003E;.</span>
   <!--l. 3414--><p class="noindent" ><span 
class="ec-lmtt-9x-x-102">incr</span> increases, <span 
class="ec-lmtt-9x-x-102">decr</span> decreaseseases its affix by one; <span 
class="ec-lmtt-9x-x-102">get abs</span> yields the absolute
   value of <span 
class="ec-lmtt-9x-x-102">x</span> in <span 
class="ec-lmtt-9x-x-102">y</span>; <span 
class="ec-lmtt-9x-x-102">min</span> and <span 
class="ec-lmtt-9x-x-102">max</span> yield <span 
class="ec-lmtt-9x-x-102">min(x,y)</span> and <span 
class="ec-lmtt-9x-x-102">max(x,y)</span>, respectively, in
   <span 
class="ec-lmtt-9x-x-102">y</span>.
<!--l. 3419--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.1.3   </span> <a 
 id="x1-640008.1.3"></a>Comparison</h5>
<!--l. 3421--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">question</span><span 
class="ec-lmtt-9x-x-102">&#8217;less+&#x003E;p+&#x003E;q, lseq+&#x003E;p+&#x003E;q, equal+&#x003E;p+&#x003E;q, not equal+&#x003E;p+&#x003E;q,</span>
<!--l. 3422--><p class="noindent" >         <span 
class="ec-lmtt-9x-x-102">mreq+&#x003E;p+&#x003E;q, more+&#x003E;p+&#x003E;q.</span>
   <!--l. 3423--><p class="noindent" >These rules succeed if the corresponding relation holds between the integer values
   <span 
class="ec-lmtt-9x-x-102">p</span> and <span 
class="ec-lmtt-9x-x-102">q</span>.
<!--l. 3427--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">question</span><span 
class="ec-lmtt-9x-x-102">&#8217;is+&#x003E;x, is true+&#x003E;x.</span>
   <!--l. 3427--><p class="noindent" >succeeds if <span 
class="ec-lmtt-9x-x-102">x</span> is <span 
class="cmti-10">not </span>zero, equivalent to the <span 
class="cmss-10">comparison</span> <span 
class="ec-lmtt-9x-x-102">x!=0</span>.
<!--l. 3430--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">question</span><span 
class="ec-lmtt-9x-x-102">&#8217;is false+&#x003E;x.</span>
   <!--l. 3430--><p class="noindent" >succeeds if <span 
class="ec-lmtt-9x-x-102">x</span> is zero, equivalent to the <span 
class="cmss-10">comparison</span> <span 
class="ec-lmtt-9x-x-102">x=0</span>.
<!--l. 3433--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.1.4   </span> <a 
 id="x1-650008.1.4"></a>Bit operations</h5>
<!--l. 3435--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;bool invert+&#x003E;x+y&#x003E;.</span>
   <!--l. 3435--><p class="noindent" >The bitwise complement of <span 
class="ec-lmtt-9x-x-102">x</span> is stored in <span 
class="ec-lmtt-9x-x-102">y</span>.
<!--l. 3438--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;bool and+&#x003E;x+&#x003E;y+&#x003E;z&#x003E;, bool or+&#x003E;x+&#x003E;y+z&#x003E;, bool xor+&#x003E;x+&#x003E;y+z&#x003E;.</span>
   <!--l. 3438--><p class="noindent" >Bitwise Boolean operations.
<!--l. 3441--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;left clear+&#x003E;x&#x003E;+&#x003E;n.</span>
   <!--l. 3441--><p class="noindent" >Shift <span 
class="ec-lmtt-9x-x-102">x</span> (including the sign bit) left by <span 
class="ec-lmtt-9x-x-102">n</span> positions; zeros enters from right. <span 
class="ec-lmtt-9x-x-102">n</span> must
   be positive and at most 32.
<!--l. 3445--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;right clear+&#x003E;x&#x003E;+&#x003E;n.</span>
   <!--l. 3445--><p class="noindent" >Shift <span 
class="ec-lmtt-9x-x-102">x</span> (including the sign bit) right by <span 
class="ec-lmtt-9x-x-102">n</span> positions; zeros enter from left. <span 
class="ec-lmtt-9x-x-102">n</span> must
   be positive and at most 32.
<!--l. 3449--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">8.2   </span> <a 
 id="x1-660008.2"></a>Tables and stacks</h4>
<!--l. 3451--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">question</span><span 
class="ec-lmtt-9x-x-102">&#8217;was+T[]+&#x003E;p.</span>
   <!--l. 3451--><p class="noindent" >Succeeds if <span 
class="ec-lmtt-9x-x-102">p</span> is between <span 
class="ec-lmtt-9x-x-102">&#x003C;&#x003C;T</span> and <span 
class="ec-lmtt-9x-x-102">&#x003E;&#x003E;T</span>, inclusive. This rule can be used to test if <span 
class="ec-lmtt-9x-x-102">p</span>
   points into the list <span 
class="ec-lmtt-9x-x-102">T</span>.
<!--l. 3455--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;next+T[]+&#x003E;p&#x003E;, previous+T[]+&#x003E;p&#x003E;.</span>
   <!--l. 3455--><p class="noindent" >The calibre of <span 
class="ec-lmtt-9x-x-102">T</span> is added to, or subtracted from, <span 
class="ec-lmtt-9x-x-102">p</span>, moving the pointer to the next
   or previous block, respectively.
<!--l. 3459--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;list length+T[]+len&#x003E;.</span>
   <!--l. 3459--><p class="noindent" >The number of actual elements (not blocks) in <span 
class="ec-lmtt-9x-x-102">T</span> is yielded in <span 
class="ec-lmtt-9x-x-102">len</span>. This value
   equals <span 
class="ec-lmtt-9x-x-102">-1+&#x003C;&#x003E;T+&#x003E;&#x003E;T-&#x003C;&#x003C;T</span>.
<!--l. 3463--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;unstack+[]st[].</span>
   <!--l. 3463--><p class="noindent" >The stack <span 
class="ec-lmtt-9x-x-102">st</span> must contain at least one block. The right-most block of <span 
class="ec-lmtt-9x-x-102">st</span> is
   removed; this operation decreases <span 
class="ec-lmtt-9x-x-102">&#x003E;&#x003E;st</span> y <span 
class="ec-lmtt-9x-x-102">&#x003C;&#x003E;st</span>. The location of the removed block
   can be reclaimed by an <span 
class="cmss-10">extension</span>, its contents are lost.
<!--l. 3469--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;unstack to+[]st[]+&#x003E;ptr.</span>
   <!--l. 3469--><p class="noindent" >Zero or more blocks are removed from the right hand side of <span 
class="ec-lmtt-9x-x-102">st</span>, so that
   <span 
class="ec-lmtt-9x-x-102">&#x003E;&#x003E;st</span> becomes equal to <span 
class="ec-lmtt-9x-x-102">ptr</span>. If this cannot be done, an error message
   follows.
<!--l. 3483--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;scratch+[]st[].</span>
   <!--l. 3483--><p class="noindent" >All blocks in <span 
class="ec-lmtt-9x-x-102">st</span> are removed. The locations can be reclaimed through
   <span 
class="cmss-10">extension</span>s, but the contents are lost. After this operation <span 
class="ec-lmtt-9x-x-102">&#x003E;&#x003E;st</span> will be equal to
   <span 
class="ec-lmtt-9x-x-102">-1+&#x003C;&#x003C;st-&#x003C;&#x003E;st</span>.
<!--l. 3488--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;release+[]st[].</span>
   <!--l. 3488--><p class="noindent" >All blocks in <span 
class="ec-lmtt-9x-x-102">st</span> are removed, as in a call of <span 
class="ec-lmtt-9x-x-102">scratch</span>. Additionally, the memory
   allocated for <span 
class="ec-lmtt-9x-x-102">st</span> is also returned to the operating system.
<!--l. 3493--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;request space+[]st[]+&#x003E;n</span>
   <!--l. 3493--><p class="noindent" >After a successful return the allocated actual memory of the stack <span 
class="ec-lmtt-9x-x-102">st</span> is
   guaranteed to hold <span 
class="ec-lmtt-9x-x-102">n</span> additional locations. The rule fails if the requested memory
   would go beyond the virtual limits of <span 
class="ec-lmtt-9x-x-102">st</span>, or the operating system cannot provide
   the requested memory.
<!--l. 3499--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">8.3   </span> <a 
 id="x1-670008.3"></a>Strings</h4>
<!--l. 3501--><p class="noindent" >Strings are stored in lists as special <span 
class="cmti-10">string blocks</span>. In a list a string block is identified
by the address of its last (rightmost) element, and contains the characters of the
string in a packed form. All string handling rules assume that the affixes determine a
string block; in case they discover some discrepancy, the program run is
aborted.
<!--l. 3507--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;string length+T[]+&#x003E;p+n&#x003E;.</span>
   <!--l. 3507--><p class="noindent" >The pointer <span 
class="ec-lmtt-9x-x-102">p</span> must point to a string block in <span 
class="ec-lmtt-9x-x-102">T</span>. The number of unicode characters
   in the string is yielded in <span 
class="ec-lmtt-9x-x-102">n</span>.
<!--l. 3511--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;string width+T[]+&#x003E;p+n&#x003E;.</span>
   <!--l. 3511--><p class="noindent" >The number of locations in the string block (the block size) is yielded in
   <span 
class="ec-lmtt-9x-x-102">n</span>.
<!--l. 3515--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;previous string+T[]+&#x003E;p&#x003E;</span>
   <!--l. 3515--><p class="noindent" >The pointer <span 
class="ec-lmtt-9x-x-102">p</span> must point to a string block; <span 
class="ec-lmtt-9x-x-102">p</span> is moved to the (possibly non
   existing) location just before the string block. It is achieved by subtracting <span 
class="ec-lmtt-9x-x-102">string</span>
   <span 
class="ec-lmtt-9x-x-102">width</span> from <span 
class="ec-lmtt-9x-x-102">p</span>.
<!--l. 3520--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;compare string+T1[]+&#x003E;p1+T2[]+&#x003E;p2+cmp&#x003E;.</span>
   <!--l. 3520--><p class="noindent" >The two strings are compared lexicographically. If the first string is smaller than
   the second one, then <span 
class="ec-lmtt-9x-x-102">cmp</span> will be a negative number; if they are equal then <span 
class="ec-lmtt-9x-x-102">cmp</span> will
   be zero; if the first string is greater than the second one then <span 
class="ec-lmtt-9x-x-102">cmp</span> will be a
   positive number.
<!--l. 3526--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;compare string n+T1[]+&#x003E;p1+T2[]+&#x003E;p2+&#x003E;n+cmp&#x003E;.</span>
   <!--l. 3526--><p class="noindent" >The two strings are compared lexicographically, but before comparison they
   are truncated to contain at most <span 
class="ec-lmtt-9x-x-102">n</span> characters. The value of <span 
class="ec-lmtt-9x-x-102">n</span> must be
   non-negative.
<!--l. 3531--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">question</span><span 
class="ec-lmtt-9x-x-102">&#8217;string elem+T[]+&#x003E;p+&#x003E;n+c&#x003E;.</span>
   <!--l. 3531--><p class="noindent" >The pointer <span 
class="ec-lmtt-9x-x-102">p</span> must point to a string block in <span 
class="ec-lmtt-9x-x-102">T</span>. If the string has an <span 
class="ec-lmtt-9x-x-102">n</span>-th character
   counting from 0, the code of that character is yielded in <span 
class="ec-lmtt-9x-x-102">c</span> and <span 
class="ec-lmtt-9x-x-102">string elem</span>
   succeeds; otherwise it fails.
<!--l. 3536--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;unstack string+[]st[].</span>
   <!--l. 3536--><p class="noindent" >The last block in the stack <span 
class="ec-lmtt-9x-x-102">st</span> (pointed by <span 
class="ec-lmtt-9x-x-102">&#x003E;&#x003E;st</span>) must be a string block. This
   block is removed from <span 
class="ec-lmtt-9x-x-102">st</span>. After this operation <span 
class="ec-lmtt-9x-x-102">&#x003E;&#x003E;st</span> decreased by the width of the
   string block.
<!--l. 3541--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;pack string+from[]+&#x003E;n+[]to[].</span>
   <!--l. 3541--><p class="noindent" >The rightmost <span 
class="ec-lmtt-9x-x-102">n</span> elements of <span 
class="ec-lmtt-9x-x-102">from</span> must be values that correspond to nonzero
   unicode codes; <span 
class="ec-lmtt-9x-x-102">n</span> must be non-negative. Characters with these codes are packed
   into a string block, and the stack <span 
class="ec-lmtt-9x-x-102">to</span> is extended with this block. After
   <span 
class="ec-lmtt-9x-x-102">pack string</span> returns, the new string is pointed by the actual upper limit
   <span 
class="ec-lmtt-9x-x-102">&#x003E;&#x003E;to</span>.
<!--l. 3548--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;unpack string+T[]+&#x003E;p+[]to[].</span>
   <!--l. 3548--><p class="noindent" >The pointer <span 
class="ec-lmtt-9x-x-102">p</span> must point to a string block in <span 
class="ec-lmtt-9x-x-102">T</span>. The string is unpacked yielding a
   sequence of <span 
class="ec-lmtt-9x-x-102">m</span> unicode characters, where <span 
class="ec-lmtt-9x-x-102">m</span> is the string length. The stack <span 
class="ec-lmtt-9x-x-102">to</span> is
   extended by the <span 
class="ec-lmtt-9x-x-102">m</span> character codes in left-to-right order.
<!--l. 3554--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;copy string+T[]+&#x003E;p+[]to[].</span>
   <!--l. 3554--><p class="noindent" >The stack <span 
class="ec-lmtt-9x-x-102">to</span> is extended by a string block identical to the one pointed by <span 
class="ec-lmtt-9x-x-102">p</span> in the
   list <span 
class="ec-lmtt-9x-x-102">T</span>.
<!--l. 3562--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">8.4   </span> <a 
 id="x1-680008.4"></a>Files</h4>
<!--l. 3564--><p class="noindent" >An <span 
class="cmss-10">ALEPH </span><span 
class="cmss-10">charfile</span> or <span 
class="cmss-10">datafile</span> is associated with a file-system element by an explicit
or implicit call to the <span 
class="ec-lmtt-9x-x-102">open file</span> rule, and detached by a call to <span 
class="ec-lmtt-9x-x-102">close file</span>, or when
the program terminates. Each <span 
class="cmss-10">ALEPH </span><span 
class="cmss-10">file</span> has an associated error variable, and each
file operation sets it. The error code is zero when the operation succeeds,
otherwise it is different from zero and the value indicates the type of the
error.
<!--l. 3571--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.4.1   </span> <a 
 id="x1-690008.4.1"></a>General</h5>
<!--l. 3573--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;open file+""f+&#x003E;mode+T[]+&#x003E;p.</span>
   <!--l. 3573--><p class="noindent" >Associate the <span 
class="cmss-10">file</span> <span 
class="ec-lmtt-9x-x-102">f</span> with the file-system element specified by the string pointed to
   by <span 
class="ec-lmtt-9x-x-102">p</span> in the list <span 
class="ec-lmtt-9x-x-102">T</span>. The <span 
class="ec-lmtt-9x-x-102">mode</span> specifies how the file should be opened. It is <span 
class="ec-lmtt-9x-x-102">/r/</span> for
   reading, <span 
class="ec-lmtt-9x-x-102">/w/</span> for writing, and <span 
class="ec-lmtt-9x-x-102">/a/</span> for appending. Only character files can be
   opened for appending. The rule <span 
class="ec-lmtt-9x-x-102">open file</span> succeeds when the file was
   successfully associated with <span 
class="ec-lmtt-9x-x-102">f</span>. If the rule fails, the error code in <span 
class="ec-lmtt-9x-x-102">f</span> indicates the
   reason.
   <!--l. 3580--><p class="noindent" >The special filenames <span 
class="ec-lmtt-9x-x-102">"&#x003C;&#x003C;stdin&#x003E;&#x003E;"</span>, <span 
class="ec-lmtt-9x-x-102">"&#x003C;&#x003C;stdout&#x003E;&#x003E;"</span> and <span 
class="ec-lmtt-9x-x-102">"&#x003C;&#x003C;stderr&#x003E;&#x003E;"</span> associate the
   <span 
class="cmss-10">ALEPH </span><span 
class="cmss-10">charfile</span> <span 
class="ec-lmtt-9x-x-102">f</span> with the three standard streams, typically reading from, and
   printing to the console. The first can be opened for reading only, the other two for
   writing only.
<!--l. 3586--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;open temp file+""f+[]T[]+&#x003E;p.</span>
   <!--l. 3586--><p class="noindent" >Associate <span 
class="ec-lmtt-9x-x-102">f</span> with a temporary file and open it for writing. The supplied string
   must end with six uppercase <span 
class="ec-lmtt-9x-x-102">X</span> letters, and it must be on a stack since
   the rule replaces these characters with other ones to make the filename
   unique.
<!--l. 3592--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;close file+""f.</span>
   <!--l. 3592--><p class="noindent" >Detaches the <span 
class="cmss-10">file</span> <span 
class="ec-lmtt-9x-x-102">f</span>, possibly after writing out some buffered data. When the rule
   returns <span 
class="ec-lmtt-9x-x-102">f</span> is detached, but there might be file-system errors indicated by a
   non-zero error code.
<!--l. 3597--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;get file error+""f+err&#x003E;.</span>
   <!--l. 3597--><p class="noindent" >Return the error code of the last operation on <span 
class="ec-lmtt-9x-x-102">f</span>. The code is zero if the operation
   was successful, otherwise it indicates the error condition.
<!--l. 3601--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;get file pos+""f+pos&#x003E;.</span>
   <!--l. 3601--><p class="noindent" >Retrieve the actual file position in <span 
class="ec-lmtt-9x-x-102">pos</span>. The yielded value is correct only when <span 
class="ec-lmtt-9x-x-102">f</span> is
   opened for reading. The position is maintained internally, so there is no
   overhead in determining it. The position at the beginning of the file is
   zero.
<!--l. 3607--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;set file pos+""f+&#x003E;pos.</span>
   <!--l. 3607--><p class="noindent" >If the <span 
class="cmss-10">file</span> <span 
class="ec-lmtt-9x-x-102">f</span> is opened for reading, set the position to <span 
class="ec-lmtt-9x-x-102">pos</span>. The next item to be
   retrieved from <span 
class="ec-lmtt-9x-x-102">f</span> is the same as the next item when position was retrieved
   by <span 
class="ec-lmtt-9x-x-102">get file pos</span>. Setting file position to zero resets <span 
class="ec-lmtt-9x-x-102">f</span> before the first
   item.
<!--l. 3613--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;unlink file+T[]+&#x003E;p.</span>
   <!--l. 3613--><p class="noindent" >Delete the file specified by the string in <span 
class="ec-lmtt-9x-x-102">T</span> pointed by <span 
class="ec-lmtt-9x-x-102">p</span>. Check the error code for
   success.
<!--l. 3617--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.4.2   </span> <a 
 id="x1-700008.4.2"></a>Character input and output</h5>
<!--l. 3619--><p class="noindent" >An <span 
class="cmss-10">ALEPH </span>character file is a sequence of unicode characters stored using UTF-8
encoding. A <span 
class="cmss-10">charfile</span> returns and accepts unicode characters, converting these
characters to and from UTF-8 encoding on the fly. The unicode character with zero
code is not allowed in an <span 
class="cmss-10">ALEPH </span>character file. Character handling rules require a
character file at their <span 
class="cmss-10">formal-file</span> affix.
<!--l. 3626--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">constant</span><span 
class="ec-lmtt-9x-x-102">&#8217;new line, rest line.</span>
   <!--l. 3626--><p class="noindent" >The <span 
class="cmss-10">ALEPH </span>character with code <span 
class="ec-lmtt-9x-x-102">new line</span> marks the end of a line; it is identified
   with the <span 
class="cmti-10">newline </span>unicode character with code 10. The <span 
class="cmss-10">constant-tag</span> <span 
class="ec-lmtt-9x-x-102">rest line</span> is
   reserved for administrative purposes; its value is not a valid character
   code.
<!--l. 3632--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;get char+""f+char&#x003E;, fgetc+""f+char&#x003E;.</span>
   <!--l. 3632--><p class="noindent" >These rules are equivalent. If the file associated with <span 
class="ec-lmtt-9x-x-102">f</span> is not exhausted, the code
   of the next unicode character is delivered in <span 
class="ec-lmtt-9x-x-102">char</span>, and the file is advanced
   by one character. The rule fails if there are no more characters in the
   file.
<!--l. 3638--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;ahead char+""f+char&#x003E;</span>.
   <!--l. 3638--><p class="noindent" >If the file associated with <span 
class="ec-lmtt-9x-x-102">f</span> is not exhausted, the code of the next unicode
   character is delivered in <span 
class="ec-lmtt-9x-x-102">char</span>, but the file is not advanced; a subsequent call to
   <span 
class="ec-lmtt-9x-x-102">ahead char</span> will deliver the same code. The rule fails if there are no more
   characters in the file.
<!--l. 3644--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;get line+""f+[]st[]+cint&#x003E;.</span>
   <!--l. 3644--><p class="noindent" >If the file associated with <span 
class="ec-lmtt-9x-x-102">f</span> is exhausted, <span 
class="ec-lmtt-9x-x-102">get line</span> fails. Otherwise the next
   character is read. If it is a newline character, its code is assigned to <span 
class="ec-lmtt-9x-x-102">cint</span> and the
   character is skipped, otherwise <span 
class="ec-lmtt-9x-x-102">cint</span> is set to <span 
class="ec-lmtt-9x-x-102">rest line</span>. Then zero or more
   characters are read until either the end of file, or until the next character would
   be a newline. The stack <span 
class="ec-lmtt-9x-x-102">st</span> is extended with these characters in a left-to-right
   order.
<!--l. 3652--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;get int+""f+int&#x003E;.</span>
   <!--l. 3652--><p class="noindent" >A call of <span 
class="ec-lmtt-9x-x-102">get int</span> will read and skip any number of spaces and newline characters
   until it finds a digit, plus-sign or minus-sign. If no such character was found, <span 
class="ec-lmtt-9x-x-102">get</span>
   <span 
class="ec-lmtt-9x-x-102">int</span> fails. Otherwise the rule will read and collect one or more digits until a
   non-digit is found: this non-digit is not read. The optional sign and the
   digits are considered as a signed decimal number; the value is delivered in
   <span 
class="ec-lmtt-9x-x-102">int</span>.
<!--l. 3660--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;put char+""f+&#x003E;char, fputc+""f+&#x003E;char.</span>
   <!--l. 3660--><p class="noindent" >These rules are equivalent. The value of <span 
class="ec-lmtt-9x-x-102">char</span> must be a positive valid
   unicode character. This character is written to the file associated with
   <span 
class="ec-lmtt-9x-x-102">f</span>.
<!--l. 3665--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;put line+""f+T[]+&#x003E;cint.</span>
   <!--l. 3665--><p class="noindent" >The list <span 
class="ec-lmtt-9x-x-102">T</span> must only contain positive unicode values. These characters are written,
   in a left-to-right order, to the file associated with <span 
class="ec-lmtt-9x-x-102">f</span>. If <span 
class="ec-lmtt-9x-x-102">cint</span> is not <span 
class="ec-lmtt-9x-x-102">rest line</span>, this
   character is appended at the end.
<!--l. 3671--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;put int+""f+&#x003E;int.</span>
   <!--l. 3671--><p class="noindent" >Exactly <span 
class="ec-lmtt-9x-x-102">intsize+1</span> characters are written to <span 
class="ec-lmtt-9x-x-102">f</span>. These characters are: zero or more
   spaces, the minus sign if <span 
class="ec-lmtt-9x-x-102">int</span> is negative, followed by the characters of the decimal
   representation of the absolute value of <span 
class="ec-lmtt-9x-x-102">int</span>.
<!--l. 3677--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;put string+""f+T[]+&#x003E;p, fprint string+""f+T[]+&#x003E;p.</span>
   <!--l. 3677--><p class="noindent" >These rules are equivalent. The pointer <span 
class="ec-lmtt-9x-x-102">p</span> must point into a string block in the
   list <span 
class="ec-lmtt-9x-x-102">T</span>. Characters of this string are written to the file associated with
   <span 
class="ec-lmtt-9x-x-102">f</span>.
<!--l. 3682--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;fprintf+""f+t[]+@+&#x003E;p.</span>
   <!--l. 3682--><p class="noindent" >This rule provides a rudimentary formatted printing. The first two affixes after
   the <span 
class="cmss-10">file</span> <span 
class="ec-lmtt-9x-x-102">f</span> specify a <span 
class="cmti-10">format string</span>. Characters in this string are written to <span 
class="ec-lmtt-9x-x-102">f</span>, except
   for the following format character pairs, which specify how the additional
   <span 
class="cmss-10">in-affix</span>es of the rule will be written.
<div class="center" 
>
<!--l. 3688--><p class="noindent" >
<div class="tabular"> <table id="TBL-7" class="tabular" 
 
><colgroup id="TBL-7-1g"><col 
id="TBL-7-1"><col 
id="TBL-7-2"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-7-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-1-1"  
class="td11">format</td><td  style="white-space:nowrap; text-align:left;" id="TBL-7-1-2"  
class="td11">the next affix is written as                 </td></tr><tr 
class="vspace" style="font-size:2.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-2-1"  
class="td11"> 
<span 
class="ec-lmtt-9x-x-102">%c</span>  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-7-2-2"  
class="td11">character,                                       </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-7-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-3-1"  
class="td11">  <span 
class="ec-lmtt-9x-x-102">%d</span>  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-7-3-2"  
class="td11">decimal integer without leading spaces,</td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-7-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-4-1"  
class="td11">  <span 
class="ec-lmtt-9x-x-102">%x</span>  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-7-4-2"  
class="td11">hexadecimal,                                   </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-7-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-7-5-1"  
class="td11">  <span 
class="ec-lmtt-9x-x-102">%n</span>  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-7-5-2"  
class="td11">newline (no affix is consumed).           </td></tr></table>
</div></div>
<!--l. 3696--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.4.3   </span> <a 
 id="x1-710008.4.3"></a>Standard input and output</h5>
<!--l. 3698--><p class="noindent" >The following rules communicate directly with standard input and output.
<!--l. 3700--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">charfile</span><span 
class="ec-lmtt-9x-x-102">&#8217;STDIN, STDOUT.</span>
   <!--l. 3700--><p class="noindent" >These character files are associated with the character streams <span 
class="cmti-10">standard input </span>and
   <span 
class="cmti-10">standard output</span>. Characters sent to <span 
class="ec-lmtt-9x-x-102">STDOUT</span> typically appear on the console;
   characters read from <span 
class="ec-lmtt-9x-x-102">STDIN</span> are the ones entered at the console. <span 
class="ec-lmtt-9x-x-102">STDIN</span> is
   line-buffered.
<!--l. 3706--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;getc+char&#x003E;.</span>
   <!--l. 3706--><p class="noindent" >Get the next character from <span 
class="ec-lmtt-9x-x-102">STDIN</span>.
<!--l. 3709--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;putc+&#x003E;char, print char+&#x003E;char.</span>
   <!--l. 3709--><p class="noindent" >Both rules send the character <span 
class="ec-lmtt-9x-x-102">char</span> to <span 
class="ec-lmtt-9x-x-102">STDOUT</span>.
<!--l. 3712--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;print int+&#x003E;n, print string+T[]+&#x003E;p, printf+t[]+@+&#x003E;p.</span>
   <!--l. 3712--><p class="noindent" >Corresponding to <span 
class="ec-lmtt-9x-x-102">put int</span>, <span 
class="ec-lmtt-9x-x-102">put string</span>, and <span 
class="ec-lmtt-9x-x-102">fprintf</span>. These rules write to <span 
class="ec-lmtt-9x-x-102">STDOUT</span>
   an integer, a string, and formatted output, respectively.
<!--l. 3718--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark">8.4.4   </span> <a 
 id="x1-720008.4.4"></a>Data input and output</h5>
<!--l. 3720--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">constant</span><span 
class="ec-lmtt-9x-x-102">&#8217;numerical, pointer.</span>
   <!--l. 3720--><p class="noindent" >These constants are predefined values that can be used as type indications in
   <span 
class="cmss-10">datafiles</span>. For their usage see 
<a href="#x1-470004.3.2">Section 4.3.2</a>.
<!--l. 3724--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;get data+""file+data&#x003E;+type&#x003E;.</span>
   <!--l. 3724--><p class="noindent" >The file <span 
class="ec-lmtt-9x-x-102">file</span> must be a datafile. If the file is not exhausted, the next data item is
   read, its value delivered in <span 
class="ec-lmtt-9x-x-102">data</span> and its type in <span 
class="ec-lmtt-9x-x-102">type</span>. When the rule
   fails the error variable associated with <span 
class="ec-lmtt-9x-x-102">file</span> gives information about the
   reason.
<!--l. 3730--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;put data+""file+&#x003E;data+&#x003E;type.</span>
   <!--l. 3730--><p class="noindent" >The file <span 
class="ec-lmtt-9x-x-102">file</span> must be a datafile. A data item is written to the file, consisting of
   the value <span 
class="ec-lmtt-9x-x-102">data</span> and the type <span 
class="ec-lmtt-9x-x-102">type</span>. For a more detailed description see 
<a href="#x1-470004.3.2">Section 4.3.2</a>. When
   the request cannot be executed (possible reasons are: the file-system is full; <span 
class="ec-lmtt-9x-x-102">file</span>
   was not opened and cannot be opened automatically; a pointer data is not
   covered in the <span 
class="cmss-10">file-area</span>), the program run is terminated.
<!--l. 3738--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;put datap+""file+&#x003E;data+&#x003E;type.</span>
   <!--l. 3738--><p class="noindent" >Performs the same action as <span 
class="ec-lmtt-9x-x-102">put data</span>, but in case of an error fails and sets the
   error variable associated with <span 
class="ec-lmtt-9x-x-102">file</span>.
<!--l. 3742--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">8.5   </span> <a 
 id="x1-730008.5"></a>Miscellaneous</h4>
<!--l. 3744--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">question</span><span 
class="ec-lmtt-9x-x-102">&#8217;shift affix block+@.</span>
   <!--l. 3744--><p class="noindent" >The actually visible repeat affix block is shifted out, and the next block is moved
   into its place, assuming that there is still a pending, unseen block. If there is no
   more blocks, the rule fails. This rule cannot be redefined.
<!--l. 3749--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;get affix blockno+n&#x003E;+@.</span>
   <!--l. 3749--><p class="noindent" >The number of pending, unseen affix blocks is yielded in <span 
class="ec-lmtt-9x-x-102">n</span>. This number is always
   positive, and it is 1 if and only if <span 
class="ec-lmtt-9x-x-102">shift affix block</span> would fail. This rule cannot
   be redefined.
<!--l. 3754--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">exit</span><span 
class="ec-lmtt-9x-x-102">&#8217;exit+&#x003E;code.</span>
   <!--l. 3754--><p class="noindent" >This is the only Standard Library rule which is guaranteed not to return. The call
   of this rule closes all open files and terminates the program run with the specified
   <span 
class="ec-lmtt-9x-x-102">code</span>.
<!--l. 3759--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">table</span><span 
class="ec-lmtt-9x-x-102">&#8217;STDARG.</span>
   <!--l. 3759--><p class="noindent" >The table <span 
class="ec-lmtt-9x-x-102">STDARG</span> contains, in reverse order, the command-line arguments as string
   blocks. Consequently, the upper limit <span 
class="ec-lmtt-9x-x-102">&#x003E;&#x003E;STDARG</span> of the table points to the first
   argument. The following <span 
class="cmss-10">compound-member</span> walks through the arguments in their
   original order, and calls <span 
class="ec-lmtt-9x-x-102">cmdarg</span> with each of them:
  <!--l. 3766--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(-ptr:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#x003E;&#x003E;STDARG-&#x003E;ptr,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(nxt:ptr&#x003C;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#x003C;&#x003C;STDARG;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;cmdarg+STDARG+ptr,previous</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string+STDARG+ptr,:nxt))</span>
</div>
<!--l. 3772--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;msleep+&#x003E;ms.</span>
   <!--l. 3772--><p class="noindent" >This rule sleeps for the specified amount of milliseconds before returning. As this
   rule clearly makes no &#8220;global changes&#8221;, it would be tempting to declare it
   as a <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>. In that case, however, the compiler would complain
   that a function without <span 
class="cmss-10">out</span> or <span 
class="cmss-10">inout</span> formal affixes is a no-op and can be
   discarded.
<!--l. 3779--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;backtrack.</span>
   <!--l. 3779--><p class="noindent" >If the <span 
class="cmss-10">ALEPH </span>program is linked with the <span 
class="ec-lmtt-9x-x-102">-g</span> flag, additional code is added which
   maintains the <span 
class="cmti-10">call stack</span>, the list of embedded rule calls starting from the <span 
class="cmss-10">root</span> of
   the main program and ending at the <span 
class="cmss-10">actual-rule</span> which is currently executed. In
   this case a call of the rule <span 
class="ec-lmtt-9x-x-102">backtrack</span> provides a printout of the rule names in this
   stack. If the program was not linked with the <span 
class="ec-lmtt-9x-x-102">-g</span> flag, this rule does nothing and
   returns immediately.
<!--l. 3788--><p class="pnoindent" ><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;wait for+T[]+&#x003E;p.</span>
   <!--l. 3788--><p class="noindent" >The pointer <span 
class="ec-lmtt-9x-x-102">p</span> must point to a string in the table <span 
class="ec-lmtt-9x-x-102">T</span>. The rule checks if there is a
   linked module with the specified name (as defined by the <span 
class="ec-lmtt-9x-x-102">module=...</span> <span 
class="cmss-10">pragmat</span>)
   whose <span 
class="cmss-10">root</span> has not been executed yet. If yes, it calls those <span 
class="cmss-10">root</span>s and returns after
   all is finished; otherwise it returns immediately. The rule <span 
class="ec-lmtt-9x-x-102">wait for</span> aborts the
   program run if two module <span 
class="cmss-10">root</span>s would wait for each other producing a
   deadlock.
<!--l. 3798--><p class="indent" >
   <h3 class="sectionHead"><span class="titlemark">9   </span> <a 
 id="x1-740009"></a>Program representation</h3>
<!--l. 3803--><p class="noindent" >The program, produced by the notion <span 
class="cmss-10">program</span>, consists of a series of terminals.
Terminal notions fall into the following categories:
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 3806--><p class="noindent" ><span 
class="cmss-10">symbol</span>s,
   </li>
   <li class="itemize">
   <!--l. 3807--><p class="noindent" ><span 
class="cmss-10">tag</span>s (identifiers),
   </li>
   <li class="itemize">
   <!--l. 3808--><p class="noindent" ><span 
class="cmss-10">denotation</span>s.</li></ul>
<!--l. 3810--><p class="noindent" >An <span 
class="cmss-10">ALEPH </span>program is a textual representation of the sequence of terminals sprinkled
with <span 
class="cmti-10">comments </span>and <span 
class="cmti-10">formatting</span>. <span 
class="cmss-10">ALEPH </span>has quite liberal formatting rules. Any
number of white spaces (tabs, space and newline characters) are allowed before and
after any terminal notion; spaces and tabular characters (but no newlines) are
allowed (and ignored) inside identifiers, decimal, and hexadecimal constants.
Thus
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 3817--><p class="noindent" ><span 
class="ec-lmtt-9x-x-102">new&#x2423;line</span>, <span 
class="ec-lmtt-9x-x-102">newline</span>, and <span 
class="ec-lmtt-9x-x-102">ne&#x2423;wli&#x2423;ne</span></li></ul>
<!--l. 3819--><p class="noindent" >represent the same <span 
class="cmss-10">tag</span>. Similarly,
   <ul class="itemize0">
   <li class="itemize">
   <!--l. 3821--><p class="noindent" ><span 
class="ec-lmtt-9x-x-102">1&#x2423;000&#x2423;000</span></li></ul>
<!--l. 3823--><p class="noindent" >is a legal representation of the number one million. There can be no space, however, in
the head <span 
class="ec-lmtt-9x-x-102">0x</span> of a hexadecimal constant (since it is the representation of the
<span 
class="cmss-10">hex-symbol</span> which is required to appear exactly), while there can be spaces after it
and between the hexadecimal digits, such as <span 
class="ec-lmtt-9x-x-102">0x&#x2423;ff&#x2423;e8</span>.
<!--l. 3829--><p class="indent" >   Any number of <span 
class="cmti-10">long comments </span>can be added before and after a terminal notion. A
long comment starts with a dollar-sign <span 
class="ec-lmtt-9x-x-102">$</span>, and ends at the next dollar sign or at the
end of the line, whichever comes first. A short comment consists of a sharp-sign <span 
class="ec-lmtt-9x-x-102">#</span>
followed by spaces, letters and digits so that it contains at least one non-space
character. Short comments can be inserted before another comment or before a
terminal notion, assuming either that the short comment ends with a newline, or the
representation of the subsequent terminal does not start with a letter or
digit.
<!--l. 3838--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">9.1   </span> <a 
 id="x1-750009.1"></a>Symbols</h4>
<!--l. 3840--><p class="noindent" >The character representation of terminals ending with <span 
class="cmss-10">-symbol</span> is either a single
character, such as the obvious representations of <span 
class="cmss-10">point-symbol</span> or <span 
class="cmss-10">colon-symbol</span>; two
consecutive characters, such as the representation <span 
class="ec-lmtt-9x-x-102">-&#x003E;</span> of the <span 
class="cmss-10">arrow-symbol</span>; or a &#8220;bold
word&#8221; written between apostrophes such as the representation <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> of the
<span 
class="cmss-10">end-symbol</span>. When more than one representation is listed, any of them can be used
with the same meaning. If the symbol has multi-character representation, no
additional characters are allowed between the listed characters. For example, <span 
class="ec-lmtt-9x-x-102">0x</span> is the
representation of the <span 
class="cmss-10">hex-symbol</span> which indicates a hexadecimal number, while <span 
class="ec-lmtt-9x-x-102">0&#x2423;x</span> is
a digit zero followed by the letter <span 
class="ec-lmtt-9x-x-102">x</span>.
<div class="tabular"><table id="TBL-10" class="tabular">
<colgroup><col id="TBL-10-1"><col id="TBL-10-2"></colgroup><tr>
<td><!--l. 3855-->    symbol  </td><td>       representation </td></tr>
<tr><td>
 <span 
class="cmss-10">absolute-symbol</span> </td><td>       <span 
class="ec-lmtt-9x-x-102">/</span></td></tr>
<!--l. 3857--><tr><td>       <span 
class="cmss-10">action-symbol</span>   </td><td>       <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> or <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">act</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> or <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">a</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span></td></tr>
<!--l. 3858--><tr><td>      <span 
class="cmss-10">actual-affix-symbol</span> </td><td>     <span 
class="ec-lmtt-9x-x-102">+</span></td></tr>

<!--l. 3859--><tr><td >       <span 
class="cmss-10">alwb-symbol</span> </td><td>  <span 
class="ec-lmtt-9x-x-102">&#x003C;&#x003C;</span> </td></tr>
<!--l. 3860--><tr><td >       <span 
class="cmss-10">anchor-symbol</span> </td><td>        <span 
class="ec-lmtt-9x-x-102">@</span> (at sign)  </td></tr>
<!--l. 3861--><tr><td >       <span 
class="cmss-10">and-symbol</span>    </td><td>        <span 
class="ec-lmtt-9x-x-102">&amp;</span> (ampersand)  </td></tr>
<!--l. 3862--><tr><td >       <span 
class="cmss-10">arrow-symbol</span>  </td><td>        <span 
class="ec-lmtt-9x-x-102">-&#x003E;</span>  </td></tr>
<!--l. 3863--><tr><td >       <span 
class="cmss-10">aupb-symbol</span> </td><td>  <span 
class="ec-lmtt-9x-x-102">&#x003E;&#x003E;</span> </td></tr>
<!--l. 3864--><tr><td >       <span 
class="cmss-10">box-symbol</span>    </td><td>        <span 
class="ec-lmtt-9x-x-102">=</span> </td></tr>
<!--l. 3865--><tr><td >       <span 
class="cmss-10">bus-symbol</span>    </td><td>        <span 
class="ec-lmtt-9x-x-102">]</span> </td></tr>
<!--l. 3866--><tr><td >       <span 
class="cmss-10">by-symbol</span>     </td><td>        <span 
class="ec-lmtt-9x-x-102">/</span> </td></tr>
<!--l. 3867--><tr><td >       <span 
class="cmss-10">calibre-symbol</span> </td><td>         <span 
class="ec-lmtt-9x-x-102">&#x003C;&#x003E;</span> </td></tr>
<!--l. 3868--><tr><td >       <span 
class="cmss-10">charfile-symbol</span> </td><td>        <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">charfile</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3869--><tr><td >       <span 
class="cmss-10">close-symbol</span> </td><td>  <span 
class="ec-lmtt-9x-x-102">)</span> </td></tr>
<!--l. 3870--><tr><td >       <span 
class="cmss-10">colon-symbol</span>   </td><td>       <span 
class="ec-lmtt-9x-x-102">:</span> </td></tr>
<!--l. 3871--><tr><td >       <span 
class="cmss-10">comma-symbol</span>   </td><td>      <span 
class="ec-lmtt-9x-x-102">,</span> </td></tr>
<!--l. 3872--><tr><td >       <span 
class="cmss-10">complement-symbol</span> </td><td>    <span 
class="ec-lmtt-9x-x-102">~</span> (tilde) </td></tr>
<!--l. 3873--><tr><td >       <span 
class="cmss-10">constant-symbol</span>   </td><td>     <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">constant</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> or <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">cons</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3874--><tr><td >       <span 
class="cmss-10">datafile-symbol</span>  </td><td>       <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">datafile</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3875--><tr><td >       <span 
class="cmss-10">dummy-symbol</span>   </td><td>      <span 
class="ec-lmtt-9x-x-102">#</span> or <span 
class="ec-lmtt-9x-x-102">?</span> </td></tr>
<!--l. 3876--><tr><td >       <span 
class="cmss-10">end-symbol</span>     </td><td>       <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3877--><tr><td >       <span 
class="cmss-10">eq-symbol</span>      </td><td>       <span 
class="ec-lmtt-9x-x-102">=</span> </td></tr>
<!--l. 3878--><tr><td >       <span 
class="cmss-10">equals-symbol</span>  </td><td>        <span 
class="ec-lmtt-9x-x-102">=</span> </td></tr>
<!--l. 3879--><tr><td >       <span 
class="cmss-10">exit-symbol</span>    </td><td>        <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">exit</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> or <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">e</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3880--><tr><td >       <span 
class="cmss-10">external-symbol</span> </td><td>       <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">external</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> or <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">x</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3881--><tr><td >       <span 
class="cmss-10">failure-symbol</span>  </td><td>        <span 
class="ec-lmtt-9x-x-102">-</span> </td></tr>
<!--l. 3882--><tr><td >       <span 
class="cmss-10">formal-affix-symbol</span>  </td><td>    <span 
class="ec-lmtt-9x-x-102">+</span> </td></tr>
<!--l. 3883--><tr><td >       <span 
class="cmss-10">function-symbol</span>   </td><td>     <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">function</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> or <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">fct</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> or <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">f</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3884--><tr><td >       <span 
class="cmss-10">ge-symbol</span>    </td><td>         <span 
class="ec-lmtt-9x-x-102">&#x003E;=</span> </td></tr>
<!--l. 3885--><tr><td >       <span 
class="cmss-10">gt-symbol</span>    </td><td>         <span 
class="ec-lmtt-9x-x-102">&#x003E;</span> </td></tr>
<!--l. 3886--><tr><td >       <span 
class="cmss-10">hex-symbol</span>   </td><td>         <span 
class="ec-lmtt-9x-x-102">0x</span> </td></tr>
<!--l. 3887--><tr><td >       <span 
class="cmss-10">le-symbol</span>    </td><td>         <span 
class="ec-lmtt-9x-x-102">&#x003C;=</span> </td></tr>
<!--l. 3888--><tr><td >       <span 
class="cmss-10">left-symbol</span>  </td><td>          <span 
class="ec-lmtt-9x-x-102">&#x003C;</span> </td></tr>
<!--l. 3889--><tr><td >       <span 
class="cmss-10">left-of-symbol</span>  </td><td>        <span 
class="ec-lmtt-9x-x-102">(*</span> </td></tr>
<!--l. 3890--><tr><td >       <span 
class="cmss-10">local-affix-symbol</span> </td><td>      <span 
class="ec-lmtt-9x-x-102">-</span> </td></tr>
<!--l. 3891--><tr><td >       <span 
class="cmss-10">lt-symbol</span>   </td><td>           <span 
class="ec-lmtt-9x-x-102">&#x003C;</span> </td></tr>
<!--l. 3892--><tr><td >       <span 
class="cmss-10">minus-symbol</span>   </td><td>       <span 
class="ec-lmtt-9x-x-102">-</span> </td></tr>
<!--l. 3893--><tr><td >       <span 
class="cmss-10">ne-symbol</span>    </td><td>         <span 
class="ec-lmtt-9x-x-102">!=</span> </td></tr>
<!--l. 3894--><tr><td >       <span 
class="cmss-10">of-symbol</span>   </td><td>          <span 
class="ec-lmtt-9x-x-102">*</span> </td></tr>
<!--l. 3895--><tr><td >       <span 
class="cmss-10">open-symbol</span> </td><td>  <span 
class="ec-lmtt-9x-x-102">(</span> </td></tr>
<!--l. 3896--><tr><td >       <span 
class="cmss-10">or-symbol</span>   </td><td>          <span 
class="ec-lmtt-9x-x-102">|</span> (pipe) </td></tr>
<!--l. 3897--><tr><td >       <span 
class="cmss-10">plus-symbol</span> </td><td>           <span 
class="ec-lmtt-9x-x-102">+</span> </td></tr>
<!--l. 3898--><tr><td >       <span 
class="cmss-10">point-symbol</span> </td><td>  <span 
class="ec-lmtt-9x-x-102">.</span> </td></tr>
<!--l. 3899--><tr><td >       <span 
class="cmss-10">pragmat-symbol</span> </td><td>       <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3900--><tr><td >       <span 
class="cmss-10">predicate-symbol</span>  </td><td>      <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> or <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pred</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> or <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">p</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3901--><tr><td >       <span 
class="cmss-10">qualifier-symbol</span>  </td><td>      <span 
class="ec-lmtt-9x-x-102">::</span> </td></tr>
<!--l. 3902--><tr><td >       <span 
class="cmss-10">question-symbol</span>  </td><td>      <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">question</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> or <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">qu</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> or <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">q</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3903--><tr><td >       <span 
class="cmss-10">quote-symbol</span>   </td><td>       <span 
class="ec-lmtt-9x-x-102">"</span> </td></tr>
<!--l. 3904--><tr><td >       <span 
class="cmss-10">quote-image-symbol</span> </td><td>    <span 
class="ec-lmtt-9x-x-102">""</span> </td></tr>
<!--l. 3905--><tr><td >       <span 
class="cmss-10">repeat-symbol</span>  </td><td>        <span 
class="ec-lmtt-9x-x-102">:</span> </td></tr>
<!--l. 3906--><tr><td >       <span 
class="cmss-10">right-symbol</span> </td><td>  <span 
class="ec-lmtt-9x-x-102">&#x003E;</span> </td></tr>
<!--l. 3907--><tr><td >       <span 
class="cmss-10">right-of-symbol</span>  </td><td>       <span 
class="ec-lmtt-9x-x-102">*)</span> </td></tr>
<!--l. 3908--><tr><td >       <span 
class="cmss-10">root-symbol</span> </td><td>  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3909--><tr><td >       <span 
class="cmss-10">semicolon-symbol</span> </td><td>      <span 
class="ec-lmtt-9x-x-102">;</span> </td></tr>
<!--l. 3910--><tr><td >       <span 
class="cmss-10">stack-symbol</span> </td><td>  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">stack</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3911--><tr><td >       <span 
class="cmss-10">static-symbol</span>    </td><td>      <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">static</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3912--><tr><td >       <span 
class="cmss-10">sub-symbol</span>     </td><td>       <span 
class="ec-lmtt-9x-x-102">[</span> </td></tr>
<!--l. 3913--><tr><td >       <span 
class="cmss-10">success-symbol</span> </td><td>        <span 
class="ec-lmtt-9x-x-102">+</span> </td></tr>
<!--l. 3914--><tr><td >       <span 
class="cmss-10">table-symbol</span> </td><td>  <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">table</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3915--><tr><td >       <span 
class="cmss-10">times-symbol</span>   </td><td>       <span 
class="ec-lmtt-9x-x-102">*</span> </td></tr>
<!--l. 3916--><tr><td >       <span 
class="cmss-10">up-to-symbol</span>   </td><td>       <span 
class="ec-lmtt-9x-x-102">:</span> </td></tr>
<!--l. 3917--><tr><td >       <span 
class="cmss-10">variable-symbol</span> </td><td>        <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">variable</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> or <span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">var</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span> </td></tr>
<!--l. 3918--><tr><td >       <span 
class="cmss-10">vlwb-symbol</span> </td><td>  <span 
class="ec-lmtt-9x-x-102">&#x003C;</span> </td></tr>
<!--l. 3919--><tr><td >       <span 
class="cmss-10">vupb-symbol</span> </td><td>  <span 
class="ec-lmtt-9x-x-102">&#x003E;</span> </td></tr>
<!--l. 3920--><tr><td >       <span 
class="cmss-10">xor-symbol</span>    </td><td>        <span 
class="ec-lmtt-9x-x-102">^</span> (caret) </td></tr>

</table></div>

   <h4 class="subsectionHead"><span class="titlemark">9.2   </span> <a 
 id="x1-760009.2"></a>Tags</h4>
<!--l. 3927--><p class="noindent" >Identifiers in <span 
class="cmss-10">ALEPH </span>are non-empty sequences of digits and latin letters starting with
a lower or upper case letter. Inside identifiers spaces and tab characters (but not
newlines) are allowed and ignored. A <span 
class="cmti-10">qualifier </span>is an identifier followed by the
<span 
class="cmss-10">qualifier-symbol</span>; a <span 
class="cmti-10">qualified identifier </span>is an identifier preceded by a qualifier. The
representation of a local <span 
class="cmss-10">tag</span> (that is, formal and local affixes and labels) is an
identifier; the representation of a global <span 
class="cmss-10">tag</span> is either an identifier, or a qualified
identifier. Global <span 
class="cmss-10">tag</span>s without explicit qualifiers have an implicit one. The implicit
qualifier is the name of the module where the <span 
class="cmss-10">tag</span> is defined, or it is empty
(with no corresponding explicit qualifier) when the <span 
class="cmss-10">tag</span> is defined in the main program.
<!--l. 3939--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">9.3   </span> <a 
 id="x1-770009.3"></a>Denotations</h4>
<!--l. 3941--><p class="noindent" >Denotations specify a value which is determined during compilation. A denotation is
either explicit, such as a sequence of decimal digits determining an integral constant,
or implicit when the value is supplied by the compiler depending on the exact
location of the denotation. Syntax:
<!--l. 3946--><p class="indent" >
       <dl class="list1"><dt class="list">
   </dt><dd 
class="list">
   <!--l. 3947--><p class="indent" >      <span 
class="cmss-10">integral-denotation:</span>
   <!--l. 3949--><p class="indent" >      <span 
class="cmss-10">[minus-symbol], digit</span><span 
class="ec-lmtt-9x-x-102">+</span><span 
class="cmss-10">;</span>
   <!--l. 3951--><p class="indent" >      <span 
class="cmss-10">[minus-symbol], hex-symbol, hex-digit</span><span 
class="ec-lmtt-9x-x-102">+</span><span 
class="cmss-10">;</span>
   <!--l. 3953--><p class="indent" >      <span 
class="cmss-10">manifest-constant.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 3955--><p class="indent" >      <span 
class="cmss-10">character-denotation: absolute-symbol, visible-character, absolute-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 3958--><p class="indent" >      <span 
class="cmss-10">string-denotation:</span>
   <!--l. 3960--><p class="indent" >      <span 
class="cmss-10">proper-string;</span>
   <!--l. 3962--><p class="indent" >      <span 
class="cmss-10">manifest-string.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 3964--><p class="indent" >      <span 
class="cmss-10">proper-string:</span>
   <!--l. 3966--><p class="indent" >      <span 
class="cmss-10">quote-symbol, string-elem</span><span 
class="ec-lmtt-9x-x-102">*</span><span 
class="cmss-10">, quote-symbol.</span>
       </dd><dt class="list">
   </dt><dd 
class="list">
   <!--l. 3968--><p class="indent" >      <span 
class="cmss-10">string-elem:</span>
   <!--l. 3970--><p class="indent" >      <span 
class="cmss-10">non-quote-character; quote-image-symbol.</span></dd></dl>
<!--l. 3972--><p class="noindent" >The notion <span 
class="cmss-10">proper-string</span> has been introduced to explicitly forbid <span 
class="cmss-10">manifest-string</span>s at
certain locations. Example of <span 
class="cmss-10">integral-</span>, <span 
class="cmss-10">character-</span> and <span 
class="cmss-10">string-denotation</span>s:
  <!--l. 3976--><p class="noindent" ><div class="obeylines-v">
  <span 
class="ec-lmtt-9x-x-102">-0xffef,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;/t/,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"""quoted</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string""",</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">_file</span><span 
class="ec-lmtt-9x-x-102">_,</span>
</div>
<!--l. 3979--><p class="noindent" >here the last one is a <span 
class="cmss-10">manifest-string</span>. The implemented manifest constants and strings
are the following.
   <div class="tabular"> <table id="TBL-8" class="tabular" 
 
><colgroup id="TBL-8-1g"><col 
id="TBL-8-1"><col 
id="TBL-8-2"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-8-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-8-1-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">_line_</span>
</td><td  style="white-space:normal; text-align:left;" id="TBL-8-1-2"  
class="td11"><!--l. 3986--><p class="noindent" >constant, the source line number this constant appears,    </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-8-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-8-2-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">_file_</span>
</td><td  style="white-space:normal; text-align:left;" id="TBL-8-2-2"  
class="td11"><!--l. 3987--><p class="noindent" >string, the name of the source file,                                </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-8-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-8-3-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">_module_</span>
</td><td  style="white-space:normal; text-align:left;" id="TBL-8-3-2"  
class="td11"><!--l. 3988--><p class="noindent" >string, module name as set by the <span 
class="ec-lmtt-9x-x-102">module=...</span> <span 
class="cmss-10">pragmat</span>,     </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-8-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-8-4-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">_title_</span>
</td><td  style="white-space:normal; text-align:left;" id="TBL-8-4-2"  
class="td11"><!--l. 3990--><p class="noindent" >string, the title as set by the <span 
class="ec-lmtt-9x-x-102">title="..."</span> <span 
class="cmss-10">pragmat</span>,           </td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-8-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-8-5-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">_rule_</span>
</td><td  style="white-space:normal; text-align:left;" id="TBL-8-5-2"  
class="td11"><!--l. 3992--><p class="noindent" >string, the rule name (without the qualifier) if used inside
an <span 
class="cmss-10">actual-rule</span>.                                                          </td> 
</tr></table></div>
<!--l. 3997--><p class="noindent" >Only the listed characters are allowed between the two underscore characters. The
string returned by <span 
class="ec-lmtt-9x-x-102">_module_</span>
 and <span 
class="ec-lmtt-9x-x-102">_title_</span>
is the empty string before encountering the
<span 
class="ec-lmtt-9x-x-102">module</span> or the <span 
class="ec-lmtt-9x-x-102">title</span> pragmats. The manifest string <span 
class="ec-lmtt-9x-x-102">_rule_</span>
similarly returns the empty string if
used outside an <span 
class="cmss-10">actual-rule</span>.
<!--l. 4006--><p class="indent" >   Integral denotations use decimal and hexadecimal digits. Decimal <span 
class="cmss-10">digit</span>s are the
characters from <span 
class="ec-lmtt-9x-x-102">0</span> to <span 
class="ec-lmtt-9x-x-102">9</span>; <span 
class="cmss-10">hex-digit</span>s contain, additionally, both the lower case letters
from <span 
class="ec-lmtt-9x-x-102">a</span> to <span 
class="ec-lmtt-9x-x-102">f</span> and the upper case letters from <span 
class="ec-lmtt-9x-x-102">A</span> to <span 
class="ec-lmtt-9x-x-102">F</span>. The value of an <span 
class="cmss-10">integral-denotation</span>
is the decimal or hexadecimal value of the sequence, negated if the <span 
class="cmss-10">minus-symbol</span>
precedes it. Spaces and tabular characters are allowed (and ignored) between the
digits and also after the <span 
class="cmss-10">minus-symbol</span>, but no spaces are allowed between <span 
class="ec-lmtt-9x-x-102">0</span> and
<span 
class="ec-lmtt-9x-x-102">x</span> in <span 
class="ec-lmtt-9x-x-102">0x</span> marking a hexadecimal number, as it is the representation of the
<span 
class="cmss-10">hex-symbol</span>.
<!--l. 4019--><p class="indent" >   A <span 
class="cmss-10">visible-character</span> is any unicode character which occupies a single character
position. It includes the space character, but excludes the newline, tabular, and other
control characters. The <span 
class="cmss-10">character-denotation</span> provides the code of the character
between the two <span 
class="cmss-10">absolute-symbol</span>s <span 
class="ec-lmtt-9x-x-102">/</span>.
<!--l. 4027--><p class="indent" >   A <span 
class="cmss-10">non-quote-character</span> is a <span 
class="cmss-10">visible-character</span> different from the quote mark <span 
class="ec-lmtt-9x-x-102">"</span>.
A <span 
class="cmss-10">proper-string</span> is a (possibly empty) sequence of <span 
class="cmss-10">non-quote-character</span>s and
<span 
class="cmss-10">quote-image-symbol</span>s (the latter is two consecutive quote marks) enclosed in quote
marks. There is no escape character in <span 
class="cmss-10">ALEPH</span>, therefore the newline character (and
other control characters) cannot occur in a <span 
class="cmss-10">string-denotation</span>.
<!--l. 4034--><p class="indent" >   <span 
class="cmss-10">ALEPH </span>allows long strings to be split into shorter ones. Consecutive
strings separated by white spaces (even if they are in different lines) are
concatenated. Strings to be concatenated must be properly separated since inside
a string two consecutive quote marks denote a single quote mark. Thus
   <div class="tabular"> <table id="TBL-9" class="tabular" 
><colgroup id="TBL-9-1g"><col 
id="TBL-9-1"><col 
id="TBL-9-2"></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-9-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-9-1-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">"a" "b"</span></td><td  style="white-space:normal; text-align:left;" id="TBL-9-1-2"  
class="td11"><!--l. 4042--><p class="noindent" >is  concatenated  resulting  in  the  two-character  string  <span 
class="ec-lmtt-9x-x-102">"ab"</span> ,
while                                                                          </td>
</tr><tr 
class="vspace" style="font-size:2.0pt"><td 
>&nbsp;</td><td 
>&nbsp;</td></tr><tr  
 style="vertical-align:baseline;" id="TBL-9-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-9-2-1"  
class="td11"><span 
class="ec-lmtt-9x-x-102">"a""b"</span>  </td><td  style="white-space:normal; text-align:left;" id="TBL-9-2-2"  
class="td11"><!--l. 4045--><p class="noindent" >is a single string with three characters: <span 
class="ec-lmtt-9x-x-102">a</span> <span 
class="ec-lmtt-9x-x-102">"</span> and <span 
class="ec-lmtt-9x-x-102">b</span> .               </td> </tr></table></div>
<!--l. 4054--><p class="indent" >
   <h3 class="sectionHead"><span class="titlemark">10   </span> <a 
 id="x1-7800010"></a>Examples</h3>
<!--l. 4057--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">10.1   </span> <a 
 id="x1-7900010.1"></a>Towers of Hanoi</h4>
  <!--l. 4058--><p class="noindent" ><div class="obeylines-v"><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;title="Towers</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;of</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;Hanoi".</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">charfile</span><span 
class="ec-lmtt-9x-x-102">&#8217;print=&#x003E;"out.txt".</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;move</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tower+&#x003E;length+&#x003E;from+&#x003E;via+&#x003E;to:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;length=0;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;decr+length,move</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tower+length+from+to+via,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;move</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;disc+from+to,move</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tower+length+via+from+to.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;move</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;disc+&#x003E;s1+&#x003E;s2:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;putchar+print+s1,put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+print+s2,put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+print+/</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;/.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;move</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tower+6+/a/+/b/+/c/.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>
</div>
<!--l. 4061--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">10.2   </span> <a 
 id="x1-8000010.2"></a>Printing Towers of Hanoi</h4>
  <!--l. 4062--><p class="noindent" ><div class="obeylines-v"><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;title="Towers</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;of</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;Hanoi,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;full</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;printing".</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">stack</span><span 
class="ec-lmtt-9x-x-102">&#8217;[=size=]a[],[=size=]b[],[=size=]c[].</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">constant</span><span 
class="ec-lmtt-9x-x-102">&#8217;size=5.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;move</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tower+&#x003E;length+[]from[]+[]via[]+[]to[]:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;length=0;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;decr+length,move</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tower+length+from+to+via,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;move</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;disc+from+to,print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;towers,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;move</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tower+length+via+from+to.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;move</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;disc+[]st1[]+[]st2[]:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(*</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;st1[&#x003E;&#x003E;st1]-&#x003E;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;st2</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;*)st2,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;unstack+st1.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;towers-ln:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;size-&#x003E;ln,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(lines:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;ln=0;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;disc+a+ln,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;printdisc+b+ln,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;disc+c+ln,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+new</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;line,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;decr+ln,:lines).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;disc+st[]+&#x003E;line-index:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;subtr+line+1+index,add+index+&#x003C;&#x003C;st+index,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(was+st+index,print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;actual</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;disc+st[index];</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;blank</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;disc).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;actual</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;disc+&#x003E;nmb-spc:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;subtr+size+nmb+spc,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;repeat+spc+/</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;/,repeat+nmb+/*/,repeat+1+/*/,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;repeat+nmb+/*/,repeat+spc+/</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;/.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;blank</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;disc:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;repeat+size+/</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;/,repeat+1+/</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;/,repeat+size+/</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;/.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;repeat+&#x003E;cnt+&#x003E;ch:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;cnt=0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+ch,decr+cnt,:repeat.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;-n:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;size-&#x003E;n,(fill</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;a:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;n=0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;decr+n,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(*</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;n-&#x003E;a</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;*)a,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;:fill</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;a),</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;towers,move</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tower+size+a+b+c.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>
</div>
<!--l. 4064--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">10.3   </span> <a 
 id="x1-8100010.3"></a>Symbolic differentiation</h4>
  <!--l. 4065--><p class="noindent" ><div class="obeylines-v"><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;title="Symbolic</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;derivation".</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">stack</span><span 
class="ec-lmtt-9x-x-102">&#8217;[10](op,left,right)expr[].</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">table</span><span 
class="ec-lmtt-9x-x-102">&#8217;operator[]=("+":plus</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"-":min</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"*":tim</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"/":div</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"^":pow</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"log</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;":</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;log</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;log(f)</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;is</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;represented</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;as</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;0</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"log"</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;f</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">stack</span><span 
class="ec-lmtt-9x-x-102">&#8217;[1]const[]=("0":</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;c</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;zero,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"1":</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;c</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;one,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;"2":</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;c</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;two).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">stack</span><span 
class="ec-lmtt-9x-x-102">&#8217;[1]var[]=("x":</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;x</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;var).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;derivate+&#x003E;e+de&#x003E;-f-df-g-dg-n1-n2-n3:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;was+const+e,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;c</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;zero-&#x003E;de;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;was+var+e,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;c</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;one-&#x003E;de;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;left*expr[e]-&#x003E;f,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;right*expr[e]-&#x003E;g,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;derivate+f+df,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;derivate+g+dg,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(=op*expr[e]=</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[plus</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op],M+df+plus</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+dg+de;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[min</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op],</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;M+df+min</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+dg+de;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[tim</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op],</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;M+df+tim</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+g+n1,M+f+tim</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+dg+n2,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;M+n1+plus</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+n2+de;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[div</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op],</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;M+df+tim</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+g+n1,M+f+tim</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+dg+n2,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;M+n1+min</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+n2+n1,M+g+pow</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+c</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;two+n2,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;M+n1+div</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+n2+de;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[log</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op],</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;M+dg+div</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+g+de;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[pow</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op],</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;M+g+min</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+c</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;one+n1,M+f+pow</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+n1+n1,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;M+df+tim</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+g+n2,M+n2+tim</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+n1+n1,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;M+c</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;zero+log</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+f+n2,M+n2+tim</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+dg+n2,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;M+f+pow</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+g+n3,M+n2+tim</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+n3+n2,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;M+n1+plus</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op+n2+de</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;M+&#x003E;left+&#x003E;op+&#x003E;right+res&#x003E;:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(*left-&#x003E;left,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op-&#x003E;op,right-&#x003E;right*)</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expr,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#x003E;&#x003E;expr-&#x003E;res.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expr+&#x003E;e:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expr1+e,print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+newline.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expr1+&#x003E;e:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;was+const+e,print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string+const+e;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;was+var+e,print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string+var+e;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+/(/,(=</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op*expr[e]</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;=</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;[plus</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;min</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;tim</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;div</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;pow</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op],</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expr1+left*expr[e];+),</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;string+operator+op*expr[e],</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expr1+right*expr[e],print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;char+/)/.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">stack</span><span 
class="ec-lmtt-9x-x-102">&#8217;expr=((xvar-&#x003E;left-&#x003E;right,pow</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op-&#x003E;op):</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;x</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;to</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;x,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(log</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;x-&#x003E;left,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;xvar-&#x003E;right,div</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op-&#x003E;op):</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;log</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;x</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;by</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;x,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(c</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;zero-&#x003E;left,xvar-&#x003E;right,log</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;op-&#x003E;op):</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;log</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;x).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;test+&#x003E;f-df-ddf:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;derivate+f+df,derivate+df+ddf,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expr+f,print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expr+df,print</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;expr+ddf.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;test+x</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;to</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;x,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;test+log</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;x</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;by</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;x,</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;test+log</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;x.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>
</div>
<!--l. 4067--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">10.4   </span> <a 
 id="x1-8200010.4"></a>Quicksort</h4>
<!--l. 4068--><p class="noindent" >Module:
  <!--l. 4070--><p class="noindent" ><div class="obeylines-v"><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;module=quicksort,title="Quick</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;sort</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;module".</span>
  <br><span 
class="ec-lmtt-9x-x-102">$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;Sorting</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;elements</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;from</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;a[from]</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;until</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;a[to]</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;quicksort+&#x003E;from+&#x003E;to+[]a[].</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;if=compile.</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;module</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;body</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;starts</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;here</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;quicksort+&#x003E;from+&#x003E;to+[]a[]</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;-left-middle-right-amiddle:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;from</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#x003E;=</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;to;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$done</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;from-&#x003E;left,to-&#x003E;right,add+from+to+middle,div+middle+2+middle,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;a[middle]-&#x003E;amiddle,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(split:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;values</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;smaller</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;than</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;amiddle</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;go</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;to</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;the</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;beginning</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(push</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;right:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;left&#x003E;to;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;amiddle&#x003C;a[left];</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;incr+left,:push</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;right),</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(push</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;left:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;from&#x003E;right;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;a[right]&#x003C;amiddle;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;decr+right,:push</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;left),</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(left&#x003C;right,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(-elem:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;a[left]-&#x003E;elem,a[right]-&#x003E;a[left],elem-&#x003E;a[right]),</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;incr+left,decr+right,:split;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;middle&#x003C;right,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;a[right]-&#x003E;a[middle],amiddle-&#x003E;a[right],decr+right;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;left&#x003C;middle,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;a[left]-&#x003E;a[middle],amiddle-&#x003E;a[left],incr+left;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;+)</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;),quicksort+from+right+a,quicksort+left+to+a.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;+.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;endif=compile.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>
</div>
<!--l. 4072--><p class="noindent" >Main program:
  <!--l. 4074--><p class="noindent" ><div class="obeylines-v"><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;title="Applying</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;quicksort".</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;require="quicksort".</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">stack</span><span 
class="ec-lmtt-9x-x-102">&#8217;[]A[]=(/3/,/1/,/4/,/6/,/5/,/3/,/2/,/3/,/1/).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;quicksort+&#x003C;&#x003C;A+&#x003E;&#x003E;A+A,put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;line+STDOUT+A+newline.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>
</div>
<!--l. 4076--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark">10.5   </span> <a 
 id="x1-8300010.5"></a>Permutations</h4>
<!--l. 4077--><p class="noindent" >Module:
  <!--l. 4078--><p class="noindent" ><div class="obeylines-v"><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;module=perm,title="next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;permutation".</span>
  <br><span 
class="ec-lmtt-9x-x-102">$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;permutation</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;in</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;lexicographic</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;order;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;fail</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;if</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;last</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;macro=next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;perm.</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;compile</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;to</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;the</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;invoking</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;program</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;perm+[]st[]:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;perm</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;from+&#x003C;&#x003C;st+st.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;perm</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;from+&#x003E;i+[]st[].</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;exported</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;rule</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;if=compile.</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;$</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;module</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;body</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;starts</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;here</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">action</span><span 
class="ec-lmtt-9x-x-102">&#8217;invert+&#x003E;from+&#x003E;to+[]S[]-v:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;from&#x003E;=to;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;S[from]-&#x003E;v,S[to]-&#x003E;S[from],v-&#x003E;S[to],incr+from,decr+to,:invert.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">predicate</span><span 
class="ec-lmtt-9x-x-102">&#8217;perm</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;from+&#x003E;i+[]st[]-p-elem:</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;i</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#x003E;=</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#x003E;&#x003E;st,-;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;add+i+1+p,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(perm</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;from+p+st;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;st[i]</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;&#x003E;=</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;st[p],-;</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;invert+p+&#x003E;&#x003E;st+st,st[i]-&#x003E;elem,</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;(rep:elem&#x003E;st[p],incr+p,:rep;+),st[p]-&#x003E;st[i],elem-&#x003E;st[p]</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;printf+"Permutation</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;module</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;initialized</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;...%n".</span><br><span
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;endif=compile.</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>
</div>
<!--l. 4080--><p class="noindent" >Main program:
  <!--l. 4082--><p class="noindent" ><div class="obeylines-v"><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;title="printing</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;permutations".</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">pragmat</span><span 
class="ec-lmtt-9x-x-102">&#8217;require="perm".</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">stack</span><span 
class="ec-lmtt-9x-x-102">&#8217;[]T[]=(/a/,/b/,/c/,/d/).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">root</span><span 
class="ec-lmtt-9x-x-102">&#8217;(nxt:</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;put</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;line+STDOUT+T+newline,(next</span><span 
class="ec-lmtt-9x-x-102">&#x00A0;perm+T,:nxt;+)).</span>
  <br><span 
class="ec-lmtt-9x-x-102">&#8217;</span><span 
class="ec-lmtk-10x-x-92">end</span><span 
class="ec-lmtt-9x-x-102">&#8217;</span>
</div>
<!--l. 4085--><p class="indent" >
   <h3 class="sectionHead"><span class="titlemark">11   </span> <a 
 id="x1-8400011"></a>References in the manual</h3>
   <div class="thebibliography">
   <p class="bibitem" ><span class="biblabel">
 [1]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xalephcomp"></a>L.&#x00A0;Csirmaz, <span 
class="cmti-10">Aleph Compiler, v2.4</span>, available at<br>
   <a href="https://lcsirmaz.github.io/aleph/alephcomp.html" target="_blank_"><span 
class="ec-lmtt-9x-x-102">https://lcsirmaz.github.io/aleph/alephcomp.html</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 [2]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xmanual"></a>D.&#x00A0;Grune,   R.&#x00A0;Bosch,   L.&#x00A0;G.&#x00A0;L.&#x00A0;T&#x00A0;   Meertens.   <span 
class="cmti-10">Aleph   Manual   </span>in:
   D.&#x00A0;Grune,  R.&#x00A0;Bosh:  <span 
class="cmti-10">On  the  design  of  ALEPH</span>,  <span 
class="cmti-10">Mathematical  Centre</span>,
   Amsterdam, 1986
   </p>
   <p class="bibitem" ><span class="biblabel">
 [3]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xkoster71b"></a>C.&#x00A0;H.&#x00A0;A.&#x00A0;Koster, Affix-grammars, in: <span 
class="cmti-10">ALGOL 68 implementation</span>, ed.
   J.&#x00A0;E.&#x00A0;L.&#x00A0;Peck, North-Holland Publ. Co., Amsterdam (1971)
   </p>
   <p class="bibitem" ><span class="biblabel">
 [4]<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xwatt77"></a>D.&#x00A0;A.&#x00A0;Watt, The parsing problem for affix grammars, <span 
class="cmti-10">Acta Inf. </span><span 
class="cmbx-10">8</span>, pp
   1&#8211;20, 1977
</p>
   </div>
</body></html> 

                                                                  


